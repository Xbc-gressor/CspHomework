<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="never" />
    <meta name="description" content="一、配置文件： 1、yaml的使用 YAML 是 &amp;quot;YAML Ain&amp;#39;t Markup Language&amp;quot;（YAML 不是一种标记语言）的递归缩写。在开发的这种语言时，YA" />
    <meta property="og:description" content="一、配置文件： 1、yaml的使用 YAML 是 &amp;quot;YAML Ain&amp;#39;t Markup Language&amp;quot;（YAML 不是一种标记语言）的递归缩写。在开发的这种语言时，YA" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>扩展：14-SpringBoot-尚硅谷-核心功能 - Java小白的搬砖路 - 博客园</title>
    <link id="favicon" rel="shortcut icon" href="//common.cnblogs.com/favicon.svg" type="image/svg+xml" />
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=zS6-e1bxywlu3kpHvpr1J6MySwya3ztFtEnS7RYQ0Fk" />
    <link id="MainCss" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip.min.css?v=eoZATbPKwJCL5eWVDTQIYC6CIxJPcFz191dkzN2tSyQ" />
    <link type="text/css" rel="stylesheet" href="https://www.cnblogs.com/zhangzhixi/custom.css?v=QuM3ek2kNl5nv8ZbM9kLpQ/d24A=" />
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip-mobile.min.css?v=lU86o8mZVn3FOSdFt7nHKYTD8gzeKaiQIIZ6lSjEFyo" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/zhangzhixi/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/zhangzhixi/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/zhangzhixi/wlwmanifest.xml" />
    <script>
        var currentBlogId = 623991;
        var currentBlogApp = 'zhangzhixi';
        var cb_enable_mathjax = false;
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'darkgreentrip';
        var visitorUserId = '';
    </script>
        <script>
            var currentPostDateAdded = '2021-03-27 07:35';
        </script>
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=2Mic1VLeHXarpdzASbXqFMIMVLEBiWXNO5yiTHUcmhw"></script>
    
    
    
</head>
<body class="no-navbar">
    <a name="top"></a>
    <div id="top_nav" class="navbar forpc navbar-custom">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding"><a href="https://www.cnblogs.com/" title="开发者的网上家园"><img src="/images/logo.svg?v=R9M0WmLAIPVydmdzE2keuvnjl-bPR7_35oHqtiBzGsM" alt="博客园Logo" /></a></li>
                <li><a href="/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-sitehome')">首页</a></li>
                <li><a href="https://news.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-news')">新闻</a></li>
                <li><a href="https://q.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-q')">博问</a></li>
                <li><a id="nav_brandzone" href="https://brands.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-brands')">专区</a></li>
                <li><a href="https://ing.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-ing')">闪存</a></li>
                <li><a href="https://edu.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-edu')">班级</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search" action="https://zzk.cnblogs.com/s" method="get">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="text" tabindex="3" />
                        <button type="submit" id="zzk_search_button">
                            <img src="/images/aggsite/search.svg" alt="搜索" />
                        </button>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a class="navbar-user-info navbar-blog" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" alt="写随笔" title="写随笔">
                        <img id="new_post_icon" class="navbar-icon" src="/images/aggsite/newpost.svg" alt="写随笔" />
                    </a>
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客">
                        <img id="myblog_icon" class="navbar-icon" src="/images/aggsite/myblog.svg" alt="我的博客" />
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息">
                        <img id="msg_icon" class="navbar-icon" src="/images/aggsite/message.svg?v=J0WS2P2iPgaIVgXxcAhliw4AFZIpaTWxtdoNAv9eiCA" alt="短消息" />
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="/images/aggsite/avatar-default.svg" alt="用户头像" />
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" id="navbar_lite_mode_toggle" title="简洁模式会使用简洁款皮肤显示所有博客">
    简洁模式 <img id="navbar_lite_mode_on" src="/images/lite-mode-check.svg" class="hide" /><span id="navbar_lite_mode_spinner" class="hide">...</span>
</a>
                            <a href="javascript:void(0)" onclick="account.logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup/">注册</a>
                    <a class="navbar-anonymous" href="javascript:void(0);" onclick="account.login()">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    <div id="page_begin_html">
        <!DOCTYPE html>
<html lang="en">


<title>IT发烧友，一个真正的技术交流群</title>
<link rel="shortcut icon" href="/Content/Images/icon.png">
<script src="~/Scripts/jquery-1.8.2.min.js" defer></script>

<!--================================鼠标离开网页title提示======================================-->
<script>
    window.onload = function () {
        var OriginTitile = document.title;
        var titleTime;
        document.addEventListener('visibilitychange', function () {
            if (document.hidden) {
                $('[rel="shortcut icon"]').attr('href', "/Content/Images/fail.ico");
                document.title = '(●—●)喔哟，崩溃啦！';
                clearTimeout(titleTime);
            } else {
                $('[rel="shortcut icon"]').attr('href', "/Content/Images/icon.png");
                document.title = '(/≧▽≦/)咦！又好了！' + OriginTitile;
                titleTime = setTimeout(function () {
                    document.title = OriginTitile;
                }, 2000);
            }
        });
    }
</script>
<!--================================鼠标离开网页title提示======================================-->

<!--
雪花背景-：使用的话就直接取消注释，下面两个js都可以用选择一个使用就好
<div class="Snow">
        <canvas id="Snow"></canvas>
    </div>
    <script src="https://files.cnblogs.com/files/zhangzhixi/show.js" defer></script>
    <script src="https://files.cnblogs.com/files/zhangzhixi/xue.js" defer></script>
-->


<!--八角形雪花特效-->
<script src="https://files.cnblogs.com/files/zhangzhixi/八角形雪花.js" defer></script>
<canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 2147483647; pointer-events: none;"></canvas>
<script type="text/javascript">
    window.onload = function () {
        var minSize = 10; //最小字体
        var maxSize = 30;//最大字体
        var newOne = 400; //生成雪花间隔
        var flakColor = "#52bafd"; //雪花颜色
        var flak = $("<div></div>").css({position: "absolute", "top": "0px"}).html("❉");//定义一个雪花
        var dhight = $(window).height(); //定义视图高度
        var dw = $(window).width() - 80; //定义视图宽度
        setInterval(function () {
            var sizeflak = minSize + Math.random() * maxSize; //产生大小不等的雪花
            var startLeft = Math.random() * dw; //雪花生成是随机的left值
            var startOpacity = 0.7 + Math.random() * 0.3; //随机透明度
            var endTop = dhight - 100; //雪花停止top的位置
            var endLeft = Math.random() * dw; //雪花停止的left位置
            var durationfull = 5000 + Math.random() * 3000; //雪花飘落速度不同
            flak.clone().appendTo($("body")).css({
                "left": startLeft,
                "opacity": startOpacity,
                "font-size": sizeflak,
                "color": flakColor
            }).animate({
                "top": endTop,
                "left": endLeft,
                "apacity": 0.1
            }, durationfull, function () {
                $(this).remove()
            });
        }, newOne);
    }
</script>


<!--================================点击爱心======================================-->
<script>
    !function (e, t, a) {
        function n() {
            c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), o(), r()
        }

        function r() {
            for (var e = 0; e < d.length; e++) d[e].alpha <= 0 ? (t.body.removeChild(d[e].el), d.splice(e, 1)) : (d[e].y--, d[e].scale += .004, d[e].alpha -= .013, d[e].el.style.cssText = "left:" + d[e].x + "px;top:" + d[e].y + "px;opacity:" + d[e].alpha + ";transform:scale(" + d[e].scale + "," + d[e].scale + ") rotate(45deg);background:" + d[e].color + ";z-index:99999");
            requestAnimationFrame(r)
        }

        function o() {
            var t = "function" == typeof e.onclick && e.onclick;
            e.onclick = function (e) {
                t && t(), i(e)
            }
        }

        function i(e) {
            var a = t.createElement("div");
            a.className = "heart", d.push({
                el: a,
                x: e.clientX - 5,
                y: e.clientY - 5,
                scale: 1,
                alpha: 1,
                color: s()
            }), t.body.appendChild(a)
        }

        function c(e) {
            var a = t.createElement("style");
            a.type = "text/css";
            try {
                a.appendChild(t.createTextNode(e))
            } catch (t) {
                a.styleSheet.cssText = e
            }
            t.getElementsByTagName("head")[0].appendChild(a)
        }

        function s() {
            return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
        }

        var d = [];
        e.requestAnimationFrame = function () {
            return e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
                setTimeout(e, 1e3 / 60)
            }
        }(), n()
    }(window, document);
</script>
<!--================================点击爱心======================================-->


<!--设置蜘蛛网-->
<canvas id="c_n9" width="1920" height="990"
        style="position: fixed; top: 0px; left: 0px; z-index: -1; opacity: 2;">
</canvas>
<script src="https://blog-static.cnblogs.com/files/zhangzhixi/zzw.js" defer></script>

<!--设置看板娘（左）-->
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js" defer></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
<script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/autoload.js" defer></script>

<!--================================照片旋转特效======================================-->
<link href="css/style.css" rel="stylesheet" type="text/css"/>
<style text="text/css">
    /*实现立体效果*/
    .img {
        width: 50px;
        height: 50px;
        margin: 0 auto;
        transform-style: preserve-3d;
        /*设置动画播放样式:动画对象 播放速度 时间 播放次数*/
        animation: rotate linear 20s infinite;
    }

    /*实现动画效果*/
    @-webkit-keyframes rotate { /*sofari chrome*/
        from {
            transform: rotateX(0deg) rotateY(0deg);
        }
        to {
            transform: rotateX(360deg) rotateY(360deg);
        }
    }

    /*图片样式*/
    .pic {
        width: 200px;
        height: 200px;
        transform: rotateY(0deg) translateZ(100px);
    }
</style>
<style type="text/css">
    /*最外层容器样式*/
    .wrap {
        width: 100px;
        height: 100px;
        margin: 150px;
        position: relative;
    }

    /*得到立方体效果*/
    .cube {
        width: 50px;
        height: 50px;
        margin: 0 auto;
        transform-style: preserve-3d;
        /*设置动画播放样式:动画对象 播放速度 时间 播放次数*/
        animation: rotate linear 20s infinite;
    }

    /*动画旋转的方式*/
    /*得到动画效果*/
    @-moz-keyframes rotate { /*firefox*/
        from {
            transform: rotateX(0deg) rotateY(0deg);
        }
        to {
            transform: rotateX(360deg) rotateY(360deg);
        }
    }

    @-webkit-keyframes rotate { /*sofari chrome*/
        from {
            transform: rotateX(0deg) rotateY(0deg);
        }
        to {
            transform: rotateX(360deg) rotateY(360deg);
        }
    }

    @-o-keyframes rotate { /*opera*/
        from {
            transform: rotateX(0deg) rotateY(0deg);
        }
        to {
            transform: rotateX(360deg) rotateY(360deg);
        }
    }

    /*每张图片的样式*/
    .cube div {
        position: absolute;
        width: 200px;
        height: 200px;
        opacity: 0.8;
        /*过渡效果*/
        transition: all .4s;
    }

    /*定义所有图片样式*/
    .pic {
        width: 200px;
        height: 200px;
    }

    .cube .out_front {
        transform: rotateY(0deg) translateZ(100px);
    }

    .cube .out_back {
        transform: translateZ(-100px) rotateY(180deg);
    }

    .cube .out_left {
        transform: rotateY(-90deg) translateZ(100px);
    }

    .cube .out_right {
        transform: rotateY(90deg) translateZ(100px);
    }

    .cube .out_top {
        transform: rotateX(90deg) translateZ(100px);
    }

    .cube .out_bottom {
        transform: rotateX(-90deg) translateZ(100px);
    }

    /*定义小正方体样式*/
    .cube span {
        display: block;
        width: 100px;
        height: 100px;
        position: absolute;
        top: 50px;
        left: 50px;
    }

    .cube .in_pic {
        width: 100px;
        height: 100px;
    }

    .cube .in_front {
        transform: rotateY(0deg) translateZ(50px);
    }

    .cube .in_back {
        transform: translateZ(-50px) rotateY(180deg);
    }

    .cube .in_left {
        transform: rotateY(-90deg) translateZ(50px);
    }

    .cube .in_right {
        transform: rotateY(90deg) translateZ(50px);
    }

    .cube .in_top {
        transform: rotateX(90deg) translateZ(50px);
    }

    .cube .in_bottom {
        transform: rotateX(-90deg) translateZ(50px);
    }

    /*鼠标移入后样式*/
    .cube:hover .out_front {
        transform: rotateY(0deg) translateZ(200px);
    }

    .cube:hover .out_back {
        transform: translateZ(-200px) rotateY(180deg);
    }

    .cube:hover .out_left {
        transform: rotateY(-90deg) translateZ(200px);
    }

    .cube:hover .out_right {
        transform: rotateY(90deg) translateZ(200px);
    }

    .cube:hover .out_top {
        transform: rotateX(90deg) translateZ(200px);
    }

    .cube:hover .out_bottom {
        transform: rotateX(-90deg) translateZ(200px);
    }
</style>

<script type="text/javascript" src="js/jquery-3.4.1.min.js" defer></script>
<div class="wrap">
    <!--部署内外层图片-->
    <div class="cube">
        <!--前面图片 -->
        <div class="out_front">
            <img src="https://pic.liesio.com/2020/09/09/1101cbc41d268.jpg" class="pic">
        </div>
        <!--后面图片 -->
        <div class="out_back">
            <img src="https://pic.liesio.com/2020/09/09/0701f22e1ea59.png" class="pic">
        </div>
        <!--左面图片 -->
        <div class="out_left">
            <img src="https://pic.liesio.com/2020/09/09/f4a656984ad8b.jpeg" class="pic">
        </div>
        <!--右面图片 -->
        <div class="out_right">
            <img src="https://pic.liesio.com/2020/09/09/8fb062b82a765.jpg" class="pic">
        </div>
        <!--上面图片 -->
        <div class="out_top">
            <img src="https://pic.liesio.com/2020/09/09/0370dbef0898b.jpg" class="pic">
        </div>
        <!--下面图片 -->
        <div class="out_bottom">
            <img src="https://pic.liesio.com/2020/09/09/ef267d1474273.jpg" class="pic">
        </div>
        <!--小正方体 -->
        <span class="in_front">
                    <img src="https://pic.liesio.com/2020/09/09/9784dfa0fcac0.jpg" class="in_pic">
                </span>

        <span class="in_back">
                    <img src="https://pic.liesio.com/2020/09/09/e248a0313034b.jpg" class="in_pic">
                </span>

        <span class="in_left">
                    <img src="https://pic.liesio.com/2020/09/09/433c02d872975.jpg" class="in_pic">
                </span>

        <span class="in_right">
                    <img src="https://pic.liesio.com/2020/09/09/64e32ea15d516.jpg" class="in_pic">
                </span>

        <span class="in_top">
                    <img src="https://pic.liesio.com/2020/09/09/4d121dc236f28.jpg" class="in_pic">
                </span>
        <span class="in_bottom">
                    <img src="https://pic.liesio.com/2020/09/09/d7fc273f13b53.jpg" class="in_pic">
                </span>

    </div>
</div>
<!--================================照片旋转特效======================================-->


<!--================================回到首页小飞机======================================-->
<style>
#back-top {
     position: fixed;
     bottom: 10px;
     right: 5px;
     z-index: 99;
}
#back-top span {
     width: 50px;
     height: 64px;
     display: block;
     background:url(http://images.cnblogs.com/cnblogs_com/seanshao/855033/o_rocket.png) no-repeat center center;
}
#back-top a{outline:none}
</style>
<script type="text/javascript">
$(function() {
	// hide #back-top first
	$("#back-top").hide();
	// fade in #back-top
	$(window).scroll(function() {
		if ($(this).scrollTop() > 500) {
			$('#back-top').fadeIn();
		} else {
			$('#back-top').fadeOut();
		}
	});
	// scroll body to 0px on click
	$('#back-top a').click(function() {
		$('body,html').animate({
			scrollTop: 0
		}, 800);
		return false;
	});
});
</script>
<p id="back-top" style="display:none"><a href="#top"><span></span></a></p>
<!--================================回到首页小飞机======================================-->
<!--=======================github==============================-->
<a href="https://github.com/zhangzhixi0305" title="我的github地址" target="_Blank" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<a href="https://gitee.com/zhang-zhixi" title="我的码云地址" target="_Blank" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<!--=======================github==============================-->
</html>
    </div>
    <!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/zhangzhixi/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="返回主页" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/zhangzhixi/">Java小白的搬砖路</a>
</h1>
<h2>人生没有白走的路,每走一步都算数!    </h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/zhangzhixi/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/Java%E5%B0%8F%E7%99%BD%E7%9A%84%E6%90%AC%E7%A0%96%E8%B7%AF">
联系</a></li>
<li>

<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			<div id="blog_stats_place_holder"><script>loadBlogStats();</script></div>
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class = "postTitle">
                
<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhangzhixi/p/14586705.html">
    <span>扩展：14-SpringBoot-尚硅谷-核心功能</span>
    



</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2>一、配置文件：</h2>
<h3 id="bF89E" data-lake-id="c43e3ac0b3bc36396ce937cd163b8120" data-wording="true">1、yaml的使用</h3>
<p data-lake-id="7eaf45bc1f60cb3e71952327178ac4db" data-wording="true"><span class="lake-fontsize-12">　　YAML 是 "YAML Ain't Markup Language"（YAML 不是一种标记语言）的递归缩写。在开发的这种语言时，YAML 的意思其实是："Yet Another Markup Language"（仍是一种标记语言）。</span></p>
<p data-lake-id="8fadaf3fa288c12b0c45b3275ab69277" data-wording="true">非常适合用来做以数据为中心的配置文件</p>
<blockquote>
<p id="25e14243" data-lake-id="719c64070c6b035a2c37f8d06a056221" data-wording="true">基本语法</p>
</blockquote>
<ul data-lake-id="106337ff154a502bbd0efd2e0e91ad33">
<li data-lake-id="872eeefde1898942238e3b3aa50cf06f" data-wording="true">key: value；kv之间有空格</li>
<li data-lake-id="4f06d5720e191c3fa6f82e3e4d5a464a" data-wording="true"><span class="lake-fontsize-12">大小写敏感</span></li>
<li data-lake-id="3874c91b04daab6e6b6bfb8b6cba776c" data-wording="true"><span class="lake-fontsize-12">使用缩进表示层级关系</span></li>
<li data-lake-id="19987d239e8589efcf4b1350ffe2beba" data-wording="true"><span class="lake-fontsize-12">缩进不允许使用tab，只允许空格</span></li>
<li data-lake-id="7a6918f9794fb0a1f265e4ab0298e8b1" data-wording="true"><span class="lake-fontsize-12">缩进的空格数不重要，只要相同层级的元素左对齐即可</span></li>
<li data-lake-id="5ab04b1fc98c864b0b4366177e2340c3" data-wording="true"><span class="lake-fontsize-12">'#'表示注释</span></li>
<li data-lake-id="21f38728c5a34a9bb1b882c840fd575e" data-wording="true"><span class="lake-fontsize-12">字符串无需加引号，如果要加，双引号与单引号表示字符串内容 会被 转义/不转义</span></li>
</ul>
<blockquote>
<p id="HCIaI" data-lake-id="9a87066f0ac7db515dd2a90d5b4ffe10" data-wording="true">示例：</p>
</blockquote>
<p data-lake-id="9a87066f0ac7db515dd2a90d5b4ffe10" data-wording="true">Person类：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 0, 1)">@Data
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 0, 1)">@NoArgsConstructor
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 0, 1)">@AllArgsConstructor
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> <span style="color: rgba(0, 0, 0, 1)">@Component
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> @ConfigurationProperties(prefix = "person"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Person {
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> String userName;
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> Boolean boss;
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> Date birth;
</span><span style="color: rgba(0, 128, 128, 1)">10</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> Integer age;
</span><span style="color: rgba(0, 128, 128, 1)">11</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> Pet pet;
</span><span style="color: rgba(0, 128, 128, 1)">12</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> String[] interests;
</span><span style="color: rgba(0, 128, 128, 1)">13</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> List&lt;String&gt;<span style="color: rgba(0, 0, 0, 1)"> animal;
</span><span style="color: rgba(0, 128, 128, 1)">14</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> Map&lt;String, Object&gt;<span style="color: rgba(0, 0, 0, 1)"> score;
</span><span style="color: rgba(0, 128, 128, 1)">15</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> Set&lt;Double&gt;<span style="color: rgba(0, 0, 0, 1)"> salarys;
</span><span style="color: rgba(0, 128, 128, 1)">16</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> Map&lt;String, List&lt;Pet&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> allPets;
</span><span style="color: rgba(0, 128, 128, 1)">17</span> <span style="color: rgba(0, 0, 0, 1)">}
</span><span style="color: rgba(0, 128, 128, 1)">18</span> 
<span style="color: rgba(0, 128, 128, 1)">19</span> <span style="color: rgba(0, 0, 0, 1)">@Data
</span><span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">@NoArgsConstructor
</span><span style="color: rgba(0, 128, 128, 1)">21</span> <span style="color: rgba(0, 0, 0, 1)">@AllArgsConstructor
</span><span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Pet {
</span><span style="color: rgba(0, 128, 128, 1)">23</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> String name;
</span><span style="color: rgba(0, 128, 128, 1)">24</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> Double weight;
</span><span style="color: rgba(0, 128, 128, 1)">25</span> }</pre>
</div>
<p data-lake-id="9a87066f0ac7db515dd2a90d5b4ffe10" data-wording="true">application.yaml配置文件：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;"># yaml表示以上对象
person:
  userName: "zhangsan \n 李四"
  boss: false
  birth: 2019/12/12 20:12:33
  age: 18
  pet:
    name: tomcat
    weight: 23.4
  interests: [篮球,游泳]
  animal:
    - jerry
    - mario
  score:
    english:
      first: 30
      second: 40
      third: 50
    math: [131,140,148]
    chinese: {first: 128,second: 136}
  salarys: [3999,4999.98,5999.99]
  allPets:
    sick:
      - {name: tom}
      - {name: jerry,weight: 47}
    health: [{name: mario,weight: 47}]
</pre>
</div>
<p>controller测试，输出数据：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">@Resource
Person person;
@RequestMapping({</span>"/index", "/"<span style="color: rgba(0, 0, 0, 1)">})
</span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> String test1() {
    System.out.println(</span>"=========="+<span style="color: rgba(0, 0, 0, 1)">person.getUserName());
    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> person.toString();
}</span></pre>
</div>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327193446374-1197362545.png" alt="" loading="lazy"></p>
<h3>2、配置提示：</h3>
<p>在一般我们自己定义的组件在配置yaml的时候，是没有提示的，如果我们想要编写yaml的时候有提示的话应该加上一个依赖：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327205120111-477678768.png" alt="" loading="lazy"></p>
<p>加上了依赖就有了提示：</p>
<p>&nbsp;<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327205343185-9284211.png" alt="" loading="lazy"></p>
<h2>&nbsp;二、Web开发</h2>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327210208439-864414680.png" alt="" loading="lazy"></p>
<h3>1、概览</h3>
<p data-lake-id="c14e6af0d28152cd812dbb1dbfeaa059" data-wording="true">Spring Boot provides auto-configuration for Spring MVC that <strong>works well with most applications.(大多场景我们都无需自定义配置)</strong></p>
<p data-lake-id="8997a61a4a87ff16c2f0418bcca2facd" data-wording="true">The auto-configuration adds the following features on top of Spring’s defaults:</p>
<ul data-lake-id="78017a083bb6ebf28bca4cdb212d60a4">
<li data-lake-id="b84f18a9ab23bb901cdaeb66ab1f15b6" data-wording="true">Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</li>
</ul>
<ul data-lake-id="e72caf68008c2e6143ca7e25a2f74170">
<ul data-lake-id="0b3487fc508b7569f25e06a1659c4759">
<li data-lake-id="a06af0f0fb1a00801e3f82bbeb195cc5" data-wording="true">内容协商视图解析器和BeanName视图解析器</li>
</ul>
</ul>
<ul data-lake-id="7c5942a2394fd12c7dfcfb8b1d417b76">
<li data-lake-id="9a3568df270c78f7a02ec256fc8043a8" data-wording="true"><span style="text-decoration: underline">Support for serving static resources, including support for WebJars (covered </span><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-static-content" rel="noopener noreferrer" target="_blank"><span style="text-decoration: underline">later in this document</span></a><span style="text-decoration: underline">)).</span></li>
</ul>
<ul data-lake-id="afe4729ba0d63b7a3f24c8fcc6895f1e">
<ul data-lake-id="a53bb506c779b3c4f7a7c4bf720b302d">
<li data-lake-id="c9ccb246292c953e8714da0dea7f50f4" data-wording="true"><span style="text-decoration: underline">静态资源（包括webjars）</span></li>
</ul>
</ul>
<ul data-lake-id="5328db469a8381ebb26bf5f238322cef">
<li data-lake-id="7ec2c708cc9cdc36b94be113e5c00dbf" data-wording="true">Automatic registration of <code>Converter</code>, <code>GenericConverter</code>, and <code>Formatter</code> beans.</li>
</ul>
<ul data-lake-id="3686588d88d07acbb4d65319fd6f1626">
<ul data-lake-id="81703f9c10e7be11a2fa91e9d183f6a7">
<li data-lake-id="f439c648d507369a1f866c0815f2ca72" data-wording="true">自动注册 <code>Converter，GenericConverter，Formatter </code></li>
</ul>
</ul>
<ul data-lake-id="f78dce0c7fb782dcc3d9a593b57e8015">
<li data-lake-id="94ce420546f6fb8bf0c598a6c6e32634" data-wording="true">Support for <code>HttpMessageConverters</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-message-converters" rel="noopener noreferrer" target="_blank">later in this document</a>).</li>
</ul>
<ul data-lake-id="84edaed0035aa53436359db020ac2a00">
<ul data-lake-id="6def7a8f30b9a5b0149861a8e6423f19">
<li data-lake-id="b9d0e96151271864b02cdd437202717a" data-wording="true">支持 <code>HttpMessageConverters</code> （后来我们配合内容协商理解原理）</li>
</ul>
</ul>
<ul data-lake-id="47c5a38048c0645973ee4f1b0cb25e01">
<li data-lake-id="f9b6c4cfc21601ca31051c7cc51f9463" data-wording="true">Automatic registration of <code>MessageCodesResolver</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-message-codes" rel="noopener noreferrer" target="_blank">later in this document</a>).</li>
</ul>
<ul data-lake-id="d9df90d86bc11736c5c3f48c84ed6e7d">
<ul data-lake-id="58ad77c1be397e98325cbed30db6a900">
<li data-lake-id="cbd4908450a3eeb364b2d4d49a3d62eb" data-wording="true">自动注册 <code>MessageCodesResolver</code> （国际化用）</li>
</ul>
</ul>
<ul data-lake-id="1941bcbd03fea31a00009de682265eb9">
<li data-lake-id="0088d4e6ddc020820d62bd96ed724d8f" data-wording="true"><span style="text-decoration: underline">Static </span><span style="text-decoration: underline"><code>index.html</code></span><span style="text-decoration: underline"> support.</span></li>
</ul>
<ul data-lake-id="ff863cebb6057e106dabcbdd4c027541">
<ul data-lake-id="6f856f13e4e7991e663e0445e692db82">
<li data-lake-id="3e3b629c565a9598223c0afae3dddb9d" data-wording="true"><span style="text-decoration: underline">静态index.html 页支持</span></li>
</ul>
</ul>
<ul data-lake-id="b07453d8272195194ec3bbf6a85fba5a">
<li data-lake-id="370e7994cff6a807985f5957aced1953" data-wording="true"><span style="text-decoration: underline">Custom </span><span style="text-decoration: underline"><code>Favicon</code></span><span style="text-decoration: underline"> support (covered </span><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-favicon" rel="noopener noreferrer" target="_blank"><span style="text-decoration: underline">later in this document</span></a><span style="text-decoration: underline">).</span></li>
</ul>
<ul data-lake-id="5fef8ae5bd3833d772c748441a08954f">
<ul data-lake-id="45cd03b11227aade1b10084a1e7e26e7">
<li data-lake-id="2e57a829cee479995df3ef73ab50a69c" data-wording="true"><span style="text-decoration: underline">自定义 </span><span style="text-decoration: underline"><code>Favicon</code></span><span style="text-decoration: underline"> &nbsp;</span></li>
</ul>
</ul>
<ul data-lake-id="8e156d7900c96bace7191c1baf9ceb7e">
<li data-lake-id="819df6d3228de18f2706bfa40686145c" data-wording="true">Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-web-binding-initializer" rel="noopener noreferrer" target="_blank">later in this document</a>).</li>
</ul>
<ul data-lake-id="474a7291a702ff9ef275b875cbf3434a">
<ul data-lake-id="1d9e3550e0316c979afcdb808341c27c">
<li data-lake-id="2bb1c5fa76470e0e26d5de27ee777183" data-wording="true">自动使用 <code>ConfigurableWebBindingInitializer</code> ，（DataBinder负责将请求数据绑定到JavaBean上）</li>
</ul>
</ul>
<h3>2、简单功能分析：</h3>
<blockquote>
<p>2.1.1、静态资源访问目录</p>
</blockquote>
<p data-lake-id="41aec7c76ec0b8b2d69b3407e86e3309" data-wording="true">只要静态资源放在<span class="lake-fontsize-12">类路径下： called <code>/static</code><span class="lake-fontsize-12"> (or <code>/public</code><span class="lake-fontsize-12"> or <code>/resources</code><span class="lake-fontsize-12"> or <code>/META-INF/resources</code></span></span></span></span></p>
<p data-lake-id="424bfa9a77b3371bd496aed937ea288b" data-wording="true">访问 ： 当前<strong>项目根路径/ + 静态资源名&nbsp;</strong></p>
<p data-lake-id="424bfa9a77b3371bd496aed937ea288b" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">源码中可以看到springboot默认的资源访问目录设置：</span></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327220039878-681777099.png" alt="" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327220336751-1539492425.png" alt="" loading="lazy"></p>
<blockquote>
<p>2.1.2、静态资源访问前缀：</p>
</blockquote>
<p>在yaml中可以配置静态资源的访问目录，跟访问资源的前缀：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">spring:
  mvc:
#    资源访问前缀
    static-path-pattern: /res/**</pre>
</div>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327220852975-934148070.png" alt="" loading="lazy"></p>
<blockquote>
<p>2.2、欢迎页面：</p>
</blockquote>
<p><span style="background-color: rgba(255, 255, 0, 1)"><strong>将index.html放在资源访问目录下即可，也可以通过controller进行访问！</strong></span></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327222536867-1674474487.png" alt="" loading="lazy"></p>
<blockquote>
<p>&nbsp;2.3、网站图标设置：自定义favicon.ico</p>
</blockquote>
<p>　　将favicon.ico放在static资源目录下，即可看到网站图标。需要注意的是，如果刷新页面没有看到网站图标，可以ctrl+F5强行刷新缓存、</p>
<p>或者重启idea即可！</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327224231655-1904020243.png" alt="" loading="lazy"></p>
<p>成功访问：</p>
<p>&nbsp;<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210327224237970-823284398.png" alt="" loading="lazy"></p>
<blockquote>
<p>2.4、【原理分析】静态资源配置原理</p>
</blockquote>
<ul style="margin-top: 0; margin-right: 0; margin-bottom: 0; padding-left: 23px; font-size: 15px; color: rgba(64, 64, 64, 1); line-height: 1.74; letter-spacing: 0.008em; outline-style: none; overflow-wrap: break-word" data-lake-id="0328439c8227e3ab761c8ef1e5314773">
<li data-lake-id="8ff6eb4b23050aaa7bc3582fa0f04021" data-wording="true">SpringBoot启动默认加载 &nbsp;xxxAutoConfiguration 类（自动配置类）</li>
<li data-lake-id="f28c53fcfe04941597d7bdd53aeaa1b1" data-wording="true">SpringMVC功能的自动配置类 <strong>WebMvcAutoConfiguration</strong>，生效</li>
</ul>
<div id="hGNAR" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%40Configuration(proxyBeanMethods%20%3D%20false)%5Cn%40ConditionalOnWebApplication(type%20%3D%20Type.SERVLET)%5Cn%40ConditionalOnClass(%7B%20Servlet.class%2C%20DispatcherServlet.class%2C%20WebMvcConfigurer.class%20%7D)%5Cn%40ConditionalOnMissingBean(WebMvcConfigurationSupport.class)%5Cn%40AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE%20%2B%2010)%5Cn%40AutoConfigureAfter(%7B%20DispatcherServletAutoConfiguration.class%2C%20TaskExecutionAutoConfiguration.class%2C%5Cn%5Ct%5CtValidationAutoConfiguration.class%20%7D)%5Cnpublic%20class%20WebMvcAutoConfiguration%20%7B%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22hGNAR%22%7D" data-language="java">
<div class="lake-codeblock-content" style="border: 1px solid rgba(232, 232, 232, 1); max-width: 750px; color: rgba(89, 89, 89, 1); margin: 0; padding: 0; background: rgba(249, 249, 249, 1)">
<div class="CodeMirror-sizer" style="margin: 0; padding: 16px">
<pre class="cm-s-default"><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0"><span class="cm-meta" style="color: rgba(31, 127, 154, 1); margin: 0; padding: 0">@Configuration</span>(<span class="cm-variable" style="margin: 0; padding: 0">proxyBeanMethods</span> <span class="cm-operator" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">=</span> <span class="cm-atom" style="color: rgba(153, 0, 85, 1); margin: 0; padding: 0">false</span>)
</span></span><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0"><span class="cm-meta" style="color: rgba(31, 127, 154, 1); margin: 0; padding: 0">@ConditionalOnWebApplication</span>(<span class="cm-variable" style="margin: 0; padding: 0">type</span> <span class="cm-operator" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">=</span> <span class="cm-variable" style="margin: 0; padding: 0">Type</span>.<span class="cm-variable" style="margin: 0; padding: 0">SERVLET</span>)
</span></span><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0"><span class="cm-meta" style="color: rgba(31, 127, 154, 1); margin: 0; padding: 0">@ConditionalOnClass</span>({ <span class="cm-variable" style="margin: 0; padding: 0">Servlet</span>.<span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span>, <span class="cm-variable" style="margin: 0; padding: 0">DispatcherServlet</span>.<span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span>, <span class="cm-variable" style="margin: 0; padding: 0">WebMvcConfigurer</span>.<span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span> })
</span></span><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0"><span class="cm-meta" style="color: rgba(31, 127, 154, 1); margin: 0; padding: 0">@ConditionalOnMissingBean</span>(<span class="cm-variable" style="margin: 0; padding: 0">WebMvcConfigurationSupport</span>.<span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span>)
</span></span><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0"><span class="cm-meta" style="color: rgba(31, 127, 154, 1); margin: 0; padding: 0">@AutoConfigureOrder</span>(<span class="cm-variable" style="margin: 0; padding: 0">Ordered</span>.<span class="cm-variable" style="margin: 0; padding: 0">HIGHEST_PRECEDENCE</span> <span class="cm-operator" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">+</span> <span class="cm-number" style="color: rgba(0, 92, 197, 1); margin: 0; padding: 0">10</span>)
</span></span><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0"><span class="cm-meta" style="color: rgba(31, 127, 154, 1); margin: 0; padding: 0">@AutoConfigureAfter</span>({ <span class="cm-variable" style="margin: 0; padding: 0">DispatcherServletAutoConfiguration</span>.<span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span>, <span class="cm-variable" style="margin: 0; padding: 0">TaskExecutionAutoConfiguration</span>.<span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span>,
</span></span><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0">        <span class="cm-variable" style="margin: 0; padding: 0">ValidationAutoConfiguration</span>.<span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span> })
</span></span><span class="lake-preview-line" style="margin: 0; padding: 0"><span class="lake-preview-codeblock-content" style="margin: 0; padding: 0"><span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">public</span> <span class="cm-keyword" style="color: rgba(215, 58, 73, 1); margin: 0; padding: 0">class</span> <span class="cm-def" style="color: rgba(0, 92, 197, 1); margin: 0; padding: 0">WebMvcAutoConfiguration</span> {}</span></span></pre>
</div>
</div>
</div>
<ul data-lake-id="58d39df5dc0cb87b635bc259a1e7678f">
<li data-lake-id="fab947a8aec2793feec1ae9ebc3b1956" data-wording="true">给容器中配了什么。</li>
</ul>
<div id="tGpwn" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%5Ct%40Configuration(proxyBeanMethods%20%3D%20false)%5Cn%5Ct%40Import(EnableWebMvcConfiguration.class)%5Cn%5Ct%40EnableConfigurationProperties(%7B%20WebMvcProperties.class%2C%20ResourceProperties.class%20%7D)%5Cn%5Ct%40Order(0)%5Cn%5Ctpublic%20static%20class%20WebMvcAutoConfigurationAdapter%20implements%20WebMvcConfigurer%20%7B%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22tGpwn%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_code">
<pre>    @Configuration(proxyBeanMethods = <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">)
    @Import(EnableWebMvcConfiguration.</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)">)
    @EnableConfigurationProperties({ WebMvcProperties.</span><span style="color: rgba(0, 0, 255, 1)">class</span>, ResourceProperties.<span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> })
    @Order(</span>0<span style="color: rgba(0, 0, 0, 1)">)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">class</span> WebMvcAutoConfigurationAdapter <span style="color: rgba(0, 0, 255, 1)">implements</span> WebMvcConfigurer {}</pre>
</div>
</div>
</div>
</div>
<ul data-lake-id="80244dd5a00533de7ee8e44692c1e068">
<li data-lake-id="16beac0682a72ae70149d206ec6ed45b" data-wording="true">配置文件的相关属性和xxx进行了绑定。WebMvcProperties==<strong>spring.mvc</strong>、ResourceProperties==<strong>spring.resources</strong></li>
</ul>
<p id="Gcz5z" data-lake-id="01a67be4ce2d86f1bbd5074fdb6d2ab0" data-wording="true"><strong>1、配置类只有一个有参构造器</strong></p>
<div id="XZbzU" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%5Ct%2F%2F%E6%9C%89%E5%8F%82%E6%9E%84%E9%80%A0%E5%99%A8%E6%89%80%E6%9C%89%E5%8F%82%E6%95%B0%E7%9A%84%E5%80%BC%E9%83%BD%E4%BC%9A%E4%BB%8E%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%A1%AE%E5%AE%9A%5Cn%2F%2FResourceProperties%20resourceProperties%EF%BC%9B%E8%8E%B7%E5%8F%96%E5%92%8Cspring.resources%E7%BB%91%E5%AE%9A%E7%9A%84%E6%89%80%E6%9C%89%E7%9A%84%E5%80%BC%E7%9A%84%E5%AF%B9%E8%B1%A1%5Cn%2F%2FWebMvcProperties%20mvcProperties%20%E8%8E%B7%E5%8F%96%E5%92%8Cspring.mvc%E7%BB%91%E5%AE%9A%E7%9A%84%E6%89%80%E6%9C%89%E7%9A%84%E5%80%BC%E7%9A%84%E5%AF%B9%E8%B1%A1%5Cn%2F%2FListableBeanFactory%20beanFactory%20Spring%E7%9A%84beanFactory%5Cn%2F%2FHttpMessageConverters%20%E6%89%BE%E5%88%B0%E6%89%80%E6%9C%89%E7%9A%84HttpMessageConverters%5Cn%2F%2FResourceHandlerRegistrationCustomizer%20%E6%89%BE%E5%88%B0%20%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%99%A8%E3%80%82%3D%3D%3D%3D%3D%3D%3D%3D%3D%5Cn%2F%2FDispatcherServletPath%20%20%5Cn%2F%2FServletRegistrationBean%20%20%20%E7%BB%99%E5%BA%94%E7%94%A8%E6%B3%A8%E5%86%8CServlet%E3%80%81Filter....%5Cn%5Ctpublic%20WebMvcAutoConfigurationAdapter(ResourceProperties%20resourceProperties%2C%20WebMvcProperties%20mvcProperties%2C%5Cn%5Ct%5Ct%5Ct%5CtListableBeanFactory%20beanFactory%2C%20ObjectProvider%3CHttpMessageConverters%3E%20messageConvertersProvider%2C%5Cn%5Ct%5Ct%5Ct%5CtObjectProvider%3CResourceHandlerRegistrationCustomizer%3E%20resourceHandlerRegistrationCustomizerProvider%2C%5Cn%5Ct%5Ct%5Ct%5CtObjectProvider%3CDispatcherServletPath%3E%20dispatcherServletPath%2C%5Cn%5Ct%5Ct%5Ct%5CtObjectProvider%3CServletRegistrationBean%3C%3F%3E%3E%20servletRegistrations)%20%7B%5Cn%5Ct%5Ct%5Ctthis.resourceProperties%20%3D%20resourceProperties%3B%5Cn%5Ct%5Ct%5Ctthis.mvcProperties%20%3D%20mvcProperties%3B%5Cn%5Ct%5Ct%5Ctthis.beanFactory%20%3D%20beanFactory%3B%5Cn%5Ct%5Ct%5Ctthis.messageConvertersProvider%20%3D%20messageConvertersProvider%3B%5Cn%5Ct%5Ct%5Ctthis.resourceHandlerRegistrationCustomizer%20%3D%20resourceHandlerRegistrationCustomizerProvider.getIfAvailable()%3B%5Cn%5Ct%5Ct%5Ctthis.dispatcherServletPath%20%3D%20dispatcherServletPath%3B%5Cn%5Ct%5Ct%5Ctthis.servletRegistrations%20%3D%20servletRegistrations%3B%5Cn%5Ct%5Ct%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22XZbzU%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_code">
<pre>  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">有参构造器所有参数的值都会从容器中确定
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ResourceProperties resourceProperties；获取和spring.resources绑定的所有的值的对象
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">WebMvcProperties mvcProperties 获取和spring.mvc绑定的所有的值的对象
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ListableBeanFactory beanFactory Spring的beanFactory
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">HttpMessageConverters 找到所有的HttpMessageConverters
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ResourceHandlerRegistrationCustomizer 找到 资源处理器的自定义器。=========
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">DispatcherServletPath  
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ServletRegistrationBean   给应用注册Servlet、Filter....</span>
    <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> WebMvcAutoConfigurationAdapter(ResourceProperties resourceProperties, WebMvcProperties mvcProperties,
                ListableBeanFactory beanFactory, ObjectProvider</span>&lt;HttpMessageConverters&gt;<span style="color: rgba(0, 0, 0, 1)"> messageConvertersProvider,
                ObjectProvider</span>&lt;ResourceHandlerRegistrationCustomizer&gt;<span style="color: rgba(0, 0, 0, 1)"> resourceHandlerRegistrationCustomizerProvider,
                ObjectProvider</span>&lt;DispatcherServletPath&gt;<span style="color: rgba(0, 0, 0, 1)"> dispatcherServletPath,
                ObjectProvider</span>&lt;ServletRegistrationBean&lt;?&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> servletRegistrations) {
            </span><span style="color: rgba(0, 0, 255, 1)">this</span>.resourceProperties =<span style="color: rgba(0, 0, 0, 1)"> resourceProperties;
            </span><span style="color: rgba(0, 0, 255, 1)">this</span>.mvcProperties =<span style="color: rgba(0, 0, 0, 1)"> mvcProperties;
            </span><span style="color: rgba(0, 0, 255, 1)">this</span>.beanFactory =<span style="color: rgba(0, 0, 0, 1)"> beanFactory;
            </span><span style="color: rgba(0, 0, 255, 1)">this</span>.messageConvertersProvider =<span style="color: rgba(0, 0, 0, 1)"> messageConvertersProvider;
            </span><span style="color: rgba(0, 0, 255, 1)">this</span>.resourceHandlerRegistrationCustomizer =<span style="color: rgba(0, 0, 0, 1)"> resourceHandlerRegistrationCustomizerProvider.getIfAvailable();
            </span><span style="color: rgba(0, 0, 255, 1)">this</span>.dispatcherServletPath =<span style="color: rgba(0, 0, 0, 1)"> dispatcherServletPath;
            </span><span style="color: rgba(0, 0, 255, 1)">this</span>.servletRegistrations =<span style="color: rgba(0, 0, 0, 1)"> servletRegistrations;
        }</span></pre>
</div>
</div>
</div>
</div>
<p id="OMzHL" data-lake-id="02b46dc6309934fe08c8466e3a076de6" data-wording="true"><strong>2、资源处理的默认规则</strong></p>
<div id="L01V5" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%40Override%5Cn%5Ct%5Ctpublic%20void%20addResourceHandlers(ResourceHandlerRegistry%20registry)%20%7B%5Cn%5Ct%5Ct%5Ctif%20(!this.resourceProperties.isAddMappings())%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctlogger.debug(%5C%22Default%20resource%20handling%20disabled%5C%22)%3B%5Cn%5Ct%5Ct%5Ct%5Ctreturn%3B%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5CtDuration%20cachePeriod%20%3D%20this.resourceProperties.getCache().getPeriod()%3B%5Cn%5Ct%5Ct%5CtCacheControl%20cacheControl%20%3D%20this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl()%3B%5Cn%5Ct%5Ct%5Ct%2F%2Fwebjars%E7%9A%84%E8%A7%84%E5%88%99%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(!registry.hasMappingForPattern(%5C%22%2Fwebjars%2F**%5C%22))%20%7B%5Cn%5Ct%5Ct%5Ct%5CtcustomizeResourceHandlerRegistration(registry.addResourceHandler(%5C%22%2Fwebjars%2F**%5C%22)%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct.addResourceLocations(%5C%22classpath%3A%2FMETA-INF%2Fresources%2Fwebjars%2F%5C%22)%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct.setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl))%3B%5Cn%5Ct%5Ct%5Ct%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%5Cn%5Ct%5Ct%5CtString%20staticPathPattern%20%3D%20this.mvcProperties.getStaticPathPattern()%3B%5Cn%5Ct%5Ct%5Ctif%20(!registry.hasMappingForPattern(staticPathPattern))%20%7B%5Cn%5Ct%5Ct%5Ct%5CtcustomizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct.addResourceLocations(getResourceLocations(this.resourceProperties.getStaticLocations()))%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct.setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl))%3B%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22L01V5%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">@Override
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> addResourceHandlers(ResourceHandlerRegistry registry) {
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.resourceProperties.isAddMappings()) {
                logger.debug(</span>"Default resource handling disabled"<span style="color: rgba(0, 0, 0, 1)">);
                </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">;
            }
            Duration cachePeriod </span>= <span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.resourceProperties.getCache().getPeriod();
            CacheControl cacheControl </span>= <span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">webjars的规则</span>
            <span style="color: rgba(0, 0, 255, 1)">if</span> (!registry.hasMappingForPattern("/webjars/**"<span style="color: rgba(0, 0, 0, 1)">)) {
                customizeResourceHandlerRegistration(registry.addResourceHandler(</span>"/webjars/**"<span style="color: rgba(0, 0, 0, 1)">)
                        .addResourceLocations(</span>"classpath:/META-INF/resources/webjars/"<span style="color: rgba(0, 0, 0, 1)">)
                        .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));
            }
            
            </span><span style="color: rgba(0, 128, 0, 1)">//
</span>            String staticPathPattern = <span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.mvcProperties.getStaticPathPattern();
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">registry.hasMappingForPattern(staticPathPattern)) {
                customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)
                        .addResourceLocations(getResourceLocations(</span><span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.resourceProperties.getStaticLocations()))
                        .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));
            }
        }
spring:
#  mvc:
#    </span><span style="color: rgba(0, 0, 255, 1)">static</span>-path-pattern: /res<span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">

  resources:
    add-mappings: false   禁用所有静态资源规则
@ConfigurationProperties(prefix = "spring.resources", ignoreUnknownFields = false)
public class ResourceProperties {

    private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { "classpath:/META-INF/resources/",
            "classpath:/resources/", "classpath:/static/", "classpath:/public/" };

    /**
     * Locations of static resources. Defaults to classpath:[/META-INF/resources/,
     * /resources/, /static/, /public/].
     </span><span style="color: rgba(0, 128, 0, 1)">*/</span>
    <span style="color: rgba(0, 0, 255, 1)">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;</pre>
</div>
</div>
</div>
</div>
<p id="KCCtT" data-lake-id="e4fd7fac518f83d671f7811781426720" data-wording="true"><strong>3、欢迎页的处理规则</strong></p>
<div id="NKcHG" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%5CtHandlerMapping%EF%BC%9A%E5%A4%84%E7%90%86%E5%99%A8%E6%98%A0%E5%B0%84%E3%80%82%E4%BF%9D%E5%AD%98%E4%BA%86%E6%AF%8F%E4%B8%80%E4%B8%AAHandler%E8%83%BD%E5%A4%84%E7%90%86%E5%93%AA%E4%BA%9B%E8%AF%B7%E6%B1%82%E3%80%82%5Ct%5Cn%5Cn%5Ct%40Bean%5Cn%5Ct%5Ctpublic%20WelcomePageHandlerMapping%20welcomePageHandlerMapping(ApplicationContext%20applicationContext%2C%5Cn%5Ct%5Ct%5Ct%5CtFormattingConversionService%20mvcConversionService%2C%20ResourceUrlProvider%20mvcResourceUrlProvider)%20%7B%5Cn%5Ct%5Ct%5CtWelcomePageHandlerMapping%20welcomePageHandlerMapping%20%3D%20new%20WelcomePageHandlerMapping(%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctnew%20TemplateAvailabilityProviders(applicationContext)%2C%20applicationContext%2C%20getWelcomePage()%2C%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctthis.mvcProperties.getStaticPathPattern())%3B%5Cn%5Ct%5Ct%5CtwelcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService%2C%20mvcResourceUrlProvider))%3B%5Cn%5Ct%5Ct%5CtwelcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations())%3B%5Cn%5Ct%5Ct%5Ctreturn%20welcomePageHandlerMapping%3B%5Cn%5Ct%5Ct%7D%5Cn%5Cn%5CtWelcomePageHandlerMapping(TemplateAvailabilityProviders%20templateAvailabilityProviders%2C%5Cn%5Ct%5Ct%5CtApplicationContext%20applicationContext%2C%20Optional%3CResource%3E%20welcomePage%2C%20String%20staticPathPattern)%20%7B%5Cn%5Ct%5Ctif%20(welcomePage.isPresent()%20%26%26%20%5C%22%2F**%5C%22.equals(staticPathPattern))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E8%A6%81%E7%94%A8%E6%AC%A2%E8%BF%8E%E9%A1%B5%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%BF%85%E9%A1%BB%E6%98%AF%2F**%5Cn%5Ct%5Ct%5Ctlogger.info(%5C%22Adding%20welcome%20page%3A%20%5C%22%20%2B%20welcomePage.get())%3B%5Cn%5Ct%5Ct%5CtsetRootViewName(%5C%22forward%3Aindex.html%5C%22)%3B%5Cn%5Ct%5Ct%7D%5Cn%5Ct%5Ctelse%20if%20(welcomeTemplateExists(templateAvailabilityProviders%2C%20applicationContext))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%B0%83%E7%94%A8Controller%20%20%2Findex%5Cn%5Ct%5Ct%5Ctlogger.info(%5C%22Adding%20welcome%20page%20template%3A%20index%5C%22)%3B%5Cn%5Ct%5Ct%5CtsetRootViewName(%5C%22index%5C%22)%3B%5Cn%5Ct%5Ct%7D%5Cn%5Ct%7D%5Cn%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22NKcHG%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">    HandlerMapping：处理器映射。保存了每一个Handler能处理哪些请求。  

    @Bean
        </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> WelcomePageHandlerMapping welcomePageHandlerMapping(ApplicationContext applicationContext,
                FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider) {
            WelcomePageHandlerMapping welcomePageHandlerMapping </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> WelcomePageHandlerMapping(
                    </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(),
                    </span><span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.mvcProperties.getStaticPathPattern());
            welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));
            welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations());
            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> welcomePageHandlerMapping;
        }

    WelcomePageHandlerMapping(TemplateAvailabilityProviders templateAvailabilityProviders,
            ApplicationContext applicationContext, Optional</span>&lt;Resource&gt;<span style="color: rgba(0, 0, 0, 1)"> welcomePage, String staticPathPattern) {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (welcomePage.isPresent() &amp;&amp; "/**"<span style="color: rgba(0, 0, 0, 1)">.equals(staticPathPattern)) {
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">要用欢迎页功能，必须是/**</span>
            logger.info("Adding welcome page: " +<span style="color: rgba(0, 0, 0, 1)"> welcomePage.get());
            setRootViewName(</span>"forward:index.html"<span style="color: rgba(0, 0, 0, 1)">);
        }
        </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (welcomeTemplateExists(templateAvailabilityProviders, applicationContext)) {
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 调用Controller  /index</span>
            logger.info("Adding welcome page template: index"<span style="color: rgba(0, 0, 0, 1)">);
            setRootViewName(</span>"index"<span style="color: rgba(0, 0, 0, 1)">);
        }
    }</span></pre>
</div>
</div>
</div>
</div>
<h4 id="vK4iZ" data-lake-id="15e4422829cc8de922d6641b59ed2529" data-wording="true">4、favicon</h4>
<h3 id="yHWxm" data-lake-id="75b4fd289646bb495ddb55924bc7f8c8" data-wording="true">3、请求参数处理</h3>
<h4 id="IZa8z" data-lake-id="edd7d694464a610516abe595d11c67f1" data-wording="true">3.1、请求映射</h4>
<blockquote>
<p id="8qSTg" data-lake-id="91ba97d9c651cd773e5ec79282611f4f" data-wording="true">3.1.1、rest使用与原理</p>
</blockquote>
<ul data-lake-id="87d61a5c8824b058cfbd1bbed04542cc">
<li data-lake-id="2b7bb3a9becfd31604c67f88587d35c0" data-wording="true">@xxxMapping；</li>
<li data-lake-id="cadfcfcd494792d7eb3d84984c29e818" data-wording="true">Rest风格支持（<em>使用</em><em>HTTP</em><em>请求方式动词来表示对资源的操作</em>）</li>
</ul>
<ul data-lake-id="1c5cbd7223bce31934831d22809a6d4d">
<ul data-lake-id="a62e7c37a168fee6904cb0f9b455974e">
<li data-lake-id="70b0d118c5136b748ff4130f2d8f19c7" data-wording="true"><em>以前：</em><em>/getUser &nbsp; </em><em>获取用户</em><em> &nbsp; &nbsp; /deleteUser </em><em>删除用户</em><em> &nbsp; &nbsp;/editUser &nbsp;</em><em>修改用户</em><em> &nbsp; &nbsp; &nbsp; /saveUser </em><em>保存用户</em></li>
<li data-lake-id="469bb05d0eed33b42abdfa3dc663a079" data-wording="true"><em>现在： /user &nbsp; &nbsp;</em><em>GET-</em><em>获取用户 &nbsp; &nbsp;</em><em>DELETE-</em><em>删除用户 &nbsp; &nbsp; </em><em>PUT-</em><em>修改用户 &nbsp; &nbsp; &nbsp;</em><em>POST-</em><em>保存用户</em></li>
<li data-lake-id="0645bfb4c00bba9ec2c4ef1f8656d4ce" data-wording="true">核心Filter；HiddenHttpMethodFilter</li>
</ul>
</ul>
<ul data-lake-id="4c3bc612a626008f777fa617ac56c1a1">
<ul data-lake-id="94f5fa4e3b93922b81261a084d788c19">
<ul data-lake-id="30faddb34b42edda0617a7069667ec79">
<li data-lake-id="abc7a292e2fceea16936463cfed80e31" data-wording="true">用法： 表单method=post，隐藏域 _method=put</li>
<li data-lake-id="132f681f705235b0c9f56d98ea26b472" data-wording="true">SpringBoot中手动开启</li>
</ul>
</ul>
</ul>
<ul data-lake-id="d0ee698742cd5c5edd670b3eebbd46c7">
<ul data-lake-id="657ef3ed6d915487077783283f3e5fdb">
<li data-lake-id="8ce60b6faf16b3867df9331f4de060fa" data-wording="true">扩展：如何把_method 这个名字换成我们自己喜欢的。</li>
</ul>
<li><strong><span style="background-color: rgba(255, 255, 0, 1)">开启页面表单的rest</span></strong></li>
</ul>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">spring:
  mvc:
    hiddenmethod:
      filter:
        enabled: true   #开启页面表单的Rest功能</pre>
</div>
<p><strong><span style="background-color: rgba(255, 255, 0, 1)">Controller请求：</span></strong></p>
<div id="m2FqP" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%20%20%20%20%40RequestMapping(value%20%3D%20%5C%22%2Fuser%5C%22%2Cmethod%20%3D%20RequestMethod.GET)%5Cn%20%20%20%20public%20String%20getUser()%7B%5Cn%20%20%20%20%20%20%20%20return%20%5C%22GET-%E5%BC%A0%E4%B8%89%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%40RequestMapping(value%20%3D%20%5C%22%2Fuser%5C%22%2Cmethod%20%3D%20RequestMethod.POST)%5Cn%20%20%20%20public%20String%20saveUser()%7B%5Cn%20%20%20%20%20%20%20%20return%20%5C%22POST-%E5%BC%A0%E4%B8%89%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%5Cn%20%20%20%20%40RequestMapping(value%20%3D%20%5C%22%2Fuser%5C%22%2Cmethod%20%3D%20RequestMethod.PUT)%5Cn%20%20%20%20public%20String%20putUser()%7B%5Cn%20%20%20%20%20%20%20%20return%20%5C%22PUT-%E5%BC%A0%E4%B8%89%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%40RequestMapping(value%20%3D%20%5C%22%2Fuser%5C%22%2Cmethod%20%3D%20RequestMethod.DELETE)%5Cn%20%20%20%20public%20String%20deleteUser()%7B%5Cn%20%20%20%20%20%20%20%20return%20%5C%22DELETE-%E5%BC%A0%E4%B8%89%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%5Cn%5Ct%40Bean%5Cn%5Ct%40ConditionalOnMissingBean(HiddenHttpMethodFilter.class)%5Cn%5Ct%40ConditionalOnProperty(prefix%20%3D%20%5C%22spring.mvc.hiddenmethod.filter%5C%22%2C%20name%20%3D%20%5C%22enabled%5C%22%2C%20matchIfMissing%20%3D%20false)%5Cn%5Ctpublic%20OrderedHiddenHttpMethodFilter%20hiddenHttpMethodFilter()%20%7B%5Cn%5Ct%5Ctreturn%20new%20OrderedHiddenHttpMethodFilter()%3B%5Cn%5Ct%7D%5Cn%5Cn%5Cn%2F%2F%E8%87%AA%E5%AE%9A%E4%B9%89filter%5Cn%20%20%20%20%40Bean%5Cn%20%20%20%20public%20HiddenHttpMethodFilter%20hiddenHttpMethodFilter()%7B%5Cn%20%20%20%20%20%20%20%20HiddenHttpMethodFilter%20methodFilter%20%3D%20new%20HiddenHttpMethodFilter()%3B%5Cn%20%20%20%20%20%20%20%20methodFilter.setMethodParam(%5C%22_m%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20return%20methodFilter%3B%5Cn%20%20%20%20%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22m2FqP%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:false;"> @RequestMapping(value = "/user",method = RequestMethod.GET)
    public String getUser(){
        return "GET-张三";
    }

    @RequestMapping(value = "/user",method = RequestMethod.POST)
    public String saveUser(){
        return "POST-张三";
    }


    @RequestMapping(value = "/user",method = RequestMethod.PUT)
    public String putUser(){
        return "PUT-张三";
    }

    @RequestMapping(value = "/user",method = RequestMethod.DELETE)
    public String deleteUser(){
        return "DELETE-张三";
    }


    @Bean
    @ConditionalOnMissingBean(HiddenHttpMethodFilter.class)
    @ConditionalOnProperty(prefix = "spring.mvc.hiddenmethod.filter", name = "enabled", matchIfMissing = false)
    public OrderedHiddenHttpMethodFilter hiddenHttpMethodFilter() {
        return new OrderedHiddenHttpMethodFilter();
    }


//自定义filter
    @Bean
    public HiddenHttpMethodFilter hiddenHttpMethodFilter(){
        HiddenHttpMethodFilter methodFilter = new HiddenHttpMethodFilter();
        methodFilter.setMethodParam("_m");
        return methodFilter;
    }
</pre>
</div>
<p data-lake-id="d8f61d7f0bb63414966b41f012064b89" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)"><strong>表单提交</strong></span>：使用隐藏域进行提交请求类型(表单的提交方式要得是post)</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">form </span><span style="color: rgba(255, 0, 0, 1)">action</span><span style="color: rgba(0, 0, 255, 1)">="/user"</span><span style="color: rgba(255, 0, 0, 1)"> method</span><span style="color: rgba(0, 0, 255, 1)">="get"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="submit"</span><span style="color: rgba(255, 0, 0, 1)"> value</span><span style="color: rgba(0, 0, 255, 1)">="get提交"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">form</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

<span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">form </span><span style="color: rgba(255, 0, 0, 1)">action</span><span style="color: rgba(0, 0, 255, 1)">="/user"</span><span style="color: rgba(255, 0, 0, 1)"> method</span><span style="color: rgba(0, 0, 255, 1)">="post"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="submit"</span><span style="color: rgba(255, 0, 0, 1)"> value</span><span style="color: rgba(0, 0, 255, 1)">="post提交"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">form</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

<span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">form </span><span style="color: rgba(255, 0, 0, 1)">action</span><span style="color: rgba(0, 0, 255, 1)">="/user"</span><span style="color: rgba(255, 0, 0, 1)"> method</span><span style="color: rgba(0, 0, 255, 1)">="post"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="submit"</span><span style="color: rgba(255, 0, 0, 1)"> value</span><span style="color: rgba(0, 0, 255, 1)">="delete提交"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">使用隐藏域提交请求</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">name</span><span style="color: rgba(0, 0, 255, 1)">="_method"</span><span style="color: rgba(255, 0, 0, 1)"> type</span><span style="color: rgba(0, 0, 255, 1)">="hidden"</span><span style="color: rgba(255, 0, 0, 1)"> value</span><span style="color: rgba(0, 0, 255, 1)">="delete"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">form</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

<span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">form </span><span style="color: rgba(255, 0, 0, 1)">action</span><span style="color: rgba(0, 0, 255, 1)">="/user"</span><span style="color: rgba(255, 0, 0, 1)"> method</span><span style="color: rgba(0, 0, 255, 1)">="post"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="submit"</span><span style="color: rgba(255, 0, 0, 1)"> value</span><span style="color: rgba(0, 0, 255, 1)">="put提交"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">使用隐藏域提交请求</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">name</span><span style="color: rgba(0, 0, 255, 1)">="_method"</span><span style="color: rgba(255, 0, 0, 1)"> type</span><span style="color: rgba(0, 0, 255, 1)">="hidden"</span><span style="color: rgba(255, 0, 0, 1)"> value</span><span style="color: rgba(0, 0, 255, 1)">="put"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">form</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<p data-lake-id="d8f61d7f0bb63414966b41f012064b89" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)"><strong>测试：</strong></span></p>
<p data-lake-id="d8f61d7f0bb63414966b41f012064b89" data-wording="true"><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328004117230-896594954.gif" alt="" loading="lazy"></p>
<p data-lake-id="d8f61d7f0bb63414966b41f012064b89" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)"><strong>Rest原理</strong></span>（表单提交要使用REST的时候）</p>
<ul data-lake-id="bc9a146b884c2634731e02be36b88f0a">
<li data-lake-id="86e12bd7ba9344d866557e2d2eedde5c" data-wording="true">表单提交会带上<strong>_method=PUT</strong></li>
<li data-lake-id="aeba8ee16350e94421b69f335064ed42" data-wording="true"><strong>请求过来被</strong>HiddenHttpMethodFilter拦截</li>
</ul>
<ul data-lake-id="3973042346376615aac38c4a0c2b82bc">
<ul data-lake-id="634c21551e27baf89b046e75709bbeb1">
<li data-lake-id="46e07317935c2e7928c0c1fc93a920de" data-wording="true">请求是否正常，并且是POST</li>
</ul>
</ul>
<ul data-lake-id="2d98a0369b3e346922e31d87bef0e8b0">
<ul data-lake-id="4808b8538461b1f01665b435936f12fe">
<ul data-lake-id="f2747c5e84daffc0a23e22380563cc50">
<li data-lake-id="376bc47f7a3de97004b2c9feea24a9a3" data-wording="true">获取到<strong>_method</strong>的值。</li>
<li data-lake-id="265fd0f5d01dcff23d21631b832ed670" data-wording="true">兼容以下请求；<strong>PUT</strong>.<strong>DELETE</strong>.<strong>PATCH</strong></li>
<li data-lake-id="e44e2674762902eee6917009af5c8c8f" data-wording="true"><strong>原生request（post），包装模式requesWrapper重写了getMethod方法，返回的是传入的值。</strong></li>
<li data-lake-id="5e390359c4a5d8e047f9f5ca5db58458" data-wording="true"><strong>过滤器链放行的时候用wrapper。以后的方法调用getMethod是调用</strong><strong>requesWrapper的。</strong></li>
</ul>
</ul>
</ul>
</div>
</div>
</div>
<h4 id="xNDeL" data-lake-id="3ab2a7bac98a659227e9370848d96fe8" data-wording="true">3.2、普通参数与基本注解</h4>
<blockquote>
<p>3.2.1、注解</p>
</blockquote>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">@PathVariable：restful风格的注解</p>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">@RequestHeader：获取请求头的值，可以获取所有的请求头的值、</p>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">@CookieValue：获取请求cookie的值</p>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">@RequestBody：获取请求体的值（POST请求才有请求体）</p>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">@RequestParam：获取请求参数的值</p>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">　　先来在html页面写一个请求，用户测试获取到请求的值等信息~</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">&lt;a href="/car/2/owner/zhangsan"&gt;跳转请求&lt;/a&gt;
</pre>
</div>
<p>　　<span style="background-color: rgba(255, 255, 0, 1)"><strong>controller代码：</strong></span></p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_dc714cd7-40c1-4712-9e6e-409004681aa2" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_dc714cd7-40c1-4712-9e6e-409004681aa2" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_dc714cd7-40c1-4712-9e6e-409004681aa2" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 0, 1)">@RestController
public class MyRequestController {
    @GetMapping("/car/{id}/owner/{username}")
    public Map</span><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">String</span><span style="color: rgba(255, 0, 0, 1)">, Object</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span><span style="color: rgba(0, 0, 0, 1)"> getCar(
            // 获取RestFull请求指定参数的值
            @PathVariable("id") Integer id,
            @PathVariable("username") String name,
            // 获取RestFull请求所有参数的值
            @PathVariable Map</span><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">String</span><span style="color: rgba(255, 0, 0, 1)">, String</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span><span style="color: rgba(0, 0, 0, 1)"> pv,
            // 获取指定名称请求的值
            @RequestHeader("User-Agent") String userAgent,
            // 获取所有的请求参数
            @RequestHeader Map</span><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">String</span><span style="color: rgba(255, 0, 0, 1)">, String</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span><span style="color: rgba(0, 0, 0, 1)"> header,
            /*获取请求参数中指定参数的值：?age=18
            @RequestParam("age") Integer age*/
            // 获取到的是请求cookie的值(指定cookie的名称即可获取到)
            @CookieValue("__utma") String cookie,
            @CookieValue("__utma") Cookie cookies
    ) {
        Map</span><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">String</span><span style="color: rgba(255, 0, 0, 1)">, Object</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span> map = new HashMap<span style="color: rgba(0, 0, 255, 1)">&lt;&gt;</span><span style="color: rgba(0, 0, 0, 1)">();
        map.put("id", id);
        map.put("username", name);
        map.put("pv", pv);
        map.put("userAgent", userAgent);
        map.put("header", header);
        map.put("__utma", cookie);
        System.out.println("=============" + cookies);
        return map;
    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328163536415-1805603682.png" alt="" loading="lazy"></p>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">@ModelAttribute：</p>
<p data-lake-id="5d92dc1fb069c8169ad1a1bbc77684a9" data-wording="true">@MatrixVariable：矩阵变量</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">================conroller=======================
//1、语法： 请求路径：/cars/sell;low=34;brand=byd,audi,yd
//2、SpringBoot默认是禁用了矩阵变量的功能
//      手动开启：原理。对于路径的处理。UrlPathHelper进行解析。
//              removeSemicolonContent（移除分号内容）支持矩阵变量的
//3、矩阵变量必须有url路径变量才能被解析
@GetMapping("/cars/{path}")
public Map carsSell(@MatrixVariable("low") Integer low,
                    @MatrixVariable("brand") List&lt;String&gt; brand,
                    @PathVariable("path") String path) {
    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(16);
    map.put("low", low);
    map.put("brand", brand);
    map.put("path", path);
    return map;
}

=============config/配置请求路径变量=======================
@Configuration
public class MyWebConfig {
    /**
     * 配置路径变量
     */
    @Bean
    public WebMvcConfigurer webMvcConfigurer() {
        return new WebMvcConfigurer() {
            @Override
            public void configurePathMatch(PathMatchConfigurer configurer) {
                UrlPathHelper urlPathHelper = new UrlPathHelper();
                // 设置是否为“;” （分号）内容应从请求URI中删除。
                //默认值为“ true”
                urlPathHelper.setRemoveSemicolonContent(false);
                configurer.setUrlPathHelper(urlPathHelper);
            }
        };
    }
}
</pre>
</div>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328170138711-1671035943.png" alt="" loading="lazy"></p>
<blockquote>
<p>3.2.2、复杂参数&nbsp;</p>
</blockquote>
<p>视频链接：<a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=34">https://www.bilibili.com/video/BV19K4y1L7MT?p=34</a></p>
<p><strong>Map</strong>、<strong>Model（map、model里面的数据会被放在request的请求域 &nbsp;request.setAttribute）、</strong></p>
<p>Errors/BindingResult、<strong>RedirectAttributes（ 重定向携带数据）</strong>、<strong>ServletResponse（response）</strong>、SessionStatus、UriComponentsBuilder、ServletUriComponentsBuilder</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">Map&lt;String,Object&gt; map,  Model model, HttpServletRequest request 都是可以给request域中放数据，
request.getAttribute();
</pre>
</div>
<p data-lake-id="89d6a1df587bcadab3c48098f2fd001a" data-wording="true"><strong>Map、Model类型的参数</strong>，会返回 mavContainer.getModel（）；---&gt; BindingAwareModelMap 是Model 也是Map</p>
<p data-lake-id="f3fc32f770c222cf8ba2af550499b66a" data-wording="true"><strong>mavContainer</strong>.getModel(); 获取到值的</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328224516345-672331437.png" alt="" loading="lazy"></p>
<p>&nbsp;<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328224525112-494112126.png" alt="" loading="lazy"></p>
<p>&nbsp;<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328224535281-1206405497.png" alt="" loading="lazy"></p>
<blockquote>
<p>&nbsp;3.2.3、自定义对象参数&nbsp;</p>
</blockquote>
<p>可以自动类型转换与格式化，可以级联封装。</p>
<p>　　我们通过表单提交数据，通常都是下面这一种：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328235318003-1562521007.png" alt="" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210328235250667-1104421943.png" alt="" loading="lazy"></p>
<p>　　如果公司业务发生改变，直接通过,分割属性，又该怎么操作呢？我们需要告诉框架这种规则：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210329000810047-1082920707.png" alt="" loading="lazy"></p>
<p>&nbsp;<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210329000516163-1610587095.png" alt="" loading="lazy"></p>
<p>　　需要在配置文件中指定将什么数据类型的数据转为什么数据类型：按照什么进行分割数据：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * 配置路径变量
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@Bean
</span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> WebMvcConfigurer webMvcConfigurer() {
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> WebMvcConfigurer() {
        @Override
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> configurePathMatch(PathMatchConfigurer configurer) {
            UrlPathHelper urlPathHelper </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> UrlPathHelper();
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 设置是否为“;” （分号）内容应从请求URI中删除。
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">默认值为“ true”</span>
            urlPathHelper.setRemoveSemicolonContent(<span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">);
            configurer.setUrlPathHelper(urlPathHelper);
        }
        @Override
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"><strong><span style="background-color: rgba(255, 255, 0, 1)"> addFormatters</span></strong>(FormatterRegistry registry) {
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">/ 将表单提交的类型转为指定的类型</span>
            registry.addConverter(<span style="color: rgba(0, 0, 255, 1)">new</span> Converter&lt;String, Pet&gt;<span style="color: rgba(0, 0, 0, 1)">() {
                </span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
                 *
                 * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> source 提交的是前端页面传过来的值
                 * </span><span style="color: rgba(128, 128, 128, 1)">@return</span>
                 <span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
                @Override
                </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> Pet convert(String source) {
                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">source.isEmpty()) {
                        Pet pet </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Pet();
                        String[] split </span>= source.split(","<span style="color: rgba(0, 0, 0, 1)">);
                        pet.setName(split[</span>0<span style="color: rgba(0, 0, 0, 1)">]);
                        pet.setAge(split[</span>1<span style="color: rgba(0, 0, 0, 1)">]);
                        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> pet;
                    }
                    </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">;
                }
            });
        }
    };
}</span></pre>
</div>
<p>表单提交数据，就可以看到数据提交成功：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210329000842117-1083014643.png" alt="" loading="lazy"></p>
<h3>4、视图解析与模板引擎</h3>
<p>视图解析：<strong>SpringBoot默认不支持 JSP，需要引入第三方模板引擎技术实现页面渲染。</strong></p>
<h4>4.1、视图解析</h4>
<h4 id="E21jG" data-lake-id="5d22e40c8aef5896e5e0e3f559068d22" data-wording="true">4.2、模板引擎-Thymeleaf</h4>
<blockquote>
<p id="Ci7un" data-lake-id="5522e5acd0e039bfa8e355da4db35074" data-wording="true">4.2.1、thymeleaf简介</p>
</blockquote>
<p data-lake-id="6f596d68b00dd0e72afd10c0c75c476b" data-wording="true">Thymeleaf is a modern server-side Java template engine for both web and standalone environments, capable of processing HTML, XML, JavaScript, CSS and even plain text.</p>
<p data-lake-id="8f8d1f3b1fced97d8e548d045dda3c50" data-wording="true"><strong>现代化、服务端Java模板引擎</strong></p>
<blockquote>
<p data-lake-id="8f8d1f3b1fced97d8e548d045dda3c50" data-wording="true">4.2.2、基本语法</p>
</blockquote>
<p data-lake-id="8f8d1f3b1fced97d8e548d045dda3c50" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">1、表达式</span></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210329151334854-137473684.png" alt="" loading="lazy"></p>
<p id="5cYWw" data-lake-id="a622cc295a10c33b14d52a5724cf19c1" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">2、字面量</span></p>
<p data-lake-id="9696c4edd4bc667e5864623e1fe59a43" data-wording="true">文本值: <strong>'one text' </strong><strong>, </strong><strong>'Another one!' </strong><strong>,…</strong>数字: <strong>0 </strong><strong>, </strong><strong>34 </strong><strong>, </strong><strong>3.0 </strong><strong>, </strong><strong>12.3 </strong><strong>,…</strong>布尔值: <strong>true </strong><strong>, </strong><strong>false</strong></p>
<p data-lake-id="7617fb9b3918d9c7a6b4a739ee1fd4ef" data-wording="true">空值: <strong>null</strong></p>
<p data-lake-id="1b6049fbeaa2026cade06b03cae26841" data-wording="true">变量： one，two，.... 变量不能有空格</p>
<p id="BR2r3" data-lake-id="f12ab59ba69b43813dbfd5846971ab24" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">3、文本操作</span></p>
<p data-lake-id="f14c93629f6187e441ab93be230cad5f" data-wording="true">字符串拼接: <strong>+</strong></p>
<p data-lake-id="e3881c0110a82f3e0039508c126f6ff9" data-wording="true">变量替换: <strong>|The name is ${name}|</strong></p>
<p id="XhEzE" data-lake-id="9d8ca100141010a9496e0f9d4af1a9ea" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">4、数学运算</span></p>
<p data-lake-id="c13f1b6010b44673953a9d4c490603b5" data-wording="true">运算符: + , - , * , / , %</p>
<p id="xLJEZ" data-lake-id="a748b3e4a742220d4aea248ccb6d61f8" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">5、布尔运算</span></p>
<p data-lake-id="abc7ef221c4558655920273b488aea03" data-wording="true">运算符: &nbsp;<strong>and </strong><strong>, </strong><strong>or</strong></p>
<p data-lake-id="c03994b5166a045f629a93a176197e6b" data-wording="true">一元运算: <strong>! </strong><strong>, </strong><strong>not</strong></p>
<p id="2wUA2" data-lake-id="d7330240f2d901951b9ed126c27a26f3" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">6、比较运算</span></p>
<p data-lake-id="0f4517930aa2f092b0c4017b17cf3a41" data-wording="true">比较: <strong>&gt; </strong><strong>, </strong><strong>&lt; </strong><strong>, </strong><strong>&gt;= </strong><strong>, </strong><strong>&lt;= </strong><strong>( </strong><strong>gt </strong><strong>, </strong><strong>lt </strong><strong>, </strong><strong>ge </strong><strong>, </strong><strong>le </strong><strong>)</strong>等式: <strong>== </strong><strong>, </strong><strong>!= </strong><strong>( </strong><strong>eq </strong><strong>, </strong><strong>ne </strong><strong>)</strong></p>
<p id="s6avh" data-lake-id="eb6b8f3d3ddb275e5a0ce7a259a22c2f" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">7、条件运算</span></p>
<p data-lake-id="1352d8b12e9c0512699547bd63b6ade9" data-wording="true">If-then: <strong>(if) ? (then)</strong></p>
<p data-lake-id="125b94e84b22a4d7ffa91666c0f5a3b4" data-wording="true">If-then-else: <strong>(if) ? (then) : (else)</strong></p>
<p data-lake-id="bd2dbba1a6c4b0c33fb186e52e948029" data-wording="true">Default: (value) <strong>?: (defaultvalue)</strong></p>
<p id="UO85W" data-lake-id="fe8a6ea3ee3ac6f9173e47750af1dd9f" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">8、特殊操作</span></p>
<p data-lake-id="6ebca5604f43c932bf4045417d2f6010" data-wording="true">无操作： _</p>
<h3>5、拦截器</h3>
<h4>5.1、配置拦截器</h4>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">1、编写一个拦截器实现HandlerInterceptor接口
2、拦截器注册到容器中（实现WebMvcConfigurer的addInterceptors）
3、指定拦截规则【如果是拦截所有，静态资源也会被拦截】
</pre>
</div>
<p>1、编写拦截器实现HandlerInterceptor接口:/interceptor/MyInterceptor</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_780799fd-0980-4e0e-9ac9-8d7b7c6f5fc4" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_780799fd-0980-4e0e-9ac9-8d7b7c6f5fc4" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_780799fd-0980-4e0e-9ac9-8d7b7c6f5fc4" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.interceptor;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.servlet.HandlerInterceptor;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.servlet.ModelAndView;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServletRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServletResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpSession;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
 * @date 2021/3/31 9:13
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> MyInterceptor <span style="color: rgba(0, 0, 255, 1)">implements</span><span style="color: rgba(0, 0, 0, 1)"> HandlerInterceptor {

    </span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
     * 拦截前
     *
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> request
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> response
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> handler
     * </span><span style="color: rgba(128, 128, 128, 1)">@return</span><span style="color: rgba(0, 128, 0, 1)">
     * </span><span style="color: rgba(128, 128, 128, 1)">@throws</span><span style="color: rgba(0, 128, 0, 1)"> Exception
     </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
    @Override
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">boolean</span> preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> Exception {
        String requestURI </span>=<span style="color: rgba(0, 0, 0, 1)"> request.getRequestURI();
        System.out.println(</span>"拦截的请求路径是：" +<span style="color: rgba(0, 0, 0, 1)"> requestURI);
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 执行拦截逻辑</span>
        HttpSession session =<span style="color: rgba(0, 0, 0, 1)"> request.getSession();
        Object user </span>= session.getAttribute("loginUser"<span style="color: rgba(0, 0, 0, 1)">);
        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (user != <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">) {
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 放行</span>
            <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">;
        }

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 错误消息</span>
        request.setAttribute("msg", "请先登录！"<span style="color: rgba(0, 0, 0, 1)">);
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 失败了转发到首页</span>
        request.getRequestDispatcher("/"<span style="color: rgba(0, 0, 0, 1)">).forward(request, response);
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 拦截请求</span>
        <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">;
    }

    </span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
     * 拦截后
     *
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> request
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> response
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> handler
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> modelAndView
     * </span><span style="color: rgba(128, 128, 128, 1)">@throws</span><span style="color: rgba(0, 128, 0, 1)"> Exception
     </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
    @Override
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span> postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> Exception {

    }

    </span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
     * 执行后
     *
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> request
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> response
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> handler
     * </span><span style="color: rgba(128, 128, 128, 1)">@param</span><span style="color: rgba(0, 128, 0, 1)"> ex
     * </span><span style="color: rgba(128, 128, 128, 1)">@throws</span><span style="color: rgba(0, 128, 0, 1)"> Exception
     </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
    @Override
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span> afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> Exception {

    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>2、将拦截器注册到容器中---指定拦截器规则</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_72576029-96c6-468a-a912-93ff60e00e31" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_72576029-96c6-468a-a912-93ff60e00e31" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_72576029-96c6-468a-a912-93ff60e00e31" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.config;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.interceptor.MyInterceptor;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.context.annotation.Configuration;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.servlet.config.annotation.InterceptorRegistry;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
 * @date 2021/3/31 9:19
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@Configuration
</span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> MyInterceptorConfig <span style="color: rgba(0, 0, 255, 1)">implements</span><span style="color: rgba(0, 0, 0, 1)"> WebMvcConfigurer {
    @Override
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(</span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> MyInterceptor())
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 拦截所有请求</span>
                .addPathPatterns("/**"<span style="color: rgba(0, 0, 0, 1)">)
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 放行哪些请求</span>
                .excludePathPatterns("/", "/login", "/js/*", "/images/*", "/css/*", "/fonts/**"<span style="color: rgba(0, 0, 0, 1)">);
    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h4>5.2、拦截器原理</h4>
<p data-lake-id="65aacb2b20922af0ad1f873f6d1193df" data-wording="true">1、根据当前请求，找到<strong>HandlerExecutionChain【</strong>可以处理请求的handler以及handler的所有 拦截器】</p>
<p data-lake-id="761500bbb6fccb5018186efab336adbf" data-wording="true">2、先来<strong>顺序执行 </strong>所有拦截器的 preHandle方法</p>
<ul data-lake-id="888607896cbd60638562d5ce7806d6f8">
<li data-lake-id="205d550792ef7c223278bc46be95fab6" data-wording="true">1、如果当前拦截器prehandler返回为true。则执行下一个拦截器的preHandle</li>
<li data-lake-id="f0fdac7a7ea72261d59aeadd1b83251a" data-wording="true">2、如果当前拦截器返回为false。直接 &nbsp; &nbsp;倒序执行所有已经执行了的拦截器的 &nbsp;afterCompletion；</li>
</ul>
<p data-lake-id="9a85fb65c663b4a098646856c90f9884" data-wording="true"><strong>3、如果任何一个拦截器返回false。直接跳出不执行目标方法</strong></p>
<p data-lake-id="7ccf52eed862df82a58135211a596fa1" data-wording="true"><strong>4、所有拦截器都返回True。执行目标方法</strong></p>
<p data-lake-id="739b247386323d6c03ca48d8fda1857b" data-wording="true"><strong>5、倒序执行所有拦截器的postHandle方法。</strong></p>
<p data-lake-id="8cbe1aed0ccb983233f501054de1da1d" data-wording="true"><strong>6、前面的步骤有任何异常都会直接倒序触发 </strong>afterCompletion</p>
<p data-lake-id="78bd1f29639d826d70220a1c3e140da5" data-wording="true">7、页面成功渲染完成以后，也会倒序触发 afterCompletion</p>
<h4><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331102104425-337715603.png" alt="" loading="lazy"></h4>
<h3>6、文件上传功能</h3>
<h4>6.1、文件上传代码</h4>
<p>1、前端表单：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">form </span><span style="color: rgba(255, 0, 0, 1)">role</span><span style="color: rgba(0, 0, 255, 1)">="form"</span><span style="color: rgba(255, 0, 0, 1)"> method</span><span style="color: rgba(0, 0, 255, 1)">="post"</span><span style="color: rgba(255, 0, 0, 1)"> th:action</span><span style="color: rgba(0, 0, 255, 1)">="<span style="background-color: rgba(255, 255, 0, 1)"><strong>@{/upload}</strong></span>"</span><span style="background-color: rgba(255, 255, 0, 1)"><strong><span style="color: rgba(255, 0, 0, 1)"> enctype</span></strong></span><span style="color: rgba(0, 0, 255, 1)"><span style="background-color: rgba(255, 255, 0, 1)"><strong>="multipart/form-data</strong></span>"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="form-group"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">label </span><span style="color: rgba(255, 0, 0, 1)">for</span><span style="color: rgba(0, 0, 255, 1)">="exampleInputEmail1"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>邮箱<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">label</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="email"</span><span style="color: rgba(255, 0, 0, 1)"> name</span><span style="color: rgba(0, 0, 255, 1)">="email"</span><span style="color: rgba(255, 0, 0, 1)"> class</span><span style="color: rgba(0, 0, 255, 1)">="form-control"</span><span style="color: rgba(255, 0, 0, 1)"> id</span><span style="color: rgba(0, 0, 255, 1)">="exampleInputEmail1"</span><span style="color: rgba(255, 0, 0, 1)">
               placeholder</span><span style="color: rgba(0, 0, 255, 1)">="Enter email"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="form-group"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">label </span><span style="color: rgba(255, 0, 0, 1)">for</span><span style="color: rgba(0, 0, 255, 1)">="exampleInputPassword1"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>用户名<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">label</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="text"</span><span style="color: rgba(255, 0, 0, 1)"> name</span><span style="color: rgba(0, 0, 255, 1)">="username"</span><span style="color: rgba(255, 0, 0, 1)"> class</span><span style="color: rgba(0, 0, 255, 1)">="form-control"</span><span style="color: rgba(255, 0, 0, 1)"> id</span><span style="color: rgba(0, 0, 255, 1)">="exampleInputPassword1"</span><span style="color: rgba(255, 0, 0, 1)">
               placeholder</span><span style="color: rgba(0, 0, 255, 1)">="Password"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">单文件上传</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="form-group"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">label </span><span style="color: rgba(255, 0, 0, 1)">for</span><span style="color: rgba(0, 0, 255, 1)">="exampleInputFile"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>头像<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">label</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">name</span><span style="color: rgba(0, 0, 255, 1)">="headImg"</span><span style="color: rgba(255, 0, 0, 1)"> type</span><span style="color: rgba(0, 0, 255, 1)">="file"</span><span style="color: rgba(255, 0, 0, 1)"> id</span><span style="color: rgba(0, 0, 255, 1)">="exampleInputFile"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">p </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="help-block"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>Example block-level help text here.<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">p</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">多文件上传</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="form-group"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">label </span><span style="color: rgba(255, 0, 0, 1)">for</span><span style="color: rgba(0, 0, 255, 1)">="exampleInputFile"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>生活照<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">label</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">name</span><span style="color: rgba(0, 0, 255, 1)">="photos"</span><span style="color: rgba(255, 0, 0, 1)"> type</span><span style="color: rgba(0, 0, 255, 1)">="file"</span><span style="color: rgba(255, 0, 0, 1)"> multiple</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">p </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="help-block"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>Example block-level help text here.<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">p</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="checkbox"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">label</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">input </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="checkbox"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span><span style="color: rgba(0, 0, 0, 1)"> Check me out
        </span><span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">label</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">button </span><span style="color: rgba(255, 0, 0, 1)">type</span><span style="color: rgba(0, 0, 255, 1)">="submit"</span><span style="color: rgba(255, 0, 0, 1)"> class</span><span style="color: rgba(0, 0, 255, 1)">="btn btn-primary"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>提交<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">button</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">form</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>2、controller层请求代码：设置时间戳防止文件名重复</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 128, 0, 1)"> * 文件上传请求
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 128, 0, 1)"> *
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span>  <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)"> 5</span> @PostMapping("/upload"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 255, 1)">public</span> String toUpLoad(@RequestParam("email"<span style="color: rgba(0, 0, 0, 1)">) String email,
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span>                        @RequestParam("username"<span style="color: rgba(0, 0, 0, 1)">) String username,
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span>                        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 单文件上传</span>
<span style="color: rgba(0, 128, 128, 1)"> 9</span>                        @RequestPart("headImg"<span style="color: rgba(0, 0, 0, 1)">) MultipartFile headImg,
</span><span style="color: rgba(0, 128, 128, 1)">10</span>                        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 多文件上传</span>
<span style="color: rgba(0, 128, 128, 1)">11</span>                        @RequestPart("photos") MultipartFile[] photos) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> IOException {
</span><span style="color: rgba(0, 128, 128, 1)">12</span>     System.out.println("email" +<span style="color: rgba(0, 0, 0, 1)"> email);
</span><span style="color: rgba(0, 128, 128, 1)">13</span>     System.out.println("用户名：" +<span style="color: rgba(0, 0, 0, 1)"> username);
</span><span style="color: rgba(0, 128, 128, 1)">14</span>     System.out.println("单文件的文件大小：" +<span style="color: rgba(0, 0, 0, 1)"> headImg.getSize());
</span><span style="color: rgba(0, 128, 128, 1)">15</span>     System.out.println("多文件的文件个数：" +<span style="color: rgba(0, 0, 0, 1)"> photos.length);
</span><span style="color: rgba(0, 128, 128, 1)">16</span>     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 保存单文件的上传地址</span>
<span style="color: rgba(0, 128, 128, 1)">17</span>     <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">headImg.isEmpty()) {
</span><span style="color: rgba(0, 128, 128, 1)">18</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 获取文件名</span>
<span style="color: rgba(0, 128, 128, 1)">19</span>         String filename =<span style="color: rgba(0, 0, 0, 1)"> headImg.getOriginalFilename();
</span><span style="color: rgba(0, 128, 128, 1)">20</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 将收到的文件传输到给定的目标文件。</span>
<span style="color: rgba(0, 128, 128, 1)">21</span>         headImg.transferTo(<span style="color: rgba(0, 0, 255, 1)">new</span> File("H:\\cache\\" + System.currentTimeMillis() +<span style="color: rgba(0, 0, 0, 1)"> filename));
</span><span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">23</span>     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 保存多文件的上传地址</span>
<span style="color: rgba(0, 128, 128, 1)">24</span>     <span style="color: rgba(0, 0, 255, 1)">if</span> (photos.length &gt; 0<span style="color: rgba(0, 0, 0, 1)">) {
</span><span style="color: rgba(0, 128, 128, 1)">25</span>         <span style="color: rgba(0, 0, 255, 1)">for</span><span style="color: rgba(0, 0, 0, 1)"> (MultipartFile photo : photos) {
</span><span style="color: rgba(0, 128, 128, 1)">26</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">photo.isEmpty()) {
</span><span style="color: rgba(0, 128, 128, 1)">27</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 获取文件名</span>
<span style="color: rgba(0, 128, 128, 1)">28</span>                 String filename =<span style="color: rgba(0, 0, 0, 1)"> photo.getOriginalFilename();
</span><span style="color: rgba(0, 128, 128, 1)">29</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 将收到的文件传输到给定的目标文件。</span>
<span style="color: rgba(0, 128, 128, 1)">30</span>                 photo.transferTo(<span style="color: rgba(0, 0, 255, 1)">new</span> File("H:\\cache\\" + System.currentTimeMillis() +<span style="color: rgba(0, 0, 0, 1)"> filename));
</span><span style="color: rgba(0, 128, 128, 1)">31</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">32</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">33</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">34</span>     
<span style="color: rgba(0, 128, 128, 1)">35</span>     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 表单提交成功跳转到主页面</span>
<span style="color: rgba(0, 128, 128, 1)">36</span>     <span style="color: rgba(0, 0, 255, 1)">return</span> "main"<span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">37</span> }</pre>
</div>
<p>3、application中设置单个文件的上传大小以及请求上传的总容量</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB </pre>
</div>
<h4>6.2、文件上传原理</h4>
<p data-lake-id="d911a62f7e7eb8bf8f45df71844b85d8" data-wording="true"><strong>文件上传自动配置类-MultipartAutoConfiguration-</strong><strong>MultipartProperties</strong></p>
<ul data-lake-id="ceb8fb59adf68335877a3385e66c43d0">
<li data-lake-id="47bd1b535d4a4bab6130fa5d7fbfcd05" data-wording="true">自动配置好了 <strong>StandardServletMultipartResolver &nbsp; 【文件上传解析器】</strong></li>
<li data-lake-id="f87bd42cecef1f8103b3acdef5c7ac03" data-wording="true"><strong>原理步骤</strong></li>
</ul>
<ul data-lake-id="4ea700d8e5e5eb81c4e3c650398f4d41">
<ul data-lake-id="e607dcf31a6fca4333fec249250f1940">
<li data-lake-id="89b3e5403102e841e7ebbcbcea9a28ac" data-wording="true"><strong>1、请求进来使用文件上传解析器判断（</strong>isMultipart<strong>）并封装（</strong>resolveMultipart，<strong>返回</strong>MultipartHttpServletRequest<strong>）文件上传请求</strong></li>
<li data-lake-id="7e768165bc8477ba22ef691c0e02bd0d" data-wording="true"><strong>2、参数解析器来解析请求中的文件内容封装成MultipartFile</strong></li>
<li data-lake-id="13e4a28ecf1e293576cea5fcca79e606" data-wording="true"><strong>3、将request中文件信息封装为一个Map；</strong>MultiValueMap&lt;String, MultipartFile&gt;</li>
</ul>
</ul>
<p data-lake-id="12f5a0f79b90b8f69cc1b29560d917ca" data-wording="true"><strong>FileCopyUtils</strong>。实现文件流的拷贝</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span>     @PostMapping("/upload"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">2</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> String upload(@RequestParam("email"<span style="color: rgba(0, 0, 0, 1)">) String email,
</span><span style="color: rgba(0, 128, 128, 1)">3</span>                          @RequestParam("username"<span style="color: rgba(0, 0, 0, 1)">) String username,
</span><span style="color: rgba(0, 128, 128, 1)">4</span>                          @RequestPart("headerImg"<span style="color: rgba(0, 0, 0, 1)">) MultipartFile headerImg,
</span><span style="color: rgba(0, 128, 128, 1)">5</span>                          @RequestPart("photos") MultipartFile[] photos)</pre>
</div>
<h3>7、异常处理　　</h3>
<h4 id="RVJL0" data-lake-id="5fe2dad22e7c36921010d622c2d229e0" data-wording="true">1、默认规则</h4>
<ul data-lake-id="e19bfa32d25bfdaf881196fa06f79b55">
<li data-lake-id="d10426db617ca847f8ff82cd503a8f2c" data-wording="true">默认情况下，Spring Boot提供<code>/error</code>处理所有错误的映射</li>
<li data-lake-id="53ea29c0a749fc633cecc4e8e4a4d913" data-wording="true">对于机器客户端，它将生成JSON响应，其中包含错误，HTTP状态和异常消息的详细信息。对于浏览器客户端，响应一个“ whitelabel”错误视图，<span class="lake-fontsize-12">以HTML格式呈现相同的数据</span></li>
</ul>
<p><span class="lake-fontsize-12"><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331132851347-1694693136.png" alt="" loading="lazy"></span></p>
<p data-lake-id="c7edbb2f430a6986dd622a7a6fe59b68" data-wording="true"><span class="lake-fontsize-12"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606024421363-77083c34-0b0e-4698-bb72-42da351d3944.png%22%2C%22originWidth%22%3A481%2C%22originHeight%22%3A190%2C%22name%22%3A%22image.png%22%2C%22size%22%3A9027%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A56.649426%2C%22y%22%3A40.607105%2C%22width%22%3A371.073504%2C%22height%22%3A17.910057000000002%2C%22text%22%3A%22%5C%22timestamp%5C%22%3A%5C%222020-11-22T05%3A53%3A28.416%2B00%3A00%5C%22%22%7D%2C%7B%22x%22%3A57.780704%2C%22y%22%3A65.32023%2C%22width%22%3A112.00561599999999%2C%22height%22%3A16.174360000000007%2C%22text%22%3A%22%5C%22status%5C%22%3A404%2C%22%7D%2C%7B%22x%22%3A59.809235%2C%22y%22%3A87.951805%2C%22width%22%3A167.294165%2C%22height%22%3A14.00925500000001%2C%22text%22%3A%22%5C%22error%5C%22%3A%5C%22NotFound%5C%22%2C%22%7D%2C%7B%22x%22%3A123.38233%2C%22y%22%3A110.46456%2C%22width%22%3A211.42997%2C%22height%22%3A15.227249999999998%2C%22text%22%3A%22%5C%22%3A%5C%22Nomessageavailable%5C%22%22%7D%2C%7B%22x%22%3A59.298702%2C%22y%22%3A112.19937%2C%22width%22%3A74.26159800000002%2C%22height%22%3A13.396789999999996%2C%22text%22%3A%22%5C%22message%5C%22%3A%22%7D%2C%7B%22x%22%3A62.959324%2C%22y%22%3A134.02077%2C%22width%22%3A136.32190599999998%2C%22height%22%3A13.929730000000006%2C%22text%22%3A%22%5C%22path%5C%22%3A%5C%22%2Fasadada%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%5C%22timestamp%5C%22%3A%5C%222020-11-22T05%3A53%3A28.416%2B00%3A00%5C%22%20%5C%22status%5C%22%3A404%2C%20%5C%22error%5C%22%3A%5C%22NotFound%5C%22%2C%20%5C%22%3A%5C%22Nomessageavailable%5C%22%20%5C%22message%5C%22%3A%20%5C%22path%5C%22%3A%5C%22%2Fasadada%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A481%2C%22height%22%3A190%7D"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606024616835-bc491bf0-c3b1-4ac3-b886-d4ff3c9874ce.png%22%2C%22originWidth%22%3A970%2C%22originHeight%22%3A252%2C%22name%22%3A%22image.png%22%2C%22size%22%3A36517%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A11.72322%2C%22y%22%3A11.006197%2C%22width%22%3A486.82854%2C%22height%22%3A55.200933000000006%2C%22text%22%3A%22WhitelabelErrorPage%22%7D%2C%7B%22x%22%3A11.247084%2C%22y%22%3A97.8209%2C%22width%22%3A272.226516%2C%22height%22%3A24.05675500000001%2C%22text%22%3A%22Thisapplicationhasnoexp%22%7D%2C%7B%22x%22%3A729.75574%2C%22y%22%3A98.912544%2C%22width%22%3A191.53786000000002%2C%22height%22%3A23.756141999999997%2C%22text%22%3A%22gthisasafallback.%22%7D%2C%7B%22x%22%3A266.71527%2C%22y%22%3A100.65032%2C%22width%22%3A477.3094300000001%2C%22height%22%3A24.52645000000001%2C%22text%22%3A%22explicitmappingfor%2Ferrorsoyouareseeing%22%7D%2C%7B%22x%22%3A10.848458%2C%22y%22%3A149.79506%2C%22width%22%3A322.838192%2C%22height%22%3A22.45650999999998%2C%22text%22%3A%22SunNov2213%3A56%3A48CST2020%22%7D%2C%7B%22x%22%3A12.905569%2C%22y%22%3A178.93411%2C%22width%22%3A656.600831%2C%22height%22%3A26.212889999999987%2C%22text%22%3A%22Therewasanunexpectederror(type-NotFound%2Cstaus404)%22%7D%2C%7B%22x%22%3A9.549414%2C%22y%22%3A208.79308%2C%22width%22%3A230.94742599999998%2C%22height%22%3A21.73872%2C%22text%22%3A%22Nomessageavailable%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22WhitelabelErrorPage%20Thisapplicationhasnoexp%20gthisasafallback.%20explicitmappingfor%2Ferrorsoyouareseeing%20SunNov2213%3A56%3A48CST2020%20Therewasanunexpectederror(type-NotFound%2Cstaus404)%20Nomessageavailable%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A970%2C%22height%22%3A252%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606024616835-bc491bf0-c3b1-4ac3-b886-d4ff3c9874ce.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="252px"></span></span></span></p>
<ul data-lake-id="e19bfa32d25bfdaf881196fa06f79b55">
<li data-lake-id="45beab340f40cad2ff71053a7185fdf2" data-wording="true"><strong>要对其进行自定义，添加</strong><strong><code>View</code></strong><strong>解析为<code>error</code><code><br></code></strong></li>
<li data-lake-id="c98459ec66dfa9e11deabf82fc279d93" data-wording="true">要完全替换默认行为，可以实现 <code>ErrorController </code>并注册该类型的Bean定义，或添加<code>ErrorAttributes类型的组件</code>以使用现有机制但替换其内容。</li>
<li data-lake-id="682bb766136ad97064a0e8da41e1e70d" data-wording="true">error/下的4xx，5xx页面会被自动解析；</li>




























</ul>
<p data-lake-id="d125a79d8375e69e0bca0848074ad486" data-wording="true"><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331132907321-1222712244.png" alt="" loading="lazy"></p>
<h4 id="lNviF" data-lake-id="12d87e4e76b5d15bd16dab9c536bca33" data-wording="true">2、定制错误处理逻辑</h4>
<ul data-lake-id="82f3442cc14d2d8130e81c3d5d2285e7">
<li data-lake-id="c211eb187c4ebfacc68fac16d2f375f2" data-wording="true">自定义错误页</li>




























</ul>
<ul data-lake-id="af7e07409b773444428d6974fabb907d">
<ul data-lake-id="e91483504121c59a745b6fb9e1230644">
<li data-lake-id="3fe68ab127cb81c91c153e60669d226e" data-wording="true">error/404.html &nbsp; error/5xx.html；有精确的错误状态码页面就匹配精确，没有就找 4xx.html；如果都没有就触发白页</li>




























</ul>




























</ul>
<ul data-lake-id="6d862a68e320cea7f677b159a3c2f4f4">
<li data-lake-id="8397188fb0485bd386a9c56abf7eb02e" data-wording="true">@ControllerAdvice+@ExceptionHandler处理全局异常；底层是 <strong>ExceptionHandlerExceptionResolver 支持的</strong></li>
<li data-lake-id="52efb54e304722e4cdea9ad955d8a028" data-wording="true">@ResponseStatus+自定义异常 ；底层是 <strong>ResponseStatusExceptionResolver ，把responsestatus注解的信息底层调用 </strong><strong>response.sendError(statusCode, resolvedReason)；tomcat发送的/error</strong></li>
<li data-lake-id="1a0f84fc2fc7d168da490fe3702cce71" data-wording="true">Spring底层的异常，如 参数类型转换异常；<strong>DefaultHandlerExceptionResolver 处理框架底层的异常。</strong>
<ul>
<li data-lake-id="1a0f84fc2fc7d168da490fe3702cce71" data-wording="true">response.sendError(HttpServletResponse.<strong>SC_BAD_REQUEST</strong>, ex.getMessage());&nbsp;</li>
<li data-lake-id="1a0f84fc2fc7d168da490fe3702cce71" data-wording="true"><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331153228662-1359632256.png" alt="" loading="lazy"></li>




























</ul>




























</li>




























</ul>
<ul data-lake-id="720c8d6b4426b58f3e19524a6b78c719">
<li data-lake-id="b5c1cedbfb0c0fe1aafd4999d5cb4858" data-wording="true">自定义实现 HandlerExceptionResolver 处理异常；可以作为默认的全局异常处理规则</li>




























</ul>
<ul data-lake-id="0c25330ef1cba91440f706a874fd4bc2">
<ul data-lake-id="132a20f2f4ed0c3f8e35171579fe77c2">
<li data-lake-id="ba386504075aa1589165b9dc2ce4f76d" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606114688649-e6502134-88b3-48db-a463-04c23eddedc7.png%22%2C%22originWidth%22%3A552%2C%22originHeight%22%3A153%2C%22name%22%3A%22image.png%22%2C%22size%22%3A13831%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A10.516763%2C%22y%22%3A11.580688%2C%22width%22%3A514.705237%2C%22height%22%3A18.126382999999997%2C%22text%22%3A%22oothishandlerExceptionResolersArayList%406349Size3%22%7D%2C%7B%22x%22%3A72.1473%2C%22y%22%3A41.412464%2C%22width%22%3A391.0253%2C%22height%22%3A20.196258999999998%2C%22text%22%3A%220-CustomerHandlerExceptionResolver%4064311%22%7D%2C%7B%22x%22%3A79.5148%2C%22y%22%3A71.22333%2C%22width%22%3A266.71906%2C%22height%22%3A19.423699999999997%2C%22text%22%3A%221-DefaulterrorAttributes%406437%22%7D%2C%7B%22x%22%3A46.231388%2C%22y%22%3A101.99387%2C%22width%22%3A425.218162%2C%22height%22%3A17.7979%2C%22text%22%3A%22%E4%B8%892-HandlerExceptionResolverComposite%406438%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22oothishandlerExceptionResolersArayList%406349Size3%200-CustomerHandlerExceptionResolver%4064311%201-DefaulterrorAttributes%406437%20%E4%B8%892-HandlerExceptionResolverComposite%406438%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A552%2C%22height%22%3A153%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606114688649-e6502134-88b3-48db-a463-04c23eddedc7.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="153px"></span></li>




























</ul>




























</ul>
<ul data-lake-id="15e241a6bb9ad82523dec8f25a0e65e1">
<li data-lake-id="253c7bc32ca4b599091724bbba6abde1" data-wording="true"><strong>ErrorViewResolver</strong><span class="lake-fontsize-10"> &nbsp;实现自定义处理异常；</span></li>




























</ul>
<ul data-lake-id="e0479cb2f5cdc5036d93de8d4128ce92">
<ul data-lake-id="c9434120c0912e5a4f96b5536569ff20">
<li data-lake-id="fab36b00b7e945477906083230c10505" data-wording="true">response.sendError 。error请求就会转给controller</li>
<li data-lake-id="be7a22d492beae8ebe67b83a5a65067d" data-wording="true">你的异常没有任何人能处理。tomcat底层 response.sendError。error请求就会转给controller</li>
<li data-lake-id="c85b43b9f25267a37a6e77fd6dc1a36a" data-wording="true"><strong>basicErrorController 要去的页面地址是 </strong><strong>ErrorViewResolver</strong><span class="lake-fontsize-10"> &nbsp;；</span></li>




























</ul>




























</ul>
<h4 id="52LdK" data-lake-id="fa3466d9d179b2c241d1d62a3b17bc7e" data-wording="true">3、异常处理自动配置原理</h4>
<ul data-lake-id="5876e2686fced40be5694ce43026491d">
<li data-lake-id="8febcfcb88483a82dea5864c127c8001" data-wording="true"><strong>ErrorMvcAutoConfiguration &nbsp;自动配置异常处理规则</strong></li>




























</ul>
<ul data-lake-id="645d1421e9e808e9a3297943d117f338">
<ul data-lake-id="3805f115aea15a804ba06eba01a23868">
<li data-lake-id="f67055b74be8b3c83ad1e993de9b41d2" data-wording="true"><strong>容器中的组件：类型：DefaultErrorAttributes -&gt; </strong><strong>id：errorAttributes</strong></li>




























</ul>




























</ul>
<ul data-lake-id="66376cf5f03e2feb572b16cac3cf1b2a">
<ul data-lake-id="86e0cc9643fd55dcaec4bf6f138fa545">
<ul data-lake-id="89445628bf3dc5569f5c976cab6fd7da">
<li data-lake-id="982c55794ecad19ae15cca509056062f" data-wording="true"><strong>public class </strong><strong>DefaultErrorAttributes </strong><strong>implements </strong><strong>ErrorAttributes</strong>, <strong>HandlerExceptionResolver</strong></li>
<li data-lake-id="e7c7b5e5919cd16d6325a6e2c785bd41" data-wording="true"><strong>DefaultErrorAttributes</strong>：定义错误页面中可以包含哪些数据。</li>
<li data-lake-id="f900caf5a947ace8cb8a249ad0479a18" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606044430037-8d599e30-1679-407c-96b7-4df345848fa4.png%22%2C%22originWidth%22%3A971%2C%22originHeight%22%3A603%2C%22name%22%3A%22image.png%22%2C%22size%22%3A67730%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A28.949306%2C%22y%22%3A7.669549%2C%22width%22%3A114.29288399999999%2C%22height%22%3A19.058071%2C%22text%22%3A%22%40override%22%7D%2C%7B%22x%22%3A26.707472%2C%22y%22%3A32.41026%2C%22width%22%3A340.388928%2C%22height%22%3A25.336306999999998%2C%22text%22%3A%22publicMap%3Cstring%2Cobject%3E%22%7D%2C%7B%22x%22%3A922.3319%2C%22y%22%3A35.31209%2C%22width%22%3A47.02252999999996%2C%22height%22%3A17.27252%2C%22text%22%3A%22Err%22%7D%2C%7B%22x%22%3A377.7313%2C%22y%22%3A35.512173%2C%22width%22%3A375.90350000000007%2C%22height%22%3A20.734647000000002%2C%22text%22%3A%22getErrorattributes(webRequest%22%7D%2C%7B%22x%22%3A765.0372%2C%22y%22%3A37.689575%2C%22width%22%3A143.74655000000007%2C%22height%22%3A16.214440000000003%2C%22text%22%3A%22webReguest%2C%22%7D%2C%7B%22x%22%3A573.5479%2C%22y%22%3A62.818474%2C%22width%22%3A386.90099999999995%2C%22height%22%3A19.592756%2C%22text%22%3A%22geterrorAttributeswebRequest%22%7D%2C%7B%22x%22%3A78.08663%2C%22y%22%3A63.156456%2C%22width%22%3A457.08907%2C%22height%22%3A20.709074000000008%2C%22text%22%3A%22Mapstring%2CobjecterrorAttributes%22%7D%2C%7B%22x%22%3A77.952644%2C%22y%22%3A88.559494%2C%22width%22%3A633.9471560000001%2C%22height%22%3A23.125776000000002%2C%22text%22%3A%22f(BooJeAN.Tqu(thixceo%22%7D%2C%7B%22x%22%3A130.9391%2C%22y%22%3A118.204575%2C%22width%22%3A597.3507%2C%22height%22%3A23.078125%2C%22text%22%3A%22otionsotionsiig(uT%22%7D%2C%7B%22x%22%3A111.25738%2C%22y%22%3A169.47856%2C%22width%22%3A554.00852%2C%22height%22%3A27.142140000000012%2C%22text%22%3A%22(loptions.isIncluded(Include.EXCEPTION))%22%7D%2C%7B%22x%22%3A80.43114%2C%22y%22%3A172.01808%2C%22width%22%3A86.00538%2C%22height%22%3A19.290269999999992%2C%22text%22%3A%22if(!op%22%7D%2C%7B%22x%22%3A131.71892%2C%22y%22%3A197.83076%2C%22width%22%3A196.15610999999998%2C%22height%22%3A23.688890000000015%2C%22text%22%3A%22errorAttributes.%22%7D%2C%7B%22x%22%3A344.51657%2C%22y%22%3A200.10114%2C%22width%22%3A277.14763000000005%2C%22height%22%3A19.328550000000007%2C%22text%22%3A%22remove(key%3A%5C%22exception%22%7D%2C%7B%22x%22%3A78.89374%2C%22y%22%3A224.70392%2C%22width%22%3A15.009084000000001%2C%22height%22%3A15.009084000000001%2C%22text%22%3A%22%22%7D%2C%7B%22x%22%3A79.275696%2C%22y%22%3A254.47382%2C%22width%22%3A26.093664000000004%2C%22height%22%3A18.62924000000004%2C%22text%22%3A%22if%22%7D%2C%7B%22x%22%3A129.45651%2C%22y%22%3A254.60701%2C%22width%22%3A550.25473%2C%22height%22%3A22.147749999999974%2C%22text%22%3A%22(loptions.isIncluded(Include.STACK_TRACE))%22%7D%2C%7B%22x%22%3A435.913%2C%22y%22%3A283.3463%2C%22width%22%3A140.8949%2C%22height%22%3A17.910799999999995%2C%22text%22%3A%22key%3A%5C%22trace%5C%22%22%7D%2C%7B%22x%22%3A132.11319%2C%22y%22%3A283.78888%2C%22width%22%3A192.18436%2C%22height%22%3A18.26952%2C%22text%22%3A%22errorAttributes%22%7D%2C%7B%22x%22%3A339.65027%2C%22y%22%3A285.2643%2C%22width%22%3A84.05499000000003%2C%22height%22%3A15.871199999999988%2C%22text%22%3A%22remove(%22%7D%2C%7B%22x%22%3A121.50628%2C%22y%22%3A333.6197%2C%22width%22%3A844.3600200000001%2C%22height%22%3A25.503679999999974%2C%22text%22%3A%22(loptions.isncluded(IncludeMSS)eorAttrbuteseme%22%7D%2C%7B%22x%22%3A79.343094%2C%22y%22%3A336.67065%2C%22width%22%3A26.082802%2C%22height%22%3A19.127229999999997%2C%22text%22%3A%22if%22%7D%2C%7B%22x%22%3A343.83255%2C%22y%22%3A365.98535%2C%22width%22%3A158.84965%2C%22height%22%3A19.904020000000003%2C%22text%22%3A%22put(%5C%22message%5C%22%22%7D%2C%7B%22x%22%3A130.67973%2C%22y%22%3A367.6696%2C%22width%22%3A194.68784999999997%2C%22height%22%3A15.954940000000022%2C%22text%22%3A%22errorattributes%22%7D%2C%7B%22x%22%3A78.9835%2C%22y%22%3A418.66513%2C%22width%22%3A652.31215%2C%22height%22%3A24.325930000000028%2C%22text%22%3A%22if(loptions.iIncluded(Include.BDINGEORS)%22%7D%2C%7B%22x%22%3A349.31305%2C%22y%22%3A448.76547%2C%22width%22%3A234.32915000000003%2C%22height%22%3A17.268309999999985%2C%22text%22%3A%22remove(key%3A%5C%22errors%22%7D%2C%7B%22x%22%3A132.10735%2C%22y%22%3A448.26712%2C%22width%22%3A193.95985000000002%2C%22height%22%3A17.979180000000042%2C%22text%22%3A%22errorattributes%22%7D%2C%7B%22x%22%3A78.59128%2C%22y%22%3A502.11942%2C%22width%22%3A299.56454%2C%22height%22%3A21.346180000000004%2C%22text%22%3A%22returnerrorAttributes%3B%22%7D%2C%7B%22x%22%3A25.945086%2C%22y%22%3A584.3631%2C%22width%22%3A117.847994%2C%22height%22%3A18.57195999999999%2C%22text%22%3A%22%40Override%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%40override%20publicMap%3Cstring%2Cobject%3E%20Err%20getErrorattributes(webRequest%20webReguest%2C%20geterrorAttributeswebRequest%20Mapstring%2CobjecterrorAttributes%20f(BooJeAN.Tqu(thixceo%20otionsotionsiig(uT%20(loptions.isIncluded(Include.EXCEPTION))%20if(!op%20errorAttributes.%20remove(key%3A%5C%22exception%20%20if%20(loptions.isIncluded(Include.STACK_TRACE))%20key%3A%5C%22trace%5C%22%20errorAttributes%20remove(%20(loptions.isncluded(IncludeMSS)eorAttrbuteseme%20if%20put(%5C%22message%5C%22%20errorattributes%20if(loptions.iIncluded(Include.BDINGEORS)%20remove(key%3A%5C%22errors%20errorattributes%20returnerrorAttributes%3B%20%40Override%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A485.5%2C%22height%22%3A302%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606044430037-8d599e30-1679-407c-96b7-4df345848fa4.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="302px"></span></li>
<li data-lake-id="748b9225c0024e7f19dd3458113ebdf9" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606044487738-8cb1dcda-08c5-4104-a634-b2468512e60f.png%22%2C%22originWidth%22%3A1072%2C%22originHeight%22%3A591%2C%22name%22%3A%22image.png%22%2C%22size%22%3A80788%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A51.39562%2C%22y%22%3A-3.2666676%2C%22width%22%3A122.74819%2C%22height%22%3A16.2598226%2C%22text%22%3A%22doverride%22%7D%2C%7B%22x%22%3A52.87492%2C%22y%22%3A20.530558%2C%22width%22%3A147.49344%2C%22height%22%3A19.909212000000004%2C%22text%22%3A%22%40Deprecated%22%7D%2C%7B%22x%22%3A53.398155%2C%22y%22%3A46.6642%2C%22width%22%3A336.84259499999996%2C%22height%22%3A22.39477%2C%22text%22%3A%22pubiicMap%3Cstring%2Cobject%22%7D%2C%7B%22x%22%3A402.42764%2C%22y%22%3A46.384872%2C%22width%22%3A637.93306%2C%22height%22%3A23.913192999999993%2C%22text%22%3A%22getErrorattributes(WebRequestwebReguestboolean%22%7D%2C%7B%22x%22%3A104.701546%2C%22y%22%3A76.70397%2C%22width%22%3A243.48513400000002%2C%22height%22%3A22.979250000000008%2C%22text%22%3A%22Mapcstring%2Cobject%22%7D%2C%7B%22x%22%3A367.15594%2C%22y%22%3A77.27908%2C%22width%22%3A514.97896%2C%22height%22%3A22.97954%2C%22text%22%3A%22srrorattributesnewlinkedHashMap%3B%22%7D%2C%7B%22x%22%3A374.16373%2C%22y%22%3A103.157875%2C%22width%22%3A123.10737%2C%22height%22%3A19.543830999999997%2C%22text%22%3A%22timestamp%22%7D%2C%7B%22x%22%3A525.7936%2C%22y%22%3A103.84107%2C%22width%22%3A162.04764999999998%2C%22height%22%3A20.80381%2C%22text%22%3A%22newDateO))%3B%22%7D%2C%7B%22x%22%3A111.60966%2C%22y%22%3A104.06213%2C%22width%22%3A243.82876%2C%22height%22%3A20.786945000000003%2C%22text%22%3A%22errorattributesput%22%7D%2C%7B%22x%22%3A233.87149%2C%22y%22%3A126.09974%2C%22width%22%3A379.36417000000006%2C%22height%22%3A28.497119999999995%2C%22text%22%3A%22(errorAttributes%2CwebRequest)%3B%22%7D%2C%7B%22x%22%3A1049.1987%2C%22y%22%3A131.53242%2C%22width%22%3A20.10239999999999%2C%22height%22%3A20.10239999999999%2C%22text%22%3A%22DDatabase%22%7D%2C%7B%22x%22%3A108.08566%2C%22y%22%3A133.34393%2C%22width%22%3A110.25250999999999%2C%22height%22%3A16.68012999999999%2C%22text%22%3A%22addstatus%22%7D%2C%7B%22x%22%3A110.13483%2C%22y%22%3A154.71654%2C%22width%22%3A827.77093%2C%22height%22%3A26.09818999999999%2C%22text%22%3A%22tdderronpetailsqerrorAttribute%2Cweequek%22%7D%2C%7B%22x%22%3A238.11069%2C%22y%22%3A185.92708%2C%22width%22%3A346.33798%2C%22height%22%3A22.321060000000017%2C%22text%22%3A%22rorAttributes%2CwebRequest)%3B%22%7D%2C%7B%22x%22%3A104.3612%2C%22y%22%3A185.91559%2C%22width%22%3A120.62280000000001%2C%22height%22%3A21.506529999999998%2C%22text%22%3A%22addPath(e%22%7D%2C%7B%22x%22%3A225.75966%2C%22y%22%3A212.44661%2C%22width%22%3A178.60466000000002%2C%22height%22%3A22.39876000000001%2C%22text%22%3A%22orAttributes%3B%22%7D%2C%7B%22x%22%3A52.75149%2C%22y%22%3A293.00055%2C%22width%22%3A990.8253100000001%2C%22height%22%3A23.314570000000003%2C%22text%22%3A%22privatevodaddstatusMapstingue%22%7D%2C%7B%22x%22%3A272.52887%2C%22y%22%3A323.83838%2C%22width%22%3A773.54643%2C%22height%22%3A20.399320000000046%2C%22text%22%3A%22uSEgetAttribute(requestattrbutesqueiheR%22%7D%2C%7B%22x%22%3A106.96864%2C%22y%22%3A325.27628%2C%22width%22%3A183.86281000000002%2C%22height%22%3A17.590239999999994%2C%22text%22%3A%22Integerstatus%22%7D%2C%7B%22x%22%3A104.92963%2C%22y%22%3A348.94098%2C%22width%22%3A268.8858%2C%22height%22%3A23.689419999999984%2C%22text%22%3A%22if(statusanu11)f%22%7D%2C%7B%22x%22%3A430.40222%2C%22y%22%3A377.25928%2C%22width%22%3A89.87618000000003%2C%22height%22%3A20.213070000000016%2C%22text%22%3A%22status%5C%22%22%7D%2C%7B%22x%22%3A546.3715%2C%22y%22%3A378.2585%2C%22width%22%3A63.968470000000025%2C%22height%22%3A20.410319999999956%2C%22text%22%3A%22999)%3B%22%7D%2C%7B%22x%22%3A158.74733%2C%22y%22%3A378.64236%2C%22width%22%3A253.87067%2C%22height%22%3A21.349040000000002%2C%22text%22%3A%22errorAttributes.put%22%7D%2C%7B%22x%22%3A165.25153%2C%22y%22%3A406.25742%2C%22width%22%3A472.28697%2C%22height%22%3A20.36421999999999%2C%22text%22%3A%22errorattributes.put%5C%22error%5C%22%2C%5C%22None)%3B%22%7D%2C%7B%22x%22%3A158.60493%2C%22y%22%3A436.85278%2C%22width%22%3A88.00040000000001%2C%22height%22%3A16.840370000000007%2C%22text%22%3A%22return%3B%22%7D%2C%7B%22x%22%3A159.98291%2C%22y%22%3A541.31616%2C%22width%22%3A881.93749%2C%22height%22%3A21.570500000000038%2C%22text%22%3A%22errorAttributes.putteror%5C%22Httpstatusuu%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22doverride%20%40Deprecated%20pubiicMap%3Cstring%2Cobject%20getErrorattributes(WebRequestwebReguestboolean%20Mapcstring%2Cobject%20srrorattributesnewlinkedHashMap%3B%20timestamp%20newDateO))%3B%20errorattributesput%20(errorAttributes%2CwebRequest)%3B%20DDatabase%20addstatus%20tdderronpetailsqerrorAttribute%2Cweequek%20rorAttributes%2CwebRequest)%3B%20addPath(e%20orAttributes%3B%20privatevodaddstatusMapstingue%20uSEgetAttribute(requestattrbutesqueiheR%20Integerstatus%20if(statusanu11)f%20status%5C%22%20999)%3B%20errorAttributes.put%20errorattributes.put%5C%22error%5C%22%2C%5C%22None)%3B%20return%3B%20errorAttributes.putteror%5C%22Httpstatusuu%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A536%2C%22height%22%3A296%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606044487738-8cb1dcda-08c5-4104-a634-b2468512e60f.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="296px"></span></li>




























</ul>




























</ul>




























</ul>
<ul data-lake-id="f33386990a72a35efc304583dfe4ccc7">
<ul data-lake-id="98e1c9317d3c0e819037ab4eccc651d2">
<li data-lake-id="00d43004f3f306aac6e81123a237c712" data-wording="true"><strong>容器中的组件：类型：</strong><strong>BasicErrorController --&gt; id：basicErrorController（json+白页 适配响应）</strong></li>




























</ul>




























</ul>
<ul data-lake-id="f9eeba4596dccee83f4f897a30a72043">
<ul data-lake-id="2584e718f452e1abe793b1361ead2b17">
<ul data-lake-id="ebdf13f98936b86780801b047b62bc6d">
<li data-lake-id="56bd18e86e05d88c556ed90ef5d1edf8" data-wording="true"><strong>处理默认 </strong><strong>/error 路径的请求；页面响应 </strong><strong>new </strong>ModelAndView(<strong>"error"</strong>, model)；</li>
<li data-lake-id="3f3808681be954cc621de87e40b8ed80" data-wording="true"><strong>容器中有组件 View</strong>-&gt;<strong>id是error</strong>；（响应默认错误页）</li>
<li data-lake-id="ebf031624d365546fc7e959d6387a47d" data-wording="true">容器中放组件 <strong>BeanNameViewResolver（视图解析器）；按照返回的视图名作为组件的id去容器中找View对象。</strong></li>




























</ul>




























</ul>




























</ul>
<ul data-lake-id="67206a40f8d612317886446f54cea3b3">
<ul data-lake-id="8f171d68ddd50d2a9c31733f5fa47bba">
<li data-lake-id="145d83197fab385c3d07c0d5e7429a68" data-wording="true"><strong>容器中的组件：</strong>类型：<strong>DefaultErrorViewResolver -&gt; id：</strong>conventionErrorViewResolver</li>




























</ul>




























</ul>
<ul data-lake-id="313a0fb2aed2e27016e0f0c6b35676df">
<ul data-lake-id="a45900292a389cd127cc432498e27ae5">
<ul data-lake-id="2793b980ddf6964e607e573ad3d57c85">
<li data-lake-id="ada11f514699572061aaaa4155ba8113" data-wording="true">如果发生错误，会以HTTP的状态码 作为视图页地址（viewName），找到真正的页面</li>
<li data-lake-id="5c96694eb76a4e4f23f4f5f21d15928b" data-wording="true">error/404、5xx.html</li>




























</ul>




























</ul>




























</ul>
<p data-lake-id="ae6c1209f521944794f3f96621fb3634" data-wording="true">如果想要返回页面；就会找error视图【<strong>StaticView</strong>】。(默认是一个白页)&nbsp;</p>
<p data-lake-id="36f3ca910442ab9eb0c5c60a99d1c2cc" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606043870164-3770e116-344f-448e-8bff-8f32438edc9a.png%22%2C%22originWidth%22%3A1004%2C%22originHeight%22%3A70%2C%22name%22%3A%22image.png%22%2C%22size%22%3A8979%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A6.5458097%2C%22y%22%3A18.12659%2C%22width%22%3A192.8603003%2C%22height%22%3A19.347768000000002%2C%22text%22%3A%22%40RequestMapping%22%7D%2C%7B%22x%22%3A6.9408536%2C%22y%22%3A43.062603%2C%22width%22%3A988.3176864000001%2C%22height%22%3A22.418713000000004%2C%22text%22%3A%22pubiicResponseEntityMapstring%2Ceueue)%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%40RequestMapping%20pubiicResponseEntityMapstring%2Ceueue)%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A502%2C%22height%22%3A35%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606043870164-3770e116-344f-448e-8bff-8f32438edc9a.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="35px">写出去json</span></p>
<p data-lake-id="76ccd63fef3c5cb027933b9a1d9c88cb" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606043904074-50b7f088-2d2b-4da5-85e2-0a756da74dca.png%22%2C%22originWidth%22%3A1235%2C%22originHeight%22%3A288%2C%22name%22%3A%22image.png%22%2C%22size%22%3A44710%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A27.321438%2C%22y%22%3A12.853888%2C%22width%22%3A316.822082%2C%22height%22%3A25.548830000000002%2C%22text%22%3A%22%40RequestMapping(Produces%22%7D%2C%7B%22x%22%3A375.98694%2C%22y%22%3A14.721316%2C%22width%22%3A339.18683%2C%22height%22%3A21.388311%2C%22text%22%3A%22MEdiaType.TEXTHTMLVALUE)%22%7D%2C%7B%22x%22%3A293.22037%2C%22y%22%3A44.47156%2C%22width%22%3A449.44093%2C%22height%22%3A20.251829999999998%2C%22text%22%3A%22errorhtmi(HttpservletReguestregues%22%7D%2C%7B%22x%22%3A29.781178%2C%22y%22%3A44.869114%2C%22width%22%3A252.227152%2C%22height%22%3A19.799826000000003%2C%22text%22%3A%22pubiicModeiAndview%22%7D%2C%7B%22x%22%3A779.0996%2C%22y%22%3A44.659473%2C%22width%22%3A378.43190000000004%2C%22height%22%3A21.003696999999995%2C%22text%22%3A%22HttpsservletResponseresponse)%22%7D%2C%7B%22x%22%3A454.04883%2C%22y%22%3A75.54762%2C%22width%22%3A134.00372%2C%22height%22%3A16.81585000000001%2C%22text%22%3A%22streguesT%22%7D%2C%7B%22x%22%3A78.50914%2C%22y%22%3A76.10309%2C%22width%22%3A207.75481000000002%2C%22height%22%3A13.833390000000009%2C%22text%22%3A%22httPstacussatu%22%7D%2C%7B%22x%22%3A436.34912%2C%22y%22%3A98.391846%2C%22width%22%3A163.01277999999996%2C%22height%22%3A20.095513999999994%2C%22text%22%3A%22Coilections%22%7D%2C%7B%22x%22%3A80.99618%2C%22y%22%3A99.12141%2C%22width%22%3A154.23122%2C%22height%22%3A21.659930000000003%2C%22text%22%3A%22Mapsstring%2C%22%7D%2C%7B%22x%22%3A210.3583%2C%22y%22%3A99.424355%2C%22width%22%3A114.09027999999998%2C%22height%22%3A19.840594999999993%2C%22text%22%3A%22%2Cobject%3E%22%7D%2C%7B%22x%22%3A343.8524%2C%22y%22%3A100.34762%2C%22width%22%3A64.34496000000001%2C%22height%22%3A17.472379999999987%2C%22text%22%3A%22model%22%7D%2C%7B%22x%22%3A200.67792%2C%22y%22%3A122.771454%2C%22width%22%3A1018.9030799999999%2C%22height%22%3A25.168915999999996%2C%22text%22%3A%22MMODIFIABLMAEOAttrbuTeSCeqUeSTEAttbutOptionSqUeSTM%22%7D%2C%7B%22x%22%3A80.19761%2C%22y%22%3A152.3441%2C%22width%22%3A457.87093%2C%22height%22%3A25.744280000000003%2C%22text%22%3A%22response.setstatus(status.value)%3B%22%7D%2C%7B%22x%22%3A79.30858%2C%22y%22%3A181.79686%2C%22width%22%3A339.63908%2C%22height%22%3A20.027719999999988%2C%22text%22%3A%22ModeiAndviewmodeiAndview%22%7D%2C%7B%22x%22%3A436.39795%2C%22y%22%3A183.32224%2C%22width%22%3A564.02505%2C%22height%22%3A19.950890000000015%2C%22text%22%3A%22resolveErrorViewrequest%2Cresponse%2Cstatus%22%7D%2C%7B%22x%22%3A1147.6099%2C%22y%22%3A208.52193%2C%22width%22%3A77.96160000000009%2C%22height%22%3A20.607010000000002%2C%22text%22%3A%22mode1)%22%7D%2C%7B%22x%22%3A391.6111%2C%22y%22%3A208.82077%2C%22width%22%3A53.66922999999997%2C%22height%22%3A20.516159999999985%2C%22text%22%3A%22nu11%22%7D%2C%7B%22x%22%3A489.517%2C%22y%22%3A210.67926%2C%22width%22%3A434.4476%2C%22height%22%3A18.84868%2C%22text%22%3A%22modelAndview%3AnewModelAndviewV%22%7D%2C%7B%22x%22%3A875.5159%2C%22y%22%3A210.17929%2C%22width%22%3A136.48310000000004%2C%22height%22%3A19.33141999999998%2C%22text%22%3A%22ewviewName%22%7D%2C%7B%22x%22%3A81.19465%2C%22y%22%3A210.9646%2C%22width%22%3A262.62194999999997%2C%22height%22%3A20.323750000000018%2C%22text%22%3A%22return(modelAndvieW%22%7D%2C%7B%22x%22%3A1049.0508%2C%22y%22%3A213.2137%2C%22width%22%3A65.87079999999992%2C%22height%22%3A15.485800000000012%2C%22text%22%3A%22error%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%40RequestMapping(Produces%20MEdiaType.TEXTHTMLVALUE)%20errorhtmi(HttpservletReguestregues%20pubiicModeiAndview%20HttpsservletResponseresponse)%20streguesT%20httPstacussatu%20Coilections%20Mapsstring%2C%20%2Cobject%3E%20model%20MMODIFIABLMAEOAttrbuTeSCeqUeSTEAttbutOptionSqUeSTM%20response.setstatus(status.value)%3B%20ModeiAndviewmodeiAndview%20resolveErrorViewrequest%2Cresponse%2Cstatus%20mode1)%20nu11%20modelAndview%3AnewModelAndviewV%20ewviewName%20return(modelAndvieW%20error%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A617.5%2C%22height%22%3A144%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606043904074-50b7f088-2d2b-4da5-85e2-0a756da74dca.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="144px"> 错误页</span></p>
<h4><strong>4、小结：error的错误处理</strong></h4>
<p>　　看上面的源码肯定是会很头大，这里就精简一些说一说我们在项目中该如何使用error定制错误：</p>
<p><span style="background-color: rgba(255, 255, 0, 1)"><strong>1.自定义4xx.html&nbsp; 跟5xxhtml</strong></span></p>
<p>　　因为在springboot底层，比如我们请求一个地址，它找不到肯定是报404错误，但是如果你有可能是402，403错误呢，那么springboot就不会走精确匹配，就会给你报一个默认的错误页面、</p>
<p>所以我们想4开头的错误就放在4xx页面中：</p>
<p>发送请求：<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331164406381-2099943654.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>&nbsp;错误页面<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331164423872-2110405340.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>拿到对应的错误数据（状态码、错误信息）<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331164544669-1874173546.png" alt="" loading="lazy"></p>
<p>测试，比一个大屏的error数字界面友好<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331164733654-1251934177.png" alt="" loading="lazy"></p>
<p><span style="background-color: rgba(255, 255, 0, 1)"><strong>2、@ControllerAdvice+@ExceptionHandler处理全局异常</strong></span></p>
<p>&nbsp;写一个类，用来处理整个系统的异常：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.exception;
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> 
<span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> lombok.extern.slf4j.Slf4j;
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.bind.annotation.ControllerAdvice;
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.bind.annotation.ExceptionHandler;
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> 
<span style="color: rgba(0, 128, 128, 1)"> 7</span> <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 128, 0, 1)"> * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 128, 0, 1)"> * @date 2021/3/31 16:50
</span><span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 128, 0, 1)"> * 处理MVC的全局异常
</span><span style="color: rgba(0, 128, 128, 1)">11</span>  <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)">12</span> 
<span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">@Slf4j
</span><span style="color: rgba(0, 128, 128, 1)">14</span> @ControllerAdvice <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 实际上是一个组件，被增强</span>
<span style="color: rgba(0, 128, 128, 1)">15</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> HandlingGlobalExceptions {
</span><span style="color: rgba(0, 128, 128, 1)">16</span>     <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)">17</span> <span style="color: rgba(0, 128, 0, 1)">     * 在请求中有可能不止一个出现错误，我们写个方法用来处理错误
</span><span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 128, 0, 1)">     * 处理数学错误
</span><span style="color: rgba(0, 128, 128, 1)">19</span>      <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)">20</span>     @ExceptionHandler({ArithmeticException.<span style="color: rgba(0, 0, 255, 1)">class</span>, NullPointerException.<span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)">})
</span><span style="color: rgba(0, 128, 128, 1)">21</span>     <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> String handlerArithmeticException(Exception exc) {
</span><span style="color: rgba(0, 128, 128, 1)">22</span>         log.error("捕获到的异常是："<span style="color: rgba(0, 0, 0, 1)">, exc);
</span><span style="color: rgba(0, 128, 128, 1)">23</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 视图地址(如果发生了数学运算异常，跟空指针异常，就会跳转到视图地址)</span>
<span style="color: rgba(0, 128, 128, 1)">24</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> "login"<span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">25</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">26</span> }</pre>
</div>
<p><span style="background-color: rgba(255, 255, 0, 1)"><strong>3、@ResponseStatus+自定义异常<br></strong></span></p>
<p>请求页面</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331173622673-1802754155.png" alt="" loading="lazy"></p>
<p>准备一个自定义的异常类</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.exception;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.http.HttpStatus;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.bind.annotation.ResponseStatus;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
 * @date 2021/3/31 16:32<br></span></pre>
<pre>HttpStatus.FORBIDDEN：表示请求的状态码</pre>
<pre><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)"> @ResponseStatus(value </span>= HttpStatus.FORBIDDEN, reason = "用户数量超出异常"<span style="color: rgba(0, 0, 0, 1)">) </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> UserExceededException <span style="color: rgba(0, 0, 255, 1)">extends</span><span style="color: rgba(0, 0, 0, 1)"> RuntimeException { </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> UserExceededException() { } </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> UserExceededException(String message) { </span><span style="color: rgba(0, 0, 255, 1)">super</span><span style="color: rgba(0, 0, 0, 1)">(message); } }</span></pre>
</div>
<p>测试：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331173713878-1916149869.png" alt="" loading="lazy"></p>
<p><span style="background-color: rgba(255, 255, 0, 1)"><strong>4、使用架底层使用的错误处理机制自定义处理</strong></span>&nbsp;</p>
<p><strong>　　<span style="background-color: rgba(255, 255, 0, 1)">注意：</span></strong>自定义的这个处理error的错误是最高的，无论出了什么错误总是会走这个异常处理，而并不会走上面定义的一些异常处理~</p>
<p>实现底层框架接口：HandlerExceptionResolver。进行异常的处理</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.exception;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.core.Ordered;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.core.annotation.Order;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.stereotype.Component;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.servlet.HandlerExceptionResolver;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.servlet.ModelAndView;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServletRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServletResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> java.io.IOException;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
 * @date 2021/3/31 17:52
 * 自定义异常，实现框架底层接口
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@Order(value </span>= Ordered.HIGHEST_PRECEDENCE) <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 设置优先级的等级最高</span>
<span style="color: rgba(0, 0, 0, 1)">@Component
</span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> DiyException <span style="color: rgba(0, 0, 255, 1)">implements</span><span style="color: rgba(0, 0, 0, 1)"> HandlerExceptionResolver {
    @Override
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
        </span><span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)"> {
            </span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
             * 参数：
             * sc –错误状态代码
             * msg –描述性消息
             </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
            response.sendError(</span>521, "这是一个喜欢你的自定义异常"<span style="color: rgba(0, 0, 0, 1)">);
        } </span><span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (IOException e) {
            e.printStackTrace();
        }
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ModelAndView();
    }
}</span></pre>
</div>
<p>5xx.html页面设置取值：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331180326665-10558822.png" alt="" loading="lazy"></p>
<p>测试：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331180316454-1770780450.png" alt="" loading="lazy"></p>
<h3>8、web原生组件注入（servlet、filter、listener）<a title="9、Web原生组件注入（Servlet、Filter、Listener）" href="https://www.yuque.com/atguigu/springboot/vgzmgh#xnb02"><br></a></h3>
<h4 id="gmHIT" data-lake-id="5b9db5c6d8fda91fab13b914e4be91e3" data-wording="true">8.1.使用Servlet API</h4>
<p data-lake-id="6150d82b3b7161ed0a0686dcd4f25a38" data-wording="true">@ServletComponentScan(basePackages = <strong>"com.atguigu.admin"</strong>) :指定原生Servlet组件都放在那里</p>
<p data-lake-id="8c4397482378a9baa52533b737b6e266" data-wording="true">@WebServlet(urlPatterns = <strong>"/my"</strong>)：效果：直接响应，<strong>没有经过Spring的拦截器？</strong></p>
<p data-lake-id="110ee32fd9c97e54ad4476348424f894" data-wording="true">@WebFilter(urlPatterns={<strong>"/css/*"</strong>,<strong>"/images/*"</strong>})</p>
<p data-lake-id="3479680452980752a11dd0382e09b847" data-wording="true">@WebListener</p>
<p data-lake-id="6ba259c2727b6c6f71aa7fdb1224e8ea" data-wording="true"><strong><span style="background-color: rgba(255, 255, 0, 1)">推荐可以这种方式（以下为简单示例）；</span></strong></p>
<p data-lake-id="6ba259c2727b6c6f71aa7fdb1224e8ea" data-wording="true">servlet:</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_5bf29469-d2ff-49f2-9ea4-a4934970b70b" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_5bf29469-d2ff-49f2-9ea4-a4934970b70b" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_5bf29469-d2ff-49f2-9ea4-a4934970b70b" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.servlet;
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> 
<span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.ServletException;
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.annotation.WebServlet;
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServlet;
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServletRequest;
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServletResponse;
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> java.io.IOException;
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> 
<span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 128, 0, 1)"> * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
</span><span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 128, 0, 1)"> * @date 2021/3/31 19:46
</span><span style="color: rgba(0, 128, 128, 1)">13</span>  <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)">14</span> @WebServlet("/wel"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">15</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> MyServlet <span style="color: rgba(0, 0, 255, 1)">extends</span><span style="color: rgba(0, 0, 0, 1)"> HttpServlet {
</span><span style="color: rgba(0, 128, 128, 1)">16</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">17</span>     <span style="color: rgba(0, 0, 255, 1)">protected</span> <span style="color: rgba(0, 0, 255, 1)">void</span> doGet(HttpServletRequest req, HttpServletResponse resp) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> ServletException, IOException {
</span><span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 0, 1)">        doPost(req, resp);
</span><span style="color: rgba(0, 128, 128, 1)">19</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">20</span> 
<span style="color: rgba(0, 128, 128, 1)">21</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">22</span>     <span style="color: rgba(0, 0, 255, 1)">protected</span> <span style="color: rgba(0, 0, 255, 1)">void</span> doPost(HttpServletRequest request, HttpServletResponse response) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> ServletException, IOException {
</span><span style="color: rgba(0, 128, 128, 1)">23</span>         request.setCharacterEncoding("utf-8"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">24</span>         response.setContentType("text/html;charset=UTF-8"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">25</span>         response.getWriter().write("你好啊！"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">26</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">27</span> }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p data-lake-id="6ba259c2727b6c6f71aa7fdb1224e8ea" data-wording="true">filter：过滤静态资源等</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_43cf0484-284b-44da-85f1-0dc520dd37de" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_43cf0484-284b-44da-85f1-0dc520dd37de" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_43cf0484-284b-44da-85f1-0dc520dd37de" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.servlet;
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> 
<span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 255, 1)">import</span> javax.servlet.*<span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.annotation.WebFilter;
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> java.io.IOException;
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> 
<span style="color: rgba(0, 128, 128, 1)"> 7</span> <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 128, 0, 1)"> * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 128, 0, 1)"> * @date 2021/3/31 20:02
</span><span style="color: rgba(0, 128, 128, 1)">10</span>  <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 拦截静态资源</span>
<span style="color: rgba(0, 128, 128, 1)">12</span> @WebFilter(urlPatterns = {"/css/*", "/images/*"<span style="color: rgba(0, 0, 0, 1)">})
</span><span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> MyFilter <span style="color: rgba(0, 0, 255, 1)">implements</span><span style="color: rgba(0, 0, 0, 1)"> Filter {
</span><span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">15</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span> init(FilterConfig filterConfig) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> ServletException {
</span><span style="color: rgba(0, 128, 128, 1)">16</span>         System.out.println("过滤器初始化"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">17</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">18</span> 
<span style="color: rgba(0, 128, 128, 1)">19</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">20</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span> doFilter(ServletRequest request, ServletResponse response, FilterChain chain) <span style="color: rgba(0, 0, 255, 1)">throws</span><span style="color: rgba(0, 0, 0, 1)"> IOException, ServletException {
</span><span style="color: rgba(0, 128, 128, 1)">21</span>         System.out.println("过滤器工作"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 0, 1)">        chain.doFilter(request, response);
</span><span style="color: rgba(0, 128, 128, 1)">23</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">24</span> 
<span style="color: rgba(0, 128, 128, 1)">25</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">26</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> destroy() {
</span><span style="color: rgba(0, 128, 128, 1)">27</span>         System.out.println("过滤器销毁"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">28</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">29</span> }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p data-lake-id="6ba259c2727b6c6f71aa7fdb1224e8ea" data-wording="true">listener：监听器</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_2b33a057-f1dc-4162-b86e-9cc9762e76c3" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_2b33a057-f1dc-4162-b86e-9cc9762e76c3" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_2b33a057-f1dc-4162-b86e-9cc9762e76c3" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.servlet;
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> 
<span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.ServletContextEvent;
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.ServletContextListener;
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.annotation.WebListener;
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> 
<span style="color: rgba(0, 128, 128, 1)"> 7</span> <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 128, 0, 1)"> * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 128, 0, 1)"> * @date 2021/3/31 20:07
</span><span style="color: rgba(0, 128, 128, 1)">10</span>  <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 0, 0, 1)">@WebListener
</span><span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> MyListener <span style="color: rgba(0, 0, 255, 1)">implements</span><span style="color: rgba(0, 0, 0, 1)"> ServletContextListener {
</span><span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">14</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> contextInitialized(ServletContextEvent sce) {
</span><span style="color: rgba(0, 128, 128, 1)">15</span>         System.out.println("监听到项目初始化完成"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">16</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">17</span> 
<span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">19</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> contextDestroyed(ServletContextEvent sce) {
</span><span style="color: rgba(0, 128, 128, 1)">20</span>         System.out.println("监听到项目初始化销毁"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">21</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">22</span> }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p data-lake-id="6ba259c2727b6c6f71aa7fdb1224e8ea" data-wording="true">主启动类进行扫描servlet组件：</p>
<p data-lake-id="6ba259c2727b6c6f71aa7fdb1224e8ea" data-wording="true"><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331195530495-1848029601.png" alt="" loading="lazy"></p>
<p><strong>测试：</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331201445065-2062766637.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>&nbsp;<img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331201545493-1863779450.png" alt="" loading="lazy"></p>
<hr>
<p data-lake-id="6ba259c2727b6c6f71aa7fdb1224e8ea" data-wording="true">&nbsp;扩展：DispatchServlet 如何注册进来</p>
<ul data-lake-id="bdde3eae7e16c4b15c4a733408f78ba5">
<li data-lake-id="c92e01f4af21ea04d6e173118787361c" data-wording="true">容器中自动配置了 &nbsp;DispatcherServlet &nbsp;属性绑定到 WebMvcProperties；对应的配置文件配置项是 <strong>spring.mvc。</strong></li>
<li data-lake-id="494ecfd7b3bdd6da35d7e9a448d81556" data-wording="true"><strong>通过 </strong><strong>ServletRegistrationBean</strong>&lt;DispatcherServlet&gt; 把 DispatcherServlet &nbsp;配置进来。</li>
<li data-lake-id="da5764cb77ea01f2ccfbed28dedd56d8" data-wording="true">默认映射的是 / 路径。</li>
</ul>
<p data-lake-id="8ccdd70e0c2045e50cd88b38436c1375" data-wording="true">Tomcat-Servlet；</p>
<p data-lake-id="c623df871bee068b7f17cedb7807df38" data-wording="true">多个Servlet都能处理到同一层路径，精确优选原则</p>
<p data-lake-id="a073829ac484006709fb1cf43d8c7fd2" data-wording="true">A： /my/</p>
<p data-lake-id="238a4ad6494084264e3c4fda80d59725" data-wording="true">B： /my/1</p>
<h4 id="gxb71" data-lake-id="5d9f881ce1252e6639aff72c98e36da8" data-wording="true">8.2、使用RegistrationBean</h4>
<p data-lake-id="5d9f881ce1252e6639aff72c98e36da8" data-wording="true"><code>ServletRegistrationBean</code><span class="lake-fontsize-12">,</span></p>
<p data-lake-id="5d9f881ce1252e6639aff72c98e36da8" data-wording="true"><span class="lake-fontsize-12"> <code>FilterRegistrationBean</code><span class="lake-fontsize-12">, and </span></span></p>
<p data-lake-id="5d9f881ce1252e6639aff72c98e36da8" data-wording="true"><span class="lake-fontsize-12"><span class="lake-fontsize-12"><code>ServletListenerRegistrationBean</code></span></span></p>
<p data-lake-id="5d9f881ce1252e6639aff72c98e36da8" data-wording="true"><span class="lake-fontsize-12"><span class="lake-fontsize-12">把刚刚创建的servlet、filter、listener上面的注解都删除，来测试使用ReistrationBean的方式</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.config;
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> 
<span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.servlet.MyFilter;
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.servlet.MyListener;
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.servlet.MyServlet;
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.web.servlet.FilterRegistrationBean;
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.web.servlet.ServletListenerRegistrationBean;
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.web.servlet.ServletRegistrationBean;
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.context.annotation.Bean;
</span><span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.context.annotation.Configuration;
</span><span style="color: rgba(0, 128, 128, 1)">11</span> 
<span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> java.util.Arrays;
</span><span style="color: rgba(0, 128, 128, 1)">13</span> 
<span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)">15</span> <span style="color: rgba(0, 128, 0, 1)"> * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
</span><span style="color: rgba(0, 128, 128, 1)">16</span> <span style="color: rgba(0, 128, 0, 1)"> * @date 2021/3/31 20:19
</span><span style="color: rgba(0, 128, 128, 1)">17</span>  <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 0, 1)">@Configuration
</span><span style="color: rgba(0, 128, 128, 1)">19</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> MyRegistration {
</span><span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">    @Bean
</span><span style="color: rgba(0, 128, 128, 1)">21</span>     <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> ServletRegistrationBean myServlet() {
</span><span style="color: rgba(0, 128, 128, 1)">22</span>         MyServlet myServlet = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> MyServlet();
</span><span style="color: rgba(0, 128, 128, 1)">23</span> 
<span style="color: rgba(0, 128, 128, 1)">24</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 参数1：创建一个新的实例、参数2：被映射的URL</span>
<span style="color: rgba(0, 128, 128, 1)">25</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">new</span> ServletRegistrationBean(myServlet, "/my", "/my02"<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">26</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">27</span> 
<span style="color: rgba(0, 128, 128, 1)">28</span> 
<span style="color: rgba(0, 128, 128, 1)">29</span> <span style="color: rgba(0, 0, 0, 1)">    @Bean
</span><span style="color: rgba(0, 128, 128, 1)">30</span>     <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> FilterRegistrationBean myFilter() {
</span><span style="color: rgba(0, 128, 128, 1)">31</span> 
<span style="color: rgba(0, 128, 128, 1)">32</span>         MyFilter myFilter = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> MyFilter();
</span><span style="color: rgba(0, 128, 128, 1)">33</span>         FilterRegistrationBean filterRegistrationBean = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> FilterRegistrationBean(myFilter);
</span><span style="color: rgba(0, 128, 128, 1)">34</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 设置过滤请求的资源</span>
<span style="color: rgba(0, 128, 128, 1)">35</span>         filterRegistrationBean.setUrlPatterns(Arrays.asList("/my", "/css/*"<span style="color: rgba(0, 0, 0, 1)">));
</span><span style="color: rgba(0, 128, 128, 1)">36</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> filterRegistrationBean;
</span><span style="color: rgba(0, 128, 128, 1)">37</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">38</span> 
<span style="color: rgba(0, 128, 128, 1)">39</span> <span style="color: rgba(0, 0, 0, 1)">    @Bean
</span><span style="color: rgba(0, 128, 128, 1)">40</span>     <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> ServletListenerRegistrationBean myListener() {
</span><span style="color: rgba(0, 128, 128, 1)">41</span>         MyListener MyListener = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> MyListener();
</span><span style="color: rgba(0, 128, 128, 1)">42</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ServletListenerRegistrationBean(MyListener);
</span><span style="color: rgba(0, 128, 128, 1)">43</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">44</span> }</pre>
</div>
<p><strong>测试：</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202103/2126720-20210331202602538-674718939.png" alt="" loading="lazy"></p>
<h3 id="ED2gi" data-lake-id="fbc0c468a12be5f5ba859c3633db17e1" data-wording="true">9、嵌入式Servlet容器</h3>
<h4 id="lNYl3" data-lake-id="a28084e9bd4057bb3ec759756da36e00" data-wording="true">1、切换嵌入式Servlet容器</h4>
<ul data-lake-id="b1eee880d3bf6180febfbf3f1c688deb">
<li data-lake-id="5f7aad3c1e5bf16e2939868b771cfba9" data-wording="true">默认支持的webServer</li>
</ul>
<ul data-lake-id="96f870fecdc36c16b1c4e4975e3a308d">
<ul data-lake-id="69e3d24d020a46fbe0fc5039f5855e99">
<li data-lake-id="4162edb6d3fe26933f9a20375d3514e7" data-wording="true"><strong><code>Tomcat</code><span class="lake-fontsize-12">, <code>Jetty</code><span class="lake-fontsize-12">, or <code>Undertow</code></span></span></strong></li>
<li data-lake-id="8d79fdda532c7d43ceb2e32a0732e272" data-wording="true"><strong><code>ServletWebServerApplicationContext 容器启动寻找ServletWebServerFactory 并引导创建服务器</code></strong></li>
</ul>
</ul>
<ul data-lake-id="aaf6c4312d10b1a29669c95f86617fb2">
<li data-lake-id="e442bdfe5c31c9b889af56ed58c7b753" data-wording="true">切换服务器</li>
</ul>
<p data-lake-id="2e399e73b6ec4ff024dc37708994bdf5" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606280937533-504d0889-b893-4a01-af68-2fc31ffce9fc.png%22%2C%22originWidth%22%3A917%2C%22originHeight%22%3A133%2C%22name%22%3A%22image.png%22%2C%22size%22%3A25711%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A47.639503%2C%22y%22%3A8.536017%2C%22width%22%3A778.148597%2C%22height%22%3A21.528396%2C%22text%22%3A%22Jettywebserver(org.springframework.boot.wemedet%22%7D%2C%7B%22x%22%3A46.33409%2C%22y%22%3A40.34161%2C%22width%22%3A185.09438%2C%22height%22%3A20.533268%2C%22text%22%3A%22Nettywebserver%22%7D%2C%7B%22x%22%3A245.14214%2C%22y%22%3A41.394814%2C%22width%22%3A581.01429%2C%22height%22%3A20.973626000000003%2C%22text%22%3A%22org.springframework.bootwembedednt)%22%7D%2C%7B%22x%22%3A-3.409701%2C%22y%22%3A47.641773%2C%22width%22%3A19.950744999999998%2C%22height%22%3A19.950744999999998%2C%22text%22%3A%22anionjs%3A%22%7D%2C%7B%22x%22%3A256.47742%2C%22y%22%3A71.39959%2C%22width%22%3A594.3866800000001%2C%22height%22%3A22.94225999999999%2C%22text%22%3A%22(org.springframework.boot.web.embedded.tomcat)%22%7D%2C%7B%22x%22%3A45.837547%2C%22y%22%3A72.725426%2C%22width%22%3A196.480213%2C%22height%22%3A19.172244000000006%2C%22text%22%3A%22TOmcatWebserver%22%7D%2C%7B%22x%22%3A46.28594%2C%22y%22%3A105.35644%2C%22width%22%3A857.7516%2C%22height%22%3A20.14049%2C%22text%22%3A%22undertowebseryerorg.springframework.boom%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22Jettywebserver(org.springframework.boot.wemedet%20Nettywebserver%20org.springframework.bootwembedednt)%20anionjs%3A%20(org.springframework.boot.web.embedded.tomcat)%20TOmcatWebserver%20undertowebseryerorg.springframework.boom%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A458.5%2C%22height%22%3A67%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606280937533-504d0889-b893-4a01-af68-2fc31ffce9fc.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="67px"></span></p>
<p data-lake-id="2e399e73b6ec4ff024dc37708994bdf5" data-wording="true">禁用tomcat启动器，以及可以在<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot">https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot</a></p>
<p data-lake-id="2e399e73b6ec4ff024dc37708994bdf5" data-wording="true">找到其他的启动器进行使用，不过不建议更改服务容器。了解一下即可！</p>
<div id="DyWf7" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22xml%22%2C%22code%22%3A%22%3Cdependency%3E%5Cn%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%5Cn%20%20%20%20%3CartifactId%3Espring-boot-starter-web%3C%2FartifactId%3E%5Cn%20%20%20%20%3Cexclusions%3E%5Cn%20%20%20%20%20%20%20%20%3Cexclusion%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-tomcat%3C%2FartifactId%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fexclusion%3E%5Cn%20%20%20%20%3C%2Fexclusions%3E%5Cn%3C%2Fdependency%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22DyWf7%22%7D" data-language="xml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">dependency</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">groupId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>org.springframework.boot<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">groupId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">artifactId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>spring-boot-starter-web<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">artifactId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">exclusions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">exclusion</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">groupId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>org.springframework.boot<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">groupId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">artifactId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>spring-boot-starter-tomcat<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">artifactId</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">exclusion</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">exclusions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">dependency</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
</div>
</div>
</div>
<ul data-lake-id="2196bbe034557c096ada973cc495ec89">
<li data-lake-id="754b35ba15f6dcc0f1cb1d5ea3748f5e" data-wording="true">原理</li>
</ul>
<ul data-lake-id="9d290e2973058630b91d60a8e584a022">
<ul data-lake-id="9f87c5f2f26b33125ac3c35f963e48bd">
<li data-lake-id="cdbbdb14596225a30d65690bf49cc103" data-wording="true">SpringBoot应用启动发现当前是Web应用。web场景包-导入tomcat</li>
<li data-lake-id="f40294749d53d621c674d38b33ae1f00" data-wording="true">web应用会创建一个web版的ioc容器 <code>ServletWebServerApplicationContext</code><span class="lake-fontsize-12">&nbsp;</span></li>
<li data-lake-id="931a1f8e5b448ea7c892b8d9317344f3" data-wording="true"><code>ServletWebServerApplicationContext</code><span class="lake-fontsize-12"> &nbsp;启动的时候寻找 <strong><code>ServletWebServerFactory</code></strong><code>（Servlet 的web服务器工厂---&gt; Servlet 的web服务器）</code><span class="lake-fontsize-12"> &nbsp;</span></span></li>
<li data-lake-id="eb4ad4ecb165c1c7adf0797866a77ad5" data-wording="true"><span class="lake-fontsize-12">SpringBoot底层默认有很多的WebServer工厂；<code>TomcatServletWebServerFactory</code><span class="lake-fontsize-12">, <code>JettyServletWebServerFactory</code><span class="lake-fontsize-12">, or <code>UndertowServletWebServerFactory</code></span></span></span></li>
<li data-lake-id="65aad9b6cf5545560c0f7f6dcd67adb4" data-wording="true"><code>底层直接会有一个自动配置类。ServletWebServerFactoryAutoConfiguration</code></li>
<li data-lake-id="1af7890ea8f087a7cb9e1904c7552076" data-wording="true"><code>ServletWebServerFactoryAutoConfiguration导入了ServletWebServerFactoryConfiguration（配置类）</code></li>
<li data-lake-id="b9f8a5b41fc9b52fdee471f96ace3634" data-wording="true"><code>ServletWebServerFactoryConfiguration 配置类 根据动态判断系统中到底导入了那个Web服务器的包。（默认是web-starter导入tomcat包），容器中就有 TomcatServletWebServerFactory</code></li>
<li data-lake-id="88e76b3c09e6974ee05dca396031f206" data-wording="true"><code>TomcatServletWebServerFactory 创建出Tomcat服务器并启动；TomcatWebServer 的构造器拥有初始化方法initialize---this.tomcat.start();</code></li>
<li data-lake-id="3e5d5c498771e4bc0c8522cb0044dcde" data-wording="true"><code>内嵌服务器，就是手动把启动服务器的代码调用（tomcat核心jar包存在）</code></li>
</ul>
</ul>
<h4 id="RlJkN" data-lake-id="bd28f511bf336a5dcfd9d088532f6785" data-wording="true">2、定制Servlet容器</h4>
<ul data-lake-id="1d930ebdfcb006c4b9b530f32c51a523">
<li data-lake-id="4b05fdbc7f5a2b81ed3e4a4627f93dd8" data-wording="true">实现 <span class="lake-fontsize-10"> <strong>WebServerFactoryCu</strong>stomizer&lt;ConfigurableServletWebServerFactory&gt; </span></li>
</ul>
<ul data-lake-id="68ce0e38c8f681f7471cde39406e86d7">
<ul data-lake-id="82233b67f5ca7afd1c959b9209026310">
<li data-lake-id="b4476c0dbe3ab4becc9e569b40dc341d" data-wording="true">把配置文件的值和<strong><code>ServletWebServerFactory 进行绑定</code></strong></li>
</ul>
</ul>
<ul data-lake-id="16fda4e7b137ac23d9debddc8cbcef16">
<li data-lake-id="2fe301826c470018fb16c2117b9f95bd" data-wording="true">修改配置文件 <strong>server.xxx</strong></li>
<li data-lake-id="de28aaacd55a60c9447c6ac60dfa719b" data-wording="true">直接自定义 <strong>ConfigurableServletWebServerFactory</strong></li>
</ul>
<p data-lake-id="eddf82e2eb29d44f34c1b7f23bc2a7e4" data-wording="true"><strong>xxxxx</strong><strong>Customizer</strong><strong>：定制化器，可以改变xxxx的默认规则</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.web.server.WebServerFactoryCustomizer;
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.web.servlet.server.ConfigurableServletWebServerFactory;
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.stereotype.Component;
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> 
<span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 0, 1)">@Component
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> CustomizationBean <span style="color: rgba(0, 0, 255, 1)">implements</span> WebServerFactoryCustomizer&lt;ConfigurableServletWebServerFactory&gt;<span style="color: rgba(0, 0, 0, 1)"> {
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span> 
<span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> customize(ConfigurableServletWebServerFactory server) {
</span><span style="color: rgba(0, 128, 128, 1)">10</span>         server.setPort(9000<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">12</span> }</pre>
</div>
<h3 id="cQant" data-lake-id="c615d509a3fce808b826147892659f53" data-wording="true">10、定制化原理</h3>
<h4 id="eSDgT" data-lake-id="48213aa4ef9e77c8a29351618451d59b" data-wording="true">1、定制化的常见方式</h4>
<ul data-lake-id="c9769e375a867ed7b51ba233231a992f">
<li data-lake-id="a45002a8faf6a34477ef1a13730d35cb" data-wording="true"><strong>1.修改配置文件；</strong></li>
<li data-lake-id="58a9a8f537919bc449f3f5263bbfffeb" data-wording="true"><strong>xxxxxCustomizer；</strong></li>
<li data-lake-id="cd422c36a3e917b2cee51df9092ec31f" data-wording="true"><strong>2.编写自定义的配置类&nbsp; &nbsp;加上<span style="background-color: rgba(255, 255, 0, 1)">@Configuration；+ </span></strong><strong><span style="background-color: rgba(255, 255, 0, 1)">@Bean替换</span>、增加容器中默认组件；视图解析器 </strong></li>
<li data-lake-id="7d5d91dbf02f3e619b1fa46bc42c3186" data-wording="true"><strong>3.Web应用 编写一个配置类实现<span style="background-color: rgba(255, 255, 0, 1)"> WebMvcConfigurer</span>&nbsp;,即可定制化web功能；+ <span style="background-color: rgba(255, 255, 0, 1)">@Bean给容器中再扩展一些组件</span></strong></li>
</ul>
<div id="HMbRQ" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%40Configuration%5Cnpublic%20class%20AdminWebConfig%20implements%20WebMvcConfigurer%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22HMbRQ%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-meta">@Configuration
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-keyword">public <span class="cm-keyword">class <span class="cm-def">AdminWebConfig <span class="cm-keyword">implements <span class="cm-variable">WebMvcConfigurer</span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<ul data-lake-id="51f5059371acfc0dd62b2ecabc91b3ae">
<li data-lake-id="57b57e92519c04bd2409cc56bd7045af" data-wording="true"><span class="lake-fontsize-11">@EnableWebMvc + WebMvcConfigurer —— @Bean<span class="lake-fontsize-11"> &nbsp;<span class="lake-fontsize-12">可以全面接管SpringMVC，所有规则全部自己重新配置； 实现定制和扩展功能</span></span></span></li>
</ul>
<ul data-lake-id="f06d094549689e33bdedd34ba7258f0d">
<ul data-lake-id="c92bc6f26c81cf80b9da8c701e683979">
<li data-lake-id="7462654effd43e75275a0b56f76b288a" data-wording="true">原理</li>
<li data-lake-id="43bacee7eb69946cad71f4859ffe655d" data-wording="true">1、WebMvcAutoConfiguration &nbsp;默认的SpringMVC的自动配置功能类。静态资源、欢迎页.....</li>
<li data-lake-id="dbdbac71c8c311ebed90144549e334d2" data-wording="true">2、一旦使用 @EnableWebMvc 、。会 @Import(DelegatingWebMvcConfiguration.<strong>class</strong>)</li>
<li data-lake-id="30ad2b16147d064f442f1a14a047139b" data-wording="true">3、<strong>DelegatingWebMvcConfiguration</strong> 的 作用，只保证SpringMVC最基本的使用</li>
</ul>
</ul>
<ul data-lake-id="eeda4c9f6676cc2fac37a40f44f2cfab">
<ul data-lake-id="a44a9d81364a9f016c74e923e1ee0a2a">
<ul data-lake-id="e44d60a232598f074cafa680d32dc59e">
<li data-lake-id="33675cc14faba5191ecbd7d43ca50f83" data-wording="true">把所有系统中的 WebMvcConfigurer 拿过来。所有功能的定制都是这些 WebMvcConfigurer &nbsp;合起来一起生效</li>
<li data-lake-id="d9070255cbe0d1312954b75b4264c7fe" data-wording="true">自动配置了一些非常底层的组件。<strong>RequestMappingHandlerMapping</strong>、这些组件依赖的组件都是从容器中获取</li>
<li data-lake-id="688215ff7e5e2f73220c764896c17761" data-wording="true"><strong>public class </strong>DelegatingWebMvcConfiguration <strong>extends </strong><strong>WebMvcConfigurationSupport</strong></li>
</ul>
</ul>
</ul>
<ul data-lake-id="83706ec5819e67e4202d8194f0d57885">
<ul data-lake-id="f70727c75eff77cf924921aceb374c99">
<li data-lake-id="cc205f2287d026404e9f6d3522411682" data-wording="true">4、<strong>WebMvcAutoConfiguration </strong>里面的配置要能生效 必须 &nbsp;@ConditionalOnMissingBean(<strong>WebMvcConfigurationSupport</strong>.<strong>class</strong>)</li>
<li data-lake-id="63f455ecd9e8abc636e0d011c02ffa95" data-wording="true">5、@EnableWebMvc &nbsp;导致了 <strong>WebMvcAutoConfiguration &nbsp;没有生效。</strong></li>
</ul>
</ul>
<ul data-lake-id="b2614a823934a763b9de230c471a6156">
<li data-lake-id="e02ac6fa456a61c6db03dd5b8e3ba19c" data-wording="true">... ...</li>
</ul>
<h4 id="GH9jB" data-lake-id="0f4c6f159bdc978e32779fd6559aa2c9" data-wording="true">2、原理分析套路</h4>
<p data-lake-id="1c7265411f7394f4c96b6ac8ca0d4c58" data-wording="true"><strong>场景<span style="background-color: rgba(255, 255, 0, 1)">starter </span></strong><strong><span style="background-color: rgba(255, 255, 0, 1)">- xxxxAutoConfiguration</span> - 导入xxx组件 -<span style="background-color: rgba(255, 255, 0, 1)"> 绑定xxxProperties</span> -- </strong><strong>绑定配置文件项</strong></p>
<h2 data-lake-id="eddf82e2eb29d44f34c1b7f23bc2a7e4" data-wording="true">三、数据访问</h2>
<h3 id="MFl5r" data-lake-id="42c02b9ee8bab8d4a31c0a8296a60028" data-wording="true">1、数据源的自动配置-<strong>HikariDataSource</strong></h3>
<h4 id="8Bpcc" data-lake-id="7511e2af5f5c17af3d136279a5efcc71" data-wording="true">1、导入JDBC场景</h4>
<div id="VREQ5" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22xml%22%2C%22code%22%3A%22%20%20%20%20%20%20%20%20%3Cdependency%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-data-jdbc%3C%2FartifactId%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%5Cn%20%20%20%20%20%20%20%20%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22VREQ5%22%7D" data-language="xml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
</pre>
</div>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210401155158194-2075487640.png" alt="" loading="lazy"></p>
</div>
</div>
</div>
<p data-lake-id="7bea9a92466b6e3b8f1233524ac977c9" data-wording="true"><strong><span style="background-color: rgba(255, 255, 0, 1)">数据库驱动？</span></strong></p>
<p data-lake-id="e339284fe36ad4e09675ea213bedd8e6" data-wording="true">为什么导入JDBC场景，官方不导入驱动？官方不知道我们接下要操作什么数据库。</p>
<p data-lake-id="df6dbb96e0b2af2cfae0d6028c275117" data-wording="true">数据库版本和驱动版本对应</p>
<div id="G1Fod" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22xml%22%2C%22code%22%3A%22%E9%BB%98%E8%AE%A4%E7%89%88%E6%9C%AC%EF%BC%9A%3Cmysql.version%3E8.0.22%3C%2Fmysql.version%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%3Cdependency%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Emysql%3C%2FgroupId%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Emysql-connector-java%3C%2FartifactId%3E%5Cn%3C!--%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E5.1.49%3C%2Fversion%3E--%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%5Cn%E6%83%B3%E8%A6%81%E4%BF%AE%E6%94%B9%E7%89%88%E6%9C%AC%5Cn1%E3%80%81%E7%9B%B4%E6%8E%A5%E4%BE%9D%E8%B5%96%E5%BC%95%E5%85%A5%E5%85%B7%E4%BD%93%E7%89%88%E6%9C%AC%EF%BC%88maven%E7%9A%84%E5%B0%B1%E8%BF%91%E4%BE%9D%E8%B5%96%E5%8E%9F%E5%88%99%EF%BC%89%5Cn2%E3%80%81%E9%87%8D%E6%96%B0%E5%A3%B0%E6%98%8E%E7%89%88%E6%9C%AC%EF%BC%88maven%E7%9A%84%E5%B1%9E%E6%80%A7%E7%9A%84%E5%B0%B1%E8%BF%91%E4%BC%98%E5%85%88%E5%8E%9F%E5%88%99%EF%BC%89%5Cn%20%20%20%20%3Cproperties%3E%5Cn%20%20%20%20%20%20%20%20%3Cjava.version%3E1.8%3C%2Fjava.version%3E%5Cn%20%20%20%20%20%20%20%20%3Cmysql.version%3E5.1.49%3C%2Fmysql.version%3E%5Cn%20%20%20%20%3C%2Fproperties%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22G1Fod%22%7D" data-language="xml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">默认版本：<span class="cm-tag cm-bracket">&lt;<span class="cm-tag">mysql.version<span class="cm-tag cm-bracket">&gt;8.0.22<span class="cm-tag cm-bracket">&lt;/<span class="cm-tag">mysql.version<span class="cm-tag cm-bracket">&gt;<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-comment"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket">
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">想要修改版本
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">1、直接依赖引入具体版本（maven的就近依赖原则）<br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;"> &lt;!--mysql驱动--&gt;
 &lt;dependency&gt;
     &lt;groupId&gt;mysql&lt;/groupId&gt;
     &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
     &lt;version&gt;5.1.47&lt;/version&gt;
 &lt;/dependency&gt;</pre>
</div>
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-comment"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="cm-tag cm-bracket"><span class="cm-tag"><span class="cm-tag cm-bracket"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">2、重新声明版本（maven的属性的就近优先原则）</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
        &lt;mysql.version&gt;5.1.49&lt;/mysql.version&gt;
    &lt;/properties&gt;</pre>
</div>
<h4 id="8XJ3E" data-lake-id="a4f1092aad258d4584dacadf211172cf" data-wording="true">2、分析自动配置</h4>
<p id="78dlE" data-lake-id="301ee48fcf8fa31ae985d534be4f2183" data-wording="true">1、自动配置的类</p>
<ul data-lake-id="2fd2f1a7e467d9a5d5b73f0cc6e730c1">
<li data-lake-id="a3ad66eaffe85490280ecf495c5fcf77" data-wording="true">DataSourceAutoConfiguration ： 数据源的自动配置</li>
</ul>
<ul data-lake-id="e8981dbfc8424afba58a2897af96b565">
<ul data-lake-id="1b851a6e4674cc0cdd47b7c6c3c499c1">
<li data-lake-id="1a04751390ea464f977c111d3f461036" data-wording="true">修改数据源相关的配置：<strong>spring.datasource</strong></li>
<li data-lake-id="37650cb95f2bb1652c62ac76c406e6d4" data-wording="true"><strong>数据库连接池的配置，是自己容器中没有DataSource才自动配置的</strong></li>
<li data-lake-id="50bf49e12f4068a66ea7e2ec19e2fd21" data-wording="true">底层配置好的连接池是：<strong>HikariDataSource</strong></li>
</ul>
</ul>
<div id="nvVw1" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%5Ct%40Configuration(proxyBeanMethods%20%3D%20false)%5Cn%5Ct%40Conditional(PooledDataSourceCondition.class)%5Cn%5Ct%40ConditionalOnMissingBean(%7B%20DataSource.class%2C%20XADataSource.class%20%7D)%5Cn%5Ct%40Import(%7B%20DataSourceConfiguration.Hikari.class%2C%20DataSourceConfiguration.Tomcat.class%2C%5Cn%5Ct%5Ct%5CtDataSourceConfiguration.Dbcp2.class%2C%20DataSourceConfiguration.OracleUcp.class%2C%5Cn%5Ct%5Ct%5CtDataSourceConfiguration.Generic.class%2C%20DataSourceJmxConfiguration.class%20%7D)%5Cn%5Ctprotected%20static%20class%20PooledDataSourceConfiguration%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22nvVw1%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">    <span class="cm-meta">@Configuration(<span class="cm-variable">proxyBeanMethods <span class="cm-operator">= <span class="cm-atom">false)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">    <span class="cm-meta">@Conditional(<span class="cm-variable">PooledDataSourceCondition.<span class="cm-keyword">class)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">    <span class="cm-meta">@ConditionalOnMissingBean({ <span class="cm-variable">DataSource.<span class="cm-keyword">class, <span class="cm-variable">XADataSource.<span class="cm-keyword">class })
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">    <span class="cm-meta">@Import({ <span class="cm-variable">DataSourceConfiguration.<span class="cm-variable">Hikari.<span class="cm-keyword">class, <span class="cm-variable">DataSourceConfiguration.<span class="cm-variable">Tomcat.<span class="cm-keyword">class,
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">            <span class="cm-variable">DataSourceConfiguration.<span class="cm-variable">Dbcp2.<span class="cm-keyword">class, <span class="cm-variable">DataSourceConfiguration.<span class="cm-variable">OracleUcp.<span class="cm-keyword">class,
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">            <span class="cm-variable">DataSourceConfiguration.<span class="cm-variable">Generic.<span class="cm-keyword">class, <span class="cm-variable">DataSourceJmxConfiguration.<span class="cm-keyword">class })
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">    <span class="cm-keyword">protected <span class="cm-keyword">static <span class="cm-keyword">class <span class="cm-def">PooledDataSourceConfiguration</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<ul data-lake-id="bee6e6e8c27891f09ebb809c68801988">
<li data-lake-id="5014139a6a5e662c4a599fc502724775" data-wording="true">DataSourceTransactionManagerAutoConfiguration： 事务管理器的自动配置</li>
<li data-lake-id="7219cfe71e5d664d5de6ea88658abce0" data-wording="true">JdbcTemplateAutoConfiguration： <strong>JdbcTemplate的自动配置，可以来对数据库进行crud</strong></li>
</ul>
<ul data-lake-id="21251e52447fdecaa1b536289b71f13b">
<ul data-lake-id="899527a59c04c31892e45104de68b570">
<li data-lake-id="4b0018bc306a906d3b6e447deac85a17" data-wording="true">可以修改这个配置项@ConfigurationProperties(prefix = <strong>"spring.jdbc"</strong>) 来修改JdbcTemplate</li>
<li data-lake-id="0ec297ab1883df84cdc3a513f1e168c9" data-wording="true">@Bean@Primary &nbsp; &nbsp;JdbcTemplate；容器中有这个组件</li>
</ul>
</ul>
<ul data-lake-id="348ab6ca24889352f8b91442bc4096e7">
<li data-lake-id="45503632ff63478981d1a65204d0a47e" data-wording="true">JndiDataSourceAutoConfiguration： jndi的自动配置</li>
<li data-lake-id="1fe345687d5ba0c70db4fcf3b541c533" data-wording="true">XADataSourceAutoConfiguration： 分布式事务相关的</li>
</ul>
<h4 id="GPqNj" data-lake-id="d2637c8fc790be78224b381ab33e1adb" data-wording="true">3、修改配置项</h4>
<div id="i1kyY" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22yaml%22%2C%22code%22%3A%22spring%3A%5Cn%20%20datasource%3A%5Cn%20%20%20%20url%3A%20jdbc%3Amysql%3A%2F%2Flocalhost%3A3306%2Fdb_account%5Cn%20%20%20%20username%3A%20root%5Cn%20%20%20%20password%3A%20123456%5Cn%20%20%20%20driver-class-name%3A%20com.mysql.jdbc.Driver%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22i1kyY%22%7D" data-language="yaml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">spring:
  datasource:
    url: jdbc:mysql://localhost:3306/donglijiedian?useSSL=true&amp;serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8
    username: root
    password: zhixi158
    driver-class-name: com.mysql.jdbc.Driver</pre>
</div>
</div>
</div>
</div>
<h4 id="FDRdP" data-lake-id="ce7ac91056725e751197c0b5d6893f37" data-wording="true">4、测试</h4>
<div id="6MbcR" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%40Slf4j%5Cn%40SpringBootTest%5Cnclass%20Boot05WebAdminApplicationTests%20%7B%5Cn%5Cn%20%20%20%20%40Autowired%5Cn%20%20%20%20JdbcTemplate%20jdbcTemplate%3B%5Cn%5Cn%5Cn%20%20%20%20%40Test%5Cn%20%20%20%20void%20contextLoads()%20%7B%5Cn%5Cn%2F%2F%20%20%20%20%20%20%20%20jdbcTemplate.queryForObject(%5C%22select%20*%20from%20account_tbl%5C%22)%5Cn%2F%2F%20%20%20%20%20%20%20%20jdbcTemplate.queryForList(%5C%22select%20*%20from%20account_tbl%5C%22%2C)%5Cn%20%20%20%20%20%20%20%20Long%20aLong%20%3D%20jdbcTemplate.queryForObject(%5C%22select%20count(*)%20from%20account_tbl%5C%22%2C%20Long.class)%3B%5Cn%20%20%20%20%20%20%20%20log.info(%5C%22%E8%AE%B0%E5%BD%95%E6%80%BB%E6%95%B0%EF%BC%9A%7B%7D%5C%22%2CaLong)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%226MbcR%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Slf4j
@SpringBootTest
class Boot05WebAdminApplicationTests {

    @Autowired
    JdbcTemplate jdbcTemplate;


    @Test
    void contextLoads() {

//        jdbcTemplate.queryForObject("select * from account_tbl")
//        jdbcTemplate.queryForList("select * from account_tbl",)
        Long aLong = jdbcTemplate.queryForObject("select count(*) from account_tbl", Long.class);
        log.info("记录总数：{}",aLong);
    }

}
</pre>
</div>
<h3>&nbsp;2、整合Druid跟mybatis看这篇博客</h3>
</div>
</div>
</div>
<p data-lake-id="eddf82e2eb29d44f34c1b7f23bc2a7e4" data-wording="true">&nbsp;<a href="https://i.cnblogs.com/posts/edit;postId=14335345">https://i.cnblogs.com/posts/edit;postId=14335345</a></p>
<h3>&nbsp;3、SpringBoot操作Redis数据库看这篇博客</h3>
<p><a href="https://www.cnblogs.com/zhangzhixi/p/14446050.html#_label5">https://www.cnblogs.com/zhangzhixi/p/14446050.html#_label5</a></p>
<h4 id="X2Llg" data-lake-id="5860575696d0e8b2a153f1e661a8a559" data-wording="true">NoSQL</h4>
<p data-lake-id="29436699796da123832bedfcec7346dc" data-wording="true">Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、<strong>缓存</strong>和消息中间件。 它支持多种类型的数据结构，如 <a href="http://www.redis.cn/topics/data-types-intro.html#strings" rel="noopener noreferrer" target="_blank">字符串（strings）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hashes" rel="noopener noreferrer" target="_blank">散列（hashes）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#lists" rel="noopener noreferrer" target="_blank">列表（lists）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sets" rel="noopener noreferrer" target="_blank">集合（sets）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sorted-sets" rel="noopener noreferrer" target="_blank">有序集合（sorted sets）</a> 与范围查询， <a href="http://www.redis.cn/topics/data-types-intro.html#bitmaps" rel="noopener noreferrer" target="_blank">bitmaps</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hyperloglogs" rel="noopener noreferrer" target="_blank">hyperloglogs</a> 和 <a href="http://www.redis.cn/commands/geoadd.html" rel="noopener noreferrer" target="_blank">地理空间（geospatial）</a> 索引半径查询。 Redis 内置了 <a href="http://www.redis.cn/topics/replication.html" rel="noopener noreferrer" target="_blank">复制（replication）</a>，<a href="http://www.redis.cn/commands/eval.html" rel="noopener noreferrer" target="_blank">LUA脚本（Lua scripting）</a>， <a href="http://www.redis.cn/topics/lru-cache.html" rel="noopener noreferrer" target="_blank">LRU驱动事件（LRU eviction）</a>，<a href="http://www.redis.cn/topics/transactions.html" rel="noopener noreferrer" target="_blank">事务（transactions）</a> 和不同级别的 <a href="http://www.redis.cn/topics/persistence.html" rel="noopener noreferrer" target="_blank">磁盘持久化（persistence）</a>， 并通过 <a href="http://www.redis.cn/topics/sentinel.html" rel="noopener noreferrer" target="_blank">Redis哨兵（Sentinel）</a>和自动 <a href="http://www.redis.cn/topics/cluster-tutorial.html" rel="noopener noreferrer" target="_blank">分区（Cluster）</a>提供高可用性（high availability）。</p>
<p id="ukj2B" data-lake-id="f4be0530f137ff80d7a217c50999bddc" data-wording="true">1、Redis自动配置</p>
<div id="D0EU5" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22xml%22%2C%22code%22%3A%22%20%20%20%20%20%20%20%20%3Cdependency%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-data-redis%3C%2FartifactId%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22D0EU5%22%7D" data-language="xml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">        <span class="cm-tag cm-bracket">&lt;<span class="cm-tag">dependency<span class="cm-tag cm-bracket">&gt;
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">            <span class="cm-tag cm-bracket">&lt;<span class="cm-tag">groupId<span class="cm-tag cm-bracket">&gt;org.springframework.boot<span class="cm-tag cm-bracket">&lt;/<span class="cm-tag">groupId<span class="cm-tag cm-bracket">&gt;
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">            <span class="cm-tag cm-bracket">&lt;<span class="cm-tag">artifactId<span class="cm-tag cm-bracket">&gt;spring-boot-starter-data-redis<span class="cm-tag cm-bracket">&lt;/<span class="cm-tag">artifactId<span class="cm-tag cm-bracket">&gt;
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">        <span class="cm-tag cm-bracket">&lt;/<span class="cm-tag">dependency<span class="cm-tag cm-bracket">&gt;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="49c2c8519ec8caca39e9b0725b41297a" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606745732785-17d1227a-75b9-4f00-a3f1-7fc4137b5113.png%3Fx-oss-process%3Dimage%252Fwatermark%252Ctype_d3F5LW1pY3JvaGVp%252Csize_10%252Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%252Ccolor_FFFFFF%252Cshadow_50%252Ct_80%252Cg_se%252Cx_10%252Cy_10%22%2C%22originWidth%22%3A590%2C%22originHeight%22%3A428%2C%22name%22%3A%22image.png%22%2C%22size%22%3A37764%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A36.066864%2C%22y%22%3A8.12296%2C%22width%22%3A20.828227999999996%2C%22height%22%3A20.363352999999996%2C%22text%22%3A%22%E5%B7%9D%22%7D%2C%7B%22x%22%3A62.95697%2C%22y%22%3A10.545505%2C%22width%22%3A487.23123000000004%2C%22height%22%3A17.017375%2C%22text%22%3A%22org.springframework.booting-oot-statdatard%3A24.%22%7D%2C%7B%22x%22%3A94.38645%2C%22y%22%3A39.520496%2C%22width%22%3A493.65915000000007%2C%22height%22%3A18.373253999999996%2C%22text%22%3A%22org.springframework.bootring-ootstat2.4.mi%22%7D%2C%7B%22x%22%3A94.50718%2C%22y%22%3A69.189095%2C%22width%22%3A387.29604%2C%22height%22%3A20.021055000000004%2C%22text%22%3A%22org.springframework.data%3Aspring-data-redis%3A2.4.1%22%7D%2C%7B%22x%22%3A106.64156%2C%22y%22%3A99.37296%2C%22width%22%3A440.13779999999997%2C%22height%22%3A18.50341999999999%2C%22text%22%3A%22org.springframework.datapring-dataeyalue2.4.1%22%7D%2C%7B%22x%22%3A123.24369%2C%22y%22%3A129.71263%2C%22width%22%3A283.77099%2C%22height%22%3A19.634100000000018%2C%22text%22%3A%22orgspringframeworkspring-tx%3A5.3.1%22%7D%2C%7B%22x%22%3A125.52893%2C%22y%22%3A159.11816%2C%22width%22%3A302.67142%2C%22height%22%3A20.19031000000001%2C%22text%22%3A%22org.springframework%3Aspring-oxm%3A5.3.1%22%7D%2C%7B%22x%22%3A124.61609%2C%22y%22%3A189.23326%2C%22width%22%3A464.68791%2C%22height%22%3A21.576130000000006%2C%22text%22%3A%22iorg.springframeworkpring-aop.3.idoduica%22%7D%2C%7B%22x%22%3A126.448975%2C%22y%22%3A219.40419%2C%22width%22%3A390.971225%2C%22height%22%3A19.185910000000007%2C%22text%22%3A%22oRg.springframeworkspring-context-support%3A5.3.1%22%7D%2C%7B%22x%22%3A123.43949%2C%22y%22%3A250.4253%2C%22width%22%3A369.05890999999997%2C%22height%22%3A18.55959999999999%2C%22text%22%3A%22lorg.slf4j%3Aslf4j-api1.7.30mittedforduplicate%22%7D%2C%7B%22x%22%3A95.267555%2C%22y%22%3A280.90085%2C%22width%22%3A303.262475%2C%22height%22%3A15.088450000000023%2C%22text%22%3A%22io.lettuce%3Alettuce-core%3A6.0.1.RELEASE%22%7D%2C%7B%22x%22%3A126.41273%2C%22y%22%3A310.94662%2C%22width%22%3A275.25157%2C%22height%22%3A16.906960000000026%2C%22text%22%3A%22io.netty%3Anetty-common%3A4.1.54.Final%22%7D%2C%7B%22x%22%3A124.793335%2C%22y%22%3A339.7848%2C%22width%22%3A270.32629499999996%2C%22height%22%3A17.978099999999984%2C%22text%22%3A%22io.netty%3Anetty-handler%3A4.1.54.Final%22%7D%2C%7B%22x%22%3A125.173744%2C%22y%22%3A369.95825%2C%22width%22%3A280.469956%2C%22height%22%3A17.539889999999957%2C%22text%22%3A%22io.netty%3Anetty-transport%3A4.1.54.Final%22%7D%2C%7B%22x%22%3A125.24808%2C%22y%22%3A400.4198%2C%22width%22%3A278.01349%2C%22height%22%3A16.41138000000001%2C%22text%22%3A%22io.projectreactor%3Areactor-core%3A3.4.0%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E5%B7%9D%20org.springframework.booting-oot-statdatard%3A24.%20org.springframework.bootring-ootstat2.4.mi%20org.springframework.data%3Aspring-data-redis%3A2.4.1%20org.springframework.datapring-dataeyalue2.4.1%20orgspringframeworkspring-tx%3A5.3.1%20org.springframework%3Aspring-oxm%3A5.3.1%20iorg.springframeworkpring-aop.3.idoduica%20oRg.springframeworkspring-context-support%3A5.3.1%20lorg.slf4j%3Aslf4j-api1.7.30mittedforduplicate%20io.lettuce%3Alettuce-core%3A6.0.1.RELEASE%20io.netty%3Anetty-common%3A4.1.54.Final%20io.netty%3Anetty-handler%3A4.1.54.Final%20io.netty%3Anetty-transport%3A4.1.54.Final%20io.projectreactor%3Areactor-core%3A3.4.0%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A590%2C%22height%22%3A428%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606745732785-17d1227a-75b9-4f00-a3f1-7fc4137b5113.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_10%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="428px"></span></p>
<p data-lake-id="7a5a6048e51681e03672530cfd545c9d" data-wording="true">自动配置：</p>
<ul data-lake-id="cce207adcce9c299e5c70a14a42f4458">
<li data-lake-id="9131ed2ec59bc3c1ebb3213a7ad6e2d6" data-wording="true">RedisAutoConfiguration 自动配置类。RedisProperties 属性类 --&gt; <strong>spring.redis.xxx是对redis的配置</strong></li>
<li data-lake-id="15d777d149626c4367a715df7cb2d3d4" data-wording="true">连接工厂是准备好的。<strong>Lettuce</strong>ConnectionConfiguration、<strong>Jedis</strong>ConnectionConfiguration</li>
<li data-lake-id="6f9e8202c5a1773bb42e5435ded1da55" data-wording="true"><strong>自动注入了<span style="background-color: rgba(255, 255, 0, 1)">RedisTemplate</span></strong>&lt;<strong>Object</strong>, <strong>Object</strong>&gt; ： xxxTemplate；</li>
<li data-lake-id="3b4927b5ad28d2b39e69cdf46a20848d" data-wording="true"><strong>自动注入了<span style="background-color: rgba(255, 255, 0, 1)">StringRedisTemplate</span>；k：v都是String</strong></li>
<li data-lake-id="315bad92dd5f10da2e49641eb21cbe75" data-wording="true"><strong>key：value</strong></li>
<li data-lake-id="d99399a8aa7b766e86c03b9f082b654f" data-wording="true"><strong>底层只要我们使用 </strong><strong>StringRedisTemplate、</strong><strong>RedisTemplate就可以操作redis</strong></li>
</ul>
<h2 data-lake-id="113eb94dba2e0c97a63f5e9a7d0b914d">四、单元测试</h2>
<h3 id="5Eyf9" data-lake-id="ac0da07348eb68593af0fb717813f913" data-wording="true">1、JUnit5 的变化</h3>
<p data-lake-id="504c00f6a2a19dd32f617eefb5f134cc" data-wording="true"><strong><span class="lake-fontsize-12">Spring Boot 2.2.0 版本开始引入 JUnit 5 作为单元测试默认库</span></strong></p>
<p data-lake-id="d9940f9b00e344abfb4197432dc1ff56" data-wording="true"><span class="lake-fontsize-12">作为最新版本的JUnit框架，JUnit5与之前版本的Junit框架有很大的不同。由三个不同子项目的几个不同模块组成。</span></p>
<blockquote><span class="lake-fontsize-12"><strong>JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage</strong></span></blockquote>
<p data-lake-id="ce22bd127e7874b0b8cd65e016e53510" data-wording="true"><span class="lake-fontsize-12"><strong>JUnit Platform</strong><span class="lake-fontsize-12">: Junit Platform是在JVM上启动测试框架的基础，不仅支持Junit自制的测试引擎，其他测试引擎也都可以接入。</span></span></p>
<p data-lake-id="0ee505f7976407d8c86c92e38f166666" data-wording="true"><span class="lake-fontsize-12"><strong>JUnit Jupiter</strong><span class="lake-fontsize-12">: JUnit Jupiter提供了JUnit5的新的编程模型，是JUnit5新特性的核心。内部 包含了一个<strong><span class="lake-fontsize-12">测试引擎</span></strong><span class="lake-fontsize-12">，用于在Junit Platform上运行。</span></span></span></p>
<p data-lake-id="912d5f4f7d9fa0f4a79c30c23c1f315c" data-wording="true"><span class="lake-fontsize-12"><strong>JUnit Vintage</strong><span class="lake-fontsize-12">: 由于JUint已经发展多年，为了照顾老的项目，JUnit Vintage提供了兼容JUnit4.x,Junit3.x的测试引擎。</span></span></p>
<p data-lake-id="9c42aadb4757121ebd2263a15bfd5b6f"><span class="lake-fontsize-12"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606796395719-eb57ab48-ae44-45e5-8d2e-c4d507aff49a.png%22%2C%22originWidth%22%3A683%2C%22originHeight%22%3A288%2C%22size%22%3A0%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22margin%22%3A%7B%22top%22%3Afalse%2C%22bottom%22%3Afalse%7D%2C%22width%22%3A683%2C%22height%22%3A288%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606796395719-eb57ab48-ae44-45e5-8d2e-c4d507aff49a.png" alt="image" class="image lake-drag-image" title="image" data-role="image" data-raw-src="" data-height="288px"></span></span></p>
<p data-lake-id="e7443ab99e75df2db0f335b11ee7cf95" data-wording="true">注意：</p>
<p data-lake-id="a145bdfd17814a1d099441ef71e21199" data-wording="true"><strong>SpringBoot 2.4 以上版本移除了默认对 <span class="lake-fontsize-12">Vintage 的依赖。如果需要兼容junit4需要自行引入（不能使用junit4的功能 @Test<span class="lake-fontsize-12">）</span></span></strong></p>
<p data-lake-id="0334c34e99f79347152c530313587e4e" data-wording="true"><strong>JUnit 5’s Vintage Engine Removed from </strong><strong><code>spring-boot-starter-test,如果需要继续兼容junit4需要自行引入vintage</code></strong></p>
<div id="oISgo" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22xml%22%2C%22code%22%3A%22%3Cdependency%3E%5Cn%20%20%20%20%3CgroupId%3Eorg.junit.vintage%3C%2FgroupId%3E%5Cn%20%20%20%20%3CartifactId%3Ejunit-vintage-engine%3C%2FartifactId%3E%5Cn%20%20%20%20%3Cscope%3Etest%3C%2Fscope%3E%5Cn%20%20%20%20%3Cexclusions%3E%5Cn%20%20%20%20%20%20%20%20%3Cexclusion%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.hamcrest%3C%2FgroupId%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Ehamcrest-core%3C%2FartifactId%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fexclusion%3E%5Cn%20%20%20%20%3C%2Fexclusions%3E%5Cn%3C%2Fdependency%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22oISgo%22%7D" data-language="xml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">&lt;dependency&gt;
    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;
    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;&nbsp;</pre>
</div>
</div>
</div>
</div>
<p data-lake-id="ff1af9d61f416a22fd8ea6ffa79d5187" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606797616337-e73010e9-9cac-496d-a177-64b677af5a3d.png%3Fx-oss-process%3Dimage%252Fwatermark%252Ctype_d3F5LW1pY3JvaGVp%252Csize_10%252Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%252Ccolor_FFFFFF%252Cshadow_50%252Ct_80%252Cg_se%252Cx_10%252Cy_10%22%2C%22originWidth%22%3A649%2C%22originHeight%22%3A396%2C%22name%22%3A%22image.png%22%2C%22size%22%3A37759%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A72.96896%2C%22y%22%3A10.838881%2C%22width%22%3A304.53344000000004%2C%22height%22%3A17.706539%2C%22text%22%3A%22orgjunit.jupiterjunit-jupiter%3A5.7.0test)%22%7D%2C%7B%22x%22%3A83.24374%2C%22y%22%3A39.371952%2C%22width%22%3A354.74336%2C%22height%22%3A19.420612%2C%22text%22%3A%22iorgjunitjupiterjunit-jupiterapi5.7.0(%22%7D%2C%7B%22x%22%3A134.85638%2C%22y%22%3A71.18792%2C%22width%22%3A346.21955%2C%22height%22%3A15.575519999999997%2C%22text%22%3A%22org.apiguardian%3Aapiguardian-ap1.1.0%22%7D%2C%7B%22x%22%3A134.37778%2C%22y%22%3A97.285866%2C%22width%22%3A297.69647%2C%22height%22%3A22.955073999999996%2C%22text%22%3A%22org.opentest4i%3Aopentest4j%3A1.2.0(test)%22%7D%2C%7B%22x%22%3A134.3963%2C%22y%22%3A129.86984%2C%22width%22%3A419.42053%2C%22height%22%3A19.84903%2C%22text%22%3A%22orgjunit.platfommjunit-platform-commons1.7.0()%22%7D%2C%7B%22x%22%3A102.17603%2C%22y%22%3A160.00104%2C%22width%22%3A370.89986999999996%2C%22height%22%3A19.924270000000007%2C%22text%22%3A%22orgjunitjupiterjuiit-jupiter-params5.7.0(est)%22%7D%2C%7B%22x%22%3A77.55949%2C%22y%22%3A189.7371%2C%22width%22%3A390.43081%2C%22height%22%3A18.358800000000002%2C%22text%22%3A%22dorgjunit.jupiterjunit-jupiterengine.7.()%22%7D%2C%7B%22x%22%3A134.40213%2C%22y%22%3A218.45651%2C%22width%22%3A509.23107%2C%22height%22%3A19.30700999999999%2C%22text%22%3A%22org.apiguardian%3Aapiguadinai.1.mitdoulicate)%22%7D%2C%7B%22x%22%3A133.87883%2C%22y%22%3A250.82678%2C%22width%22%3A396.25097000000005%2C%22height%22%3A17.61524%2C%22text%22%3A%22lorgjunit.platformjunit-platform-engine%3B1.7.0(test)%22%7D%2C%7B%22x%22%3A164.7244%2C%22y%22%3A278.79242%2C%22width%22%3A481.12399999999997%2C%22height%22%3A19.03805%2C%22text%22%3A%22org.apiguardianapiguardianapi.1.1.0(tsomittedforduplic%22%7D%2C%7B%22x%22%3A161.95956%2C%22y%22%3A309.9908%2C%22width%22%3A464.02933999999993%2C%22height%22%3A18.23833000000002%2C%22text%22%3A%22org.opentest4iopentes41.2.0ioduica)%22%7D%2C%7B%22x%22%3A166.23647%2C%22y%22%3A341.25204%2C%22width%22%3A472.92513%2C%22height%22%3A17.043799999999976%2C%22text%22%3A%22org.junit.platfomjuitlafomcommo.%22%7D%2C%7B%22x%22%3A132.23563%2C%22y%22%3A370.5218%2C%22width%22%3A501.30502%2C%22height%22%3A16.820640000000026%2C%22text%22%3A%22org.junitjupiterjunituitapi..duic%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22orgjunit.jupiterjunit-jupiter%3A5.7.0test)%20iorgjunitjupiterjunit-jupiterapi5.7.0(%20org.apiguardian%3Aapiguardian-ap1.1.0%20org.opentest4i%3Aopentest4j%3A1.2.0(test)%20orgjunit.platfommjunit-platform-commons1.7.0()%20orgjunitjupiterjuiit-jupiter-params5.7.0(est)%20dorgjunit.jupiterjunit-jupiterengine.7.()%20org.apiguardian%3Aapiguadinai.1.mitdoulicate)%20lorgjunit.platformjunit-platform-engine%3B1.7.0(test)%20org.apiguardianapiguardianapi.1.1.0(tsomittedforduplic%20org.opentest4iopentes41.2.0ioduica)%20org.junit.platfomjuitlafomcommo.%20org.junitjupiterjunituitapi..duic%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A649%2C%22height%22%3A396%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606797616337-e73010e9-9cac-496d-a177-64b677af5a3d.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_10%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="396px"></span></p>
<div id="KpHgm" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22xml%22%2C%22code%22%3A%22%3Cdependency%3E%5Cn%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%5Cn%20%20%3CartifactId%3Espring-boot-starter-test%3C%2FartifactId%3E%5Cn%20%20%3Cscope%3Etest%3C%2Fscope%3E%5Cn%3C%2Fdependency%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22KpHgm%22%7D" data-language="xml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</pre>
</div>
<h3 id="Agmrl" data-lake-id="d7dd9a9c2048696f57909fdb2e600183" data-wording="true">2、JUnit5常用注解</h3>
<p data-lake-id="e8513fb6fd8cf416b078ae9c32f423a2" data-wording="true"><span class="lake-fontsize-12">JUnit5的注解与JUnit4的注解有所变化</span></p>
<p data-lake-id="9f23a9dbd6e938b7725ca1992ca8d40b" data-wording="true"><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations" rel="noopener noreferrer" target="_blank">https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations</a></p>
<ul data-lake-id="15d5e146109a147fbb2db5faa5728b9d">
<li data-lake-id="cee8df97cba6f9c97fb81aaf630d611d" data-wording="true"><span class="lake-fontsize-12"><strong>@Test :</strong><span class="lake-fontsize-12">表示方法是测试方法。但是与JUnit4的@Test不同，他的职责非常单一不能声明任何属性，拓展的测试将会由Jupiter提供额外测试</span></span></li>
<li data-lake-id="ef24637b97a75ab36e1b441e303c942e" data-wording="true"><span class="lake-fontsize-12"><strong>@ParameterizedTest :</strong><span class="lake-fontsize-12">表示方法是参数化测试，下方会有详细介绍</span></span></li>
<li data-lake-id="d52a6c13eff171620400563375c5711b" data-wording="true"><span class="lake-fontsize-12"><strong>@RepeatedTest :</strong><span class="lake-fontsize-12">表示方法可重复执行，下方会有详细介绍</span></span></li>
<li data-lake-id="a2280048c9ae2c921a9cb7037f213cd6" data-wording="true"><span class="lake-fontsize-12"><strong>@DisplayName :</strong><span class="lake-fontsize-12">为测试类或者测试方法设置展示名称</span></span></li>
<li data-lake-id="69d26940fba04fbfe0f88d70fe77e027" data-wording="true"><span class="lake-fontsize-12"><strong>@BeforeEach :</strong><span class="lake-fontsize-12">表示在每个单元测试之前执行</span></span></li>
<li data-lake-id="543b4795591d7d691a6f14b689a11828" data-wording="true"><span class="lake-fontsize-12"><strong>@AfterEach :</strong><span class="lake-fontsize-12">表示在每个单元测试之后执行</span></span></li>
<li data-lake-id="bf778152065d90015d4629ac7e775e30" data-wording="true"><span class="lake-fontsize-12"><strong>@BeforeAll :</strong><span class="lake-fontsize-12">表示在所有单元测试之前执行</span></span></li>
<li data-lake-id="b0a836dad0a6ae2c2cdbde41a5d71fd6" data-wording="true"><span class="lake-fontsize-12"><strong>@AfterAll :</strong><span class="lake-fontsize-12">表示在所有单元测试之后执行</span></span></li>
<li data-lake-id="46e5e3380831c0877988c3a878743cfd" data-wording="true"><span class="lake-fontsize-12"><strong>@Tag :</strong><span class="lake-fontsize-12">表示单元测试类别，类似于JUnit4中的@Categories</span></span></li>
<li data-lake-id="9d9e3deb0ba15e3e2e46c62a277e1799" data-wording="true"><span class="lake-fontsize-12"><strong>@Disabled :</strong><span class="lake-fontsize-12">表示测试类或测试方法不执行，类似于JUnit4中的@Ignore</span></span></li>
<li data-lake-id="ccc1289b8c8597c10d0394f4489028e7" data-wording="true"><span class="lake-fontsize-12"><strong>@Timeout :</strong><span class="lake-fontsize-12">表示测试方法运行如果超过了指定时间将会返回错误</span></span></li>
<li data-lake-id="10fc2ed39ccf14ae86d43f7102e5d60e" data-wording="true"><span class="lake-fontsize-12"><strong>@ExtendWith :</strong><span class="lake-fontsize-12">为测试类或测试方法提供扩展类引用</span></span></li>
</ul>
<div id="vrMv6" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22import%20org.junit.jupiter.api.Test%3B%20%2F%2F%E6%B3%A8%E6%84%8F%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AFjupiter%E7%9A%84Test%E6%B3%A8%E8%A7%A3%EF%BC%81%EF%BC%81%5Cn%5Cn%5Cnpublic%20class%20TestDemo%20%7B%5Cn%5Cn%20%20%40Test%5Cn%20%20%40DisplayName(%5C%22%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%B5%8B%E8%AF%95%5C%22)%5Cn%20%20public%20void%20firstTest()%20%7B%5Cn%20%20%20%20%20%20System.out.println(%5C%22hello%20world%5C%22)%3B%5Cn%20%20%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22vrMv6%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">import</span> org.junit.jupiter.api.Test; <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">注意这里使用的是jupiter的Test注解！！</span>


<span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> TestDemo {

  @Test
  @DisplayName(</span>"第一次测试"<span style="color: rgba(0, 0, 0, 1)">)
  </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> firstTest() {
      System.out.println(</span>"hello world"<span style="color: rgba(0, 0, 0, 1)">);
  }</span></pre>
</div>
</div>
</div>
</div>
<h3 id="yH8Rk" data-lake-id="02490872ecfdebc7b4fc4d587a3d2a48" data-wording="true">3、断言（assertions）</h3>
<p data-lake-id="a9b8b50afe4046439b81ab766fa785f4" data-wording="true"><span class="lake-fontsize-12">断言（assertions）是测试方法中的核心部分，用来对测试需要满足的条件进行验证。<strong><span class="lake-fontsize-12">这些断言方法都是 org.junit.jupiter.api.Assertions 的静态方法</span></strong><span class="lake-fontsize-12">。JUnit 5 内置的断言可以分成如下几个类别：</span></span></p>
<p data-lake-id="d188b7b2043bbf2ad8d4ced58ec2e71b" data-wording="true"><strong><span class="lake-fontsize-12">检查业务逻辑返回的数据是否合理。</span></strong></p>
<p data-lake-id="decc90bb7cc4d0641318d2d0c3197264" data-wording="true"><strong><span class="lake-fontsize-12">所有的测试运行结束以后，会有一个详细的测试报告；</span></strong></p>
<p id="2P0jY" data-lake-id="3406e259cb04cfbe5c926f616068deb1" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">1、简单断言</span></p>
<p data-lake-id="af1e9ca5d3246420b3c583bc5d222829" data-wording="true"><span class="lake-fontsize-12">用来对单个值进行简单的验证。如：</span></p>
<div id="VcnZB" data-card-type="block" data-lake-card="table" data-card-value="data:%7B%22rows%22%3A9%2C%22cols%22%3A2%2C%22html%22%3A%22%3Ctable%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20786px%3B%5C%22%3E%3Ccolgroup%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22316%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22470%5C%22%20%2F%3E%3C%2Fcolgroup%3E%3Cthead%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20rowspan%3D%5C%221%5C%22%20colspan%3D%5C%221%5C%22%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%E6%96%B9%E6%B3%95%3C%2Ftd%3E%3Ctd%20rowspan%3D%5C%221%5C%22%20colspan%3D%5C%221%5C%22%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%E8%AF%B4%E6%98%8E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%3Ctr%20style%3D%5C%22background-color%3A%20inherit%3B%20height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertEquals%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%88%96%E4%B8%A4%E4%B8%AA%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertNotEquals%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%88%96%E4%B8%A4%E4%B8%AA%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%90%A6%E4%B8%8D%E7%9B%B8%E7%AD%89%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22background-color%3A%20inherit%3B%20height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertSame%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E6%98%AF%E5%90%A6%E6%8C%87%E5%90%91%E5%90%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertNotSame%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E6%98%AF%E5%90%A6%E6%8C%87%E5%90%91%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22background-color%3A%20inherit%3B%20height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertTrue%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E7%BB%99%E5%AE%9A%E7%9A%84%E5%B8%83%E5%B0%94%E5%80%BC%E6%98%AF%E5%90%A6%E4%B8%BA%20true%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertFalse%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E7%BB%99%E5%AE%9A%E7%9A%84%E5%B8%83%E5%B0%94%E5%80%BC%E6%98%AF%E5%90%A6%E4%B8%BA%20false%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22background-color%3A%20inherit%3B%20height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertNull%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E6%98%AF%E5%90%A6%E4%B8%BA%20null%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3EassertNotNull%3C%2Ftd%3E%3Ctd%20style%3D%5C%22background-color%3A%20inherit%3B%5C%22%3E%E5%88%A4%E6%96%AD%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E6%98%AF%E5%90%A6%E4%B8%8D%E4%B8%BA%20null%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22margin%22%3Afalse%2C%22hideBorder%22%3Afalse%2C%22id%22%3A%22VcnZB%22%7D">
<table class="lake-table" align="left"><colgroup><col span="1" width="316"><col span="1" width="470"></colgroup>
<thead>
<tr>
<td rowspan="1" colspan="1">方法</td>
<td rowspan="1" colspan="1">说明</td>
</tr>
</thead>
<tbody>
<tr>
<td>assertEquals</td>
<td>判断两个对象或两个原始类型是否相等</td>
</tr>
<tr>
<td>assertNotEquals</td>
<td>判断两个对象或两个原始类型是否不相等</td>
</tr>
<tr>
<td>assertSame</td>
<td>判断两个对象引用是否指向同一个对象</td>
</tr>
<tr>
<td>assertNotSame</td>
<td>判断两个对象引用是否指向不同的对象</td>
</tr>
<tr>
<td>assertTrue</td>
<td>判断给定的布尔值是否为 true</td>
</tr>
<tr>
<td>assertFalse</td>
<td>判断给定的布尔值是否为 false</td>
</tr>
<tr>
<td>assertNull</td>
<td>判断给定的对象引用是否为 null</td>
</tr>
<tr>
<td>assertNotNull</td>
<td>判断给定的对象引用是否不为 null</td>
</tr>
</tbody>
</table>
</div>
<p data-lake-id="1c2ac45cb1c58536089b8e7fac84c46f">&nbsp;</p>
<p>　　</p>
</div>
</div>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Test
@DisplayName("simple assertion")
public void simple() {
     assertEquals(3, 1 + 2, "simple math");
     assertNotEquals(3, 1 + 1);

     assertNotSame(new Object(), new Object());
     Object obj = new Object();
     assertSame(obj, obj);

     assertFalse(1 &gt; 2);
     assertTrue(1 &lt; 2);

     assertNull(null);
     assertNotNull(new Object());
}
</pre>
</div>
<p id="5qLMe" data-lake-id="d62d4b284239cf3f1c0682cfa0e88a95" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">2、数组断言</span></p>
<p data-lake-id="857e5b6f727d82bf5f5b21c5a9426b84" data-wording="true"><span class="lake-fontsize-12">通过 assertArrayEquals 方法来判断两个对象或原始类型的数组是否相等</span></p>
<div id="VJiG4" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%40Test%5Cn%40DisplayName(%5C%22array%20assertion%5C%22)%5Cnpublic%20void%20array()%20%7B%5Cn%20assertArrayEquals(new%20int%5B%5D%7B1%2C%202%7D%2C%20new%20int%5B%5D%20%7B1%2C%202%7D)%3B%5Cn%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22VJiG4%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Test
@DisplayName("array assertion")
public void array() {
 assertArrayEquals(new int[]{1, 2}, new int[] {1, 2});
}
</pre>
</div>
<p><span style="background-color: rgba(255, 255, 0, 1)">3、组合断言</span></p>
<p><span class="lake-fontsize-12">assertAll 方法接受多个 org.junit.jupiter.api.Executable 函数式接口的实例作为要验证的断言，可以通过 lambda 表达式很容易的提供这些断言</span>&nbsp;</p>
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Test
@DisplayName("assert all")
public void all() {
 assertAll("Math",
    () -&gt; assertEquals(2, 1 + 1),
    () -&gt; assertTrue(1 &gt; 0)
 );
}&nbsp;</pre>
</div>
</div>
</div>
<p id="GBYRq" data-lake-id="d88b110d6575b77c8941ee56cf97d382" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">4、异常断言</span></p>
<p><span class="lake-fontsize-12">在JUnit4时期，想要测试方法的异常情况时，需要用<span class="lake-fontsize-12"><strong>@Rule</strong><span class="lake-fontsize-12">注解的ExpectedException变量还是比较麻烦的。而JUnit5提供了一种新的断言方式<span class="lake-fontsize-12"><strong>Assertions.assertThrows()</strong><span class="lake-fontsize-12"> ,配合函数式编程就可以进行使用。</span></span></span></span></span></p>
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Test
@DisplayName("异常测试")
public void exceptionTest() {
    ArithmeticException exception = Assertions.assertThrows(
           //扔出断言异常
            ArithmeticException.class, () -&gt; System.out.println(1 % 0));

}</pre>
</div>
</div>
</div>
<p id="64dBm" data-lake-id="90bf1d6f26f4c9b6d61da1ed2d4d0c42" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">5、超时断言</span></p>
<p><span class="lake-fontsize-12">Junit5还提供了<span class="lake-fontsize-12"><strong>Assertions.assertTimeout()</strong><span class="lake-fontsize-12"> 为测试方法设置了超时时间</span></span></span></p>
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Test
@DisplayName("超时测试")
public void timeoutTest() {
    //如果测试方法时间超过1s将会异常
    Assertions.assertTimeout(Duration.ofMillis(1000), () -&gt; Thread.sleep(500));
}&nbsp;</pre>
</div>
</div>
</div>
<p id="obHQ2" data-lake-id="3c55fad95881476ace2711df351ff896" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">6、快速失败</span></p>
<p><span class="lake-fontsize-12">通过 fail 方法直接使得测试失败</span></p>
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Test
@DisplayName("fail")
public void shouldFail() {
 fail("This should fail");
}&nbsp;</pre>
</div>
</div>
</div>
<p id="PC4ch" data-lake-id="912cabd8696e210128eb40fecc1513f5" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">7、前置条件（assumptions）</span></p>
<p><span class="lake-fontsize-12">　　JUnit 5 中的前置条件（<strong><span class="lake-fontsize-12">assumptions【假设】</span></strong><span class="lake-fontsize-12">）类似于断言，不同之处在于<strong><span class="lake-fontsize-12">不满足的断言会使得测试方法失败</span></strong><span class="lake-fontsize-12">，而不满足的<strong><span class="lake-fontsize-12">前置条件只会使得测试方法的执行终止</span></strong><span class="lake-fontsize-12">。前置条件可以看成是测试方法执行的前提，当该前提不满足时，就没有继续执行的必要。</span></span></span></span></p>
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@DisplayName("前置条件")
public class AssumptionsTest {
 private final String environment = "DEV";
 
 @Test
 @DisplayName("simple")
 public void simpleAssume() {
    assumeTrue(Objects.equals(this.environment, "DEV"));
    assumeFalse(() -&gt; Objects.equals(this.environment, "PROD"));
 }
 
 @Test
 @DisplayName("assume then do")
 public void assumeThenDo() {
    assumingThat(
       Objects.equals(this.environment, "DEV"),
       () -&gt; System.out.println("In DEV")
    );
 }
}</pre>
</div>
</div>
</div>
<p><span class="lake-fontsize-12">assumeTrue 和 assumFalse 确保给定的条件为 true 或 false，不满足条件会使得测试执行终止。assumingThat 的参数是表示条件的布尔值和对应的 Executable 接口的实现对象。只有条件满足时，Executable 对象才会被执行；当条件不满足时，测试执行并不会终止。</span>　</p>
</div>
</div>
</div>
<p id="4KNgR" data-lake-id="cabffd02fa7800a66664f070fbf6dada" data-wording="true"><span style="background-color: rgba(255, 255, 0, 1)">8、参数化测试</span></p>
<p data-lake-id="d66299aa52dd505fc34fada20b5fadf1" data-wording="true"><span class="lake-fontsize-12">参数化测试是JUnit5很重要的一个新特性，它使得用不同的参数多次运行测试成为了可能，也为我们的单元测试带来许多便利。</span></p>
<p data-lake-id="b719297c284ef78f2e95d82517a54c09" data-wording="true"><span class="lake-fontsize-12">利用<span class="lake-fontsize-12"><strong>@ValueSource</strong><span class="lake-fontsize-12">等注解，指定入参，我们将可以使用不同的参数进行多次单元测试，而不需要每新增一个参数就新增一个单元测试，省去了很多冗余代码。</span></span></span></p>
<p data-lake-id="cd22ee560017861200bac6ae943b77b9" data-wording="true"><span class="lake-fontsize-12"><strong>@ValueSource</strong><span class="lake-fontsize-12">: 为参数化测试指定入参来源，支持八大基础类以及String类型,Class类型</span></span></p>
<p data-lake-id="db38474d93999f2f3cf30f19954e802f" data-wording="true"><span class="lake-fontsize-12"><strong>@NullSource</strong><span class="lake-fontsize-12">: 表示为参数化测试提供一个null的入参</span></span></p>
<p data-lake-id="2113456497fac8b577503f12d017e1ff" data-wording="true"><span class="lake-fontsize-12"><strong>@EnumSource</strong><span class="lake-fontsize-12">: 表示为参数化测试提供一个枚举入参</span></span></p>
<p data-lake-id="021a6e70e2fd2e96dc44705508325527" data-wording="true"><span class="lake-fontsize-12"><strong>@CsvFileSource</strong><span class="lake-fontsize-12">：表示读取指定CSV文件内容作为参数化测试入参</span></span></p>
<p data-lake-id="ea6a443ec9cf93d68fe7e24e25d2fdec" data-wording="true"><span class="lake-fontsize-12"><strong>@MethodSource</strong><span class="lake-fontsize-12">：表示读取指定方法的返回值作为参数化测试入参(注意方法返回需要是一个流)</span></span></p>
<p data-lake-id="114966b05317f90523442c10f89e4ebe" data-wording="true"><span class="lake-fontsize-12">　　当然如果参数化测试仅仅只能做到指定普通的入参还达不到让我觉得惊艳的地步。让我真正感到他的强大之处的地方在于他可以支持外部的各类入参。</span></p>
<p data-lake-id="114966b05317f90523442c10f89e4ebe" data-wording="true"><span class="lake-fontsize-12">如:CSV,YML,JSON 文件甚至方法的返回值也可以作为入参。只需要去实现<span class="lake-fontsize-12"><strong>ArgumentsProvider</strong><span class="lake-fontsize-12">接口，任何外部文件都可以作为它的入参。</span></span></span></p>
<div id="d3zKk" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%40ParameterizedTest%5Cn%40ValueSource(strings%20%3D%20%7B%5C%22one%5C%22%2C%20%5C%22two%5C%22%2C%20%5C%22three%5C%22%7D)%5Cn%40DisplayName(%5C%22%E5%8F%82%E6%95%B0%E5%8C%96%E6%B5%8B%E8%AF%951%5C%22)%5Cnpublic%20void%20parameterizedTest1(String%20string)%20%7B%5Cn%20%20%20%20System.out.println(string)%3B%5Cn%20%20%20%20Assertions.assertTrue(StringUtils.isNotBlank(string))%3B%5Cn%7D%5Cn%5Cn%5Cn%40ParameterizedTest%5Cn%40MethodSource(%5C%22method%5C%22)%20%20%20%20%2F%2F%E6%8C%87%E5%AE%9A%E6%96%B9%E6%B3%95%E5%90%8D%5Cn%40DisplayName(%5C%22%E6%96%B9%E6%B3%95%E6%9D%A5%E6%BA%90%E5%8F%82%E6%95%B0%5C%22)%5Cnpublic%20void%20testWithExplicitLocalMethodSource(String%20name)%20%7B%5Cn%20%20%20%20System.out.println(name)%3B%5Cn%20%20%20%20Assertions.assertNotNull(name)%3B%5Cn%7D%5Cn%5Cnstatic%20Stream%3CString%3E%20method()%20%7B%5Cn%20%20%20%20return%20Stream.of(%5C%22apple%5C%22%2C%20%5C%22banana%5C%22)%3B%5Cn%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22d3zKk%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@ParameterizedTest
@ValueSource(strings = {"one", "two", "three"})
@DisplayName("参数化测试1")
public void parameterizedTest1(String string) {
    System.out.println(string);
    Assertions.assertTrue(StringUtils.isNotBlank(string));
}


@ParameterizedTest
@MethodSource("method")    //指定方法名
@DisplayName("方法来源参数")
public void testWithExplicitLocalMethodSource(String name) {
    System.out.println(name);
    Assertions.assertNotNull(name);
}

static Stream&lt;String&gt; method() {
    return Stream.of("apple", "banana");
}
</pre>
</div>
<h2>五、指标监控</h2>
<h3 id="rVhTN" data-lake-id="0c56ba0037ea29545cb27bce11619a6a" data-wording="true">1、SpringBoot Actuator</h3>
<h4 id="2hOqv" data-lake-id="2e26348f72ebd5812dfcbacea3f7cdd0" data-wording="true">1.1、简介</h4>
<p data-lake-id="a68fafbf5651d243c9cdbf667be72caf" data-wording="true">　　未来每一个微服务在云上部署以后，我们都需要对其进行监控、追踪、审计、控制等。SpringBoot就抽取了Actuator场景，使得我们每个微服务快速引用即可获得生产级别的应用监控、审计等功能。</p>
<div id="6wjbC" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22xml%22%2C%22code%22%3A%22%20%20%20%20%20%20%20%20%3Cdependency%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-actuator%3C%2FartifactId%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%226wjbC%22%7D" data-language="xml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;/dependency&gt;</pre>
</div>
</div>
</div>
</div>
<p data-lake-id="80d80cd71e20b3a40c727a6755a3a23b" data-wording="true"><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402173021563-922599681.png" alt="" loading="lazy"></p>
<h4 id="aC2wd" data-lake-id="d3df05ef0653e8e19a0716482a0d758e" data-wording="true">1.2、1.x与2.x的不同</h4>
<p data-lake-id="3dbd07963653b6910d20c44561aa1427" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606884394162-ac7f2d8e-7abb-44df-9998-fb0f2705f238.png%3Fx-oss-process%3Dimage%252Fwatermark%252Ctype_d3F5LW1pY3JvaGVp%252Csize_14%252Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%252Ccolor_FFFFFF%252Cshadow_50%252Ct_80%252Cg_se%252Cx_10%252Cy_10%22%2C%22originWidth%22%3A1068%2C%22originHeight%22%3A430%2C%22name%22%3A%22image.png%22%2C%22size%22%3A65259%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A635.72833%2C%22y%22%3A43.916935%2C%22width%22%3A363.32317%2C%22height%22%3A32.173155%2C%22text%22%3A%22SpringBootActuator2.X%22%7D%2C%7B%22x%22%3A32.456425%2C%22y%22%3A42.062645%2C%22width%22%3A359.024505%2C%22height%22%3A32.492644999999996%2C%22text%22%3A%22SpringBootActuator1.x%22%7D%2C%7B%22x%22%3A87.13131%2C%22y%22%3A125.93442%2C%22width%22%3A165.92994%2C%22height%22%3A25.26043%2C%22text%22%3A%22%E6%94%AF%E6%8C%81SpringMVC%22%7D%2C%7B%22x%22%3A677.55615%2C%22y%22%3A148.45367%2C%22width%22%3A311.53241%2C%22height%22%3A24.915550000000025%2C%22text%22%3A%22%E6%94%AF%E6%8C%81SpringMVCJAX-RS%E4%BB%A5%E5%8F%8A%22%7D%2C%7B%22x%22%3A87.00085%2C%22y%22%3A168.59048%2C%22width%22%3A215.56183%2C%22height%22%3A21.659599999999983%2C%22text%22%3A%22%E5%9F%BA%E4%BA%8E%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%B1%95%22%7D%2C%7B%22x%22%3A678.6566%2C%22y%22%3A180.2312%2C%22width%22%3A91.65485999999999%2C%22height%22%3A19.936829999999986%2C%22text%22%3A%22Webflux%22%7D%2C%7B%22x%22%3A86.64333%2C%22y%22%3A209.86098%2C%22width%22%3A167.46859%2C%22height%22%3A20.92940999999999%2C%22text%22%3A%22%E5%B1%82%E7%BA%A7Metrics%E9%85%8D%E7%BD%AE%22%7D%2C%7B%22x%22%3A675.53754%2C%22y%22%3A219.73846%2C%22width%22%3A177.46520999999996%2C%22height%22%3A24.87297000000001%2C%22text%22%3A%22%E6%B3%A8%E8%A7%A3%E9%A9%B1%E5%8A%A8%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%B1%95%22%7D%2C%7B%22x%22%3A86.71498%2C%22y%22%3A250.34071%2C%22width%22%3A188.06212000000002%2C%22height%22%3A24.64891%2C%22text%22%3A%22%E8%87%AA%E5%AE%9A%E4%B9%89Metrics%E6%94%B6%E9%9B%86%22%7D%2C%7B%22x%22%3A677.4253%2C%22y%22%3A259.84558%2C%22width%22%3A230.59439999999995%2C%22height%22%3A24.652770000000032%2C%22text%22%3A%22%E5%B1%82%E7%BA%A7%26%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4Metrics%22%7D%2C%7B%22x%22%3A85.906654%2C%22y%22%3A292.81625%2C%22width%22%3A196.172546%2C%22height%22%3A24.04454999999996%2C%22text%22%3A%22%E9%BB%98%E8%AE%A4%E8%BE%83%E5%B0%91%E7%9A%84%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%22%7D%2C%7B%22x%22%3A676.92834%2C%22y%22%3A302.71722%2C%22width%22%3A347.57336%2C%22height%22%3A25.69164999999998%2C%22text%22%3A%22%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8MicroMeter%2C%E5%BC%BA%E5%A4%A7%2C%E4%BE%BF%E6%8D%B7%22%7D%2C%7B%22x%22%3A675.95685%2C%22y%22%3A345.00763%2C%22width%22%3A198.69875000000002%2C%22height%22%3A23.43889999999999%2C%22text%22%3A%22%E9%BB%98%E8%AE%A4%E4%B8%B0%E5%AF%8C%E7%9A%84%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22SpringBootActuator2.X%20SpringBootActuator1.x%20%E6%94%AF%E6%8C%81SpringMVC%20%E6%94%AF%E6%8C%81SpringMVCJAX-RS%E4%BB%A5%E5%8F%8A%20%E5%9F%BA%E4%BA%8E%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%B1%95%20Webflux%20%E5%B1%82%E7%BA%A7Metrics%E9%85%8D%E7%BD%AE%20%E6%B3%A8%E8%A7%A3%E9%A9%B1%E5%8A%A8%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%B1%95%20%E8%87%AA%E5%AE%9A%E4%B9%89Metrics%E6%94%B6%E9%9B%86%20%E5%B1%82%E7%BA%A7%26%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4Metrics%20%E9%BB%98%E8%AE%A4%E8%BE%83%E5%B0%91%E7%9A%84%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%20%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8MicroMeter%2C%E5%BC%BA%E5%A4%A7%2C%E4%BE%BF%E6%8D%B7%20%E9%BB%98%E8%AE%A4%E4%B8%B0%E5%AF%8C%E7%9A%84%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A1068%2C%22height%22%3A430%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606884394162-ac7f2d8e-7abb-44df-9998-fb0f2705f238.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_14%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="430px"></span></p>
<h4 id="XY3uL" data-lake-id="a0f195c6161de3fa47a70532d0237f14" data-wording="true">1.3、如何使用</h4>
<ul data-lake-id="395223c925126afb8711ebdc6bdea48e">
<li data-lake-id="25613a967e3c9fbde4cdae442d1b125b" data-wording="true">引入场景</li>
<li data-lake-id="ee796bd201028d2e878cb7d625b771f0" data-wording="true">访问 <a href="http://localhost:8080/actuator/" rel="noopener noreferrer" target="_blank">http://localhost:8080/actuator/</a>**</li>
<li data-lake-id="7951ff364e370959f4f8e567cd620570" data-wording="true">暴露所有监控信息为HTTP</li>
</ul>
<div id="HGJFd" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22yaml%22%2C%22code%22%3A%22management%3A%5Cn%20%20endpoints%3A%5Cn%20%20%20%20enabled-by-default%3A%20true%20%23%E6%9A%B4%E9%9C%B2%E6%89%80%E6%9C%89%E7%AB%AF%E7%82%B9%E4%BF%A1%E6%81%AF%5Cn%20%20%20%20web%3A%5Cn%20%20%20%20%20%20exposure%3A%5Cn%20%20%20%20%20%20%20%20include%3A%20'*'%20%20%23%E4%BB%A5web%E6%96%B9%E5%BC%8F%E6%9A%B4%E9%9C%B2%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22HGJFd%22%7D" data-language="yaml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">management:
  endpoints:
    enabled-by-default: true #暴露所有端点信息
    web:
      exposure:
        include: '*'  #以web方式暴露</pre>
</div>
</div>
</div>
</div>
<ul data-lake-id="30a093c54aa351984e5ac2d89dd89819">
<li data-lake-id="a79e0ac40bcf24e9d15533b073b90bc8" data-wording="true">测试</li>
</ul>
<p data-lake-id="6da02192ae102afa9493b83717783a6f" data-wording="true"><a href="http://localhost:8080/actuator/beans" rel="noopener noreferrer" target="_blank">http://localhost:8080/actuator/beans</a></p>
<p data-lake-id="a64168d089b26344b603bf1625563e23" data-wording="true"><a href="http://localhost:8080/actuator/configprops" rel="noopener noreferrer" target="_blank">http://localhost:8080/actuator/configprops</a></p>
<p data-lake-id="0270f3f3e4a96fc6d9ceb640894b472e" data-wording="true"><a href="http://localhost:8080/actuator/metrics" rel="noopener noreferrer" target="_blank">http://localhost:8080/actuator/metrics</a></p>
<p data-lake-id="51328f31f02646ace05414bdb37f0edb" data-wording="true"><a href="http://localhost:8080/actuator/metrics/jvm.gc.pause" rel="noopener noreferrer" target="_blank">http://localhost:8080/actuator/metrics/jvm.gc.pause</a></p>
<p data-lake-id="2e01cb461caf319f2c2705d88c2aec37" data-wording="true"><a href="http://localhost:8080/actuator/metrics" rel="noopener noreferrer" target="_blank">http://localhost:8080/actuator/</a>endpointName/detailPath<br>。。。。。。</p>
<h3 id="KBTP3" data-lake-id="909066774c22f0790192e61922bd2419" data-wording="true">2、Actuator Endpoint</h3>
<h4 id="FaYl8" data-lake-id="5793e76137efb1617489c81465ef7240" data-wording="true">2.1、最常使用的端点</h4>
<div id="XC0wN" data-card-type="block" data-lake-card="table" data-card-value="data:%7B%22rows%22%3A21%2C%22cols%22%3A2%2C%22html%22%3A%22%3Ctable%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20751px%3B%5C%22%3E%3Ccolgroup%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22275%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22476%5C%22%20%2F%3E%3C%2Fcolgroup%3E%3Cthead%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3EID%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%E6%8F%8F%E8%BF%B0%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22b3368687d088517e56889aafde6977d1%5C%22%3E%3Ccode%3Eauditevents%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22de0606450bb05a20bc1275c8fff72cb3%5C%22%3E%E6%9A%B4%E9%9C%B2%E5%BD%93%E5%89%8D%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%AE%A1%E6%A0%B8%E4%BA%8B%E4%BB%B6%E4%BF%A1%E6%81%AF%E3%80%82%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%3Ccode%3EAuditEventRepository%E7%BB%84%E4%BB%B6%3C%2Fcode%3E%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2297cc14f8234287b5b4f648d118756fa2%5C%22%3E%3Ccode%3Ebeans%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e750d149f669aafd553acd975ed0ccdd%5C%22%3E%E6%98%BE%E7%A4%BA%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%89%80%E6%9C%89Spring%20Bean%E7%9A%84%E5%AE%8C%E6%95%B4%E5%88%97%E8%A1%A8%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%222d845e35c395d2e92325d8562e44f391%5C%22%3E%3Ccode%3Ecaches%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22455737fc989ac6af87e96dae27bfcab6%5C%22%3E%E6%9A%B4%E9%9C%B2%E5%8F%AF%E7%94%A8%E7%9A%84%E7%BC%93%E5%AD%98%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2266c1c7f4d42b6c151416b25be4db9d80%5C%22%3E%3Ccode%3Econditions%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%3E%3Cp%20data-lake-id%3D%5C%22eb4465bb517ea14c2fdd89997e8afcfe%5C%22%3E%E6%98%BE%E7%A4%BA%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%9A%84%E6%89%80%E6%9C%89%E6%9D%A1%E4%BB%B6%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%8C%B9%E9%85%8D%E6%88%96%E4%B8%8D%E5%8C%B9%E9%85%8D%E7%9A%84%E5%8E%9F%E5%9B%A0%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22b1b846d7cd95e3705b8b8c7bc456d448%5C%22%3E%3Ccode%3Econfigprops%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2298b450f345b2371abbca9f872a6551ca%5C%22%3E%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%3Ccode%3E%40ConfigurationProperties%3C%2Fcode%3E%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d834d9d93f109dfb9c0cc997d50a1853%5C%22%3E%3Ccode%3Eenv%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%221aecca5671d01ea502f81054821db640%5C%22%3E%E6%9A%B4%E9%9C%B2Spring%E7%9A%84%E5%B1%9E%E6%80%A7%3Ccode%3EConfigurableEnvironment%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22fa5b01a3a28869990c60f86b0f2a9bf2%5C%22%3E%3Ccode%3Eflyway%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%227bc291b603c6c5ced14780a7809ed9d2%5C%22%3E%E6%98%BE%E7%A4%BA%E5%B7%B2%E5%BA%94%E7%94%A8%E7%9A%84%E6%89%80%E6%9C%89Flyway%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB%E3%80%82%3Cbr%20%2F%3E%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%3Ccode%3EFlyway%3C%2Fcode%3E%E7%BB%84%E4%BB%B6%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22a2af88f9e32b28a00bb6b35168d5ea40%5C%22%3E%3Ccode%3Ehealth%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22c42e6c259ef4cf4c833cc4787bacbda0%5C%22%3E%E6%98%BE%E7%A4%BA%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E7%8A%B6%E5%86%B5%E4%BF%A1%E6%81%AF%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ddc38a97703c8248126729aa9a4f4b70%5C%22%3E%3Ccode%3Ehttptrace%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22db7c8bede3305fc37434ae594048f2f1%5C%22%3E%E6%98%BE%E7%A4%BAHTTP%E8%B7%9F%E8%B8%AA%E4%BF%A1%E6%81%AF%EF%BC%88%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E6%9C%80%E8%BF%91100%E4%B8%AAHTTP%E8%AF%B7%E6%B1%82-%E5%93%8D%E5%BA%94%EF%BC%89%E3%80%82%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%3Ccode%3EHttpTraceRepository%3C%2Fcode%3E%E7%BB%84%E4%BB%B6%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e77587b724577b7b01e2471bf699a3dd%5C%22%3E%3Ccode%3Einfo%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22fc566709fc2158ccddea69dd1974cb57%5C%22%3E%E6%98%BE%E7%A4%BA%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%A1%E6%81%AF%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2257fc55ae8fc555324366e2202299f20b%5C%22%3E%3Ccode%3Eintegrationgraph%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2283d99573a8c3d59b19607e75ab6df2e3%5C%22%3E%E6%98%BE%E7%A4%BASpring%C2%A0%3Ccode%3E%3Cspan%3Eintegrationgraph%3C%2Fspan%3E%3C%2Fcode%3E%20%E3%80%82%E9%9C%80%E8%A6%81%E4%BE%9D%E8%B5%96%3Ccode%3Espring-integration-core%3C%2Fcode%3E%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%228fa22bac8d533c2fb189cb4c64e7ec7e%5C%22%3E%3Ccode%3Eloggers%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22cb098e3ae396b53ec51337cf863bcd2c%5C%22%3E%E6%98%BE%E7%A4%BA%E5%92%8C%E4%BF%AE%E6%94%B9%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%97%A5%E5%BF%97%E7%9A%84%E9%85%8D%E7%BD%AE%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22cb70a8e943c1c77ef73505c73f56734f%5C%22%3E%3Ccode%3Eliquibase%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%223db44602e6a78ab05563330a71f07f74%5C%22%3E%E6%98%BE%E7%A4%BA%E5%B7%B2%E5%BA%94%E7%94%A8%E7%9A%84%E6%89%80%E6%9C%89Liquibase%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB%E3%80%82%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%3Ccode%3ELiquibase%3C%2Fcode%3E%E7%BB%84%E4%BB%B6%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%225ed6b84f57746e6f4950077be2836d35%5C%22%3E%3Ccode%3Emetrics%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%228bb5a83a8173e2477cb9d656e28d0aaa%5C%22%3E%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E2%80%9C%E6%8C%87%E6%A0%87%E2%80%9D%E4%BF%A1%E6%81%AF%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d8488a1895d603d6e0c8f968e49504b7%5C%22%3E%3Ccode%3Emappings%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22057d7e7ecd4fe1c4a4d438efa06aa987%5C%22%3E%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%3Ccode%3E%40RequestMapping%3C%2Fcode%3E%E8%B7%AF%E5%BE%84%E5%88%97%E8%A1%A8%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%222c40dd0cdc342722b97a2eaf560978c7%5C%22%3E%3Ccode%3Escheduledtasks%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d9fcfd04b7a33106b6dac3016b83c9c0%5C%22%3E%E6%98%BE%E7%A4%BA%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%224ff1f26db71134f9552430191398dbbc%5C%22%3E%3Ccode%3Esessions%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22fdd861953244dba1e13560b7ff0c2831%5C%22%3E%E5%85%81%E8%AE%B8%E4%BB%8ESpring%20Session%E6%94%AF%E6%8C%81%E7%9A%84%E4%BC%9A%E8%AF%9D%E5%AD%98%E5%82%A8%E4%B8%AD%E6%A3%80%E7%B4%A2%E5%92%8C%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E4%BC%9A%E8%AF%9D%E3%80%82%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8Spring%20Session%E7%9A%84%E5%9F%BA%E4%BA%8EServlet%E7%9A%84Web%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%223b0e678e540b1da7e768e287445989c3%5C%22%3E%3Ccode%3Eshutdown%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e6d7db11d2880b025220b612991f24cf%5C%22%3E%E4%BD%BF%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%AD%A3%E5%B8%B8%E5%85%B3%E9%97%AD%E3%80%82%E9%BB%98%E8%AE%A4%E7%A6%81%E7%94%A8%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22818b951259d99edc64ea5600215ffff8%5C%22%3E%3Ccode%3Estartup%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2242421bd4aa1ddb42385ca6843d17d239%5C%22%3E%E6%98%BE%E7%A4%BA%E7%94%B1%3Ccode%3E%3Cspan%3EApplicationStartup%3C%2Fspan%3E%3C%2Fcode%3E%E6%94%B6%E9%9B%86%E7%9A%84%E5%90%AF%E5%8A%A8%E6%AD%A5%E9%AA%A4%E6%95%B0%E6%8D%AE%E3%80%82%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%3Ccode%3ESpringApplication%3C%2Fcode%3E%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE%3Ccode%3EBufferingApplicationStartup%3C%2Fcode%3E%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%225de0f1c89bf73d74f40b253dec5822f3%5C%22%3E%3Ccode%3Ethreaddump%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%220f7fe014cd566e2896c2013b7a0614fe%5C%22%3E%E6%89%A7%E8%A1%8C%E7%BA%BF%E7%A8%8B%E8%BD%AC%E5%82%A8%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22margin%22%3Afalse%2C%22hideBorder%22%3Afalse%2C%22id%22%3A%22XC0wN%22%7D">
<table class="lake-table" align="left"><colgroup><col span="1" width="275"><col span="1" width="476"></colgroup>
<thead>
<tr>
<td>ID</td>
<td>描述</td>










</tr>










</thead>
<tbody>
<tr>
<td>
<p data-lake-id="b3368687d088517e56889aafde6977d1"><code>auditevents</code></p>










</td>
<td>
<p data-lake-id="de0606450bb05a20bc1275c8fff72cb3">暴露当前应用程序的审核事件信息。需要一个<code>AuditEventRepository组件</code>。</p>










</td>










</tr>
<tr>
<td>
<p data-lake-id="97cc14f8234287b5b4f648d118756fa2"><code>beans</code></p>










</td>
<td>
<p data-lake-id="e750d149f669aafd553acd975ed0ccdd">显示应用程序中所有Spring Bean的完整列表。</p>










</td>










</tr>
<tr>
<td>
<p data-lake-id="2d845e35c395d2e92325d8562e44f391"><code>caches</code></p>










</td>
<td>
<p data-lake-id="455737fc989ac6af87e96dae27bfcab6">暴露可用的缓存。</p>










</td>










</tr>
<tr>
<td>
<p data-lake-id="66c1c7f4d42b6c151416b25be4db9d80"><code>conditions</code></p>










</td>
<td>
<p data-lake-id="eb4465bb517ea14c2fdd89997e8afcfe">显示自动配置的所有条件信息，包括匹配或不匹配的原因。</p>










</td>










</tr>
<tr>
<td>
<p data-lake-id="b1b846d7cd95e3705b8b8c7bc456d448"><code>configprops</code></p>










</td>
<td>
<p data-lake-id="98b450f345b2371abbca9f872a6551ca">显示所有<code>@ConfigurationProperties</code>。</p>










</td>










</tr>
<tr>
<td>
<p data-lake-id="d834d9d93f109dfb9c0cc997d50a1853"><code>env</code></p>










</td>
<td>
<p data-lake-id="1aecca5671d01ea502f81054821db640">暴露Spring的属性<code>ConfigurableEnvironment</code></p>










</td>










</tr>
<tr>
<td>
<p data-lake-id="fa5b01a3a28869990c60f86b0f2a9bf2"><code>flyway</code></p>










</td>
<td>
<p data-lake-id="7bc291b603c6c5ced14780a7809ed9d2">显示已应用的所有Flyway数据库迁移。<br>需要一个或多个<code>Flyway</code>组件。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="a2af88f9e32b28a00bb6b35168d5ea40"><code>health</code></p>











</td>
<td>
<p data-lake-id="c42e6c259ef4cf4c833cc4787bacbda0">显示应用程序运行状况信息。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="ddc38a97703c8248126729aa9a4f4b70"><code>httptrace</code></p>











</td>
<td>
<p data-lake-id="db7c8bede3305fc37434ae594048f2f1">显示HTTP跟踪信息（默认情况下，最近100个HTTP请求-响应）。需要一个<code>HttpTraceRepository</code>组件。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="e77587b724577b7b01e2471bf699a3dd"><code>info</code></p>











</td>
<td>
<p data-lake-id="fc566709fc2158ccddea69dd1974cb57">显示应用程序信息。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="57fc55ae8fc555324366e2202299f20b"><code>integrationgraph</code></p>











</td>
<td>
<p data-lake-id="83d99573a8c3d59b19607e75ab6df2e3">显示Spring&nbsp;<code>integrationgraph</code> 。需要依赖<code>spring-integration-core</code>。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="8fa22bac8d533c2fb189cb4c64e7ec7e"><code>loggers</code></p>











</td>
<td>
<p data-lake-id="cb098e3ae396b53ec51337cf863bcd2c">显示和修改应用程序中日志的配置。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="cb70a8e943c1c77ef73505c73f56734f"><code>liquibase</code></p>











</td>
<td>
<p data-lake-id="3db44602e6a78ab05563330a71f07f74">显示已应用的所有Liquibase数据库迁移。需要一个或多个<code>Liquibase</code>组件。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="5ed6b84f57746e6f4950077be2836d35"><code>metrics</code></p>











</td>
<td>
<p data-lake-id="8bb5a83a8173e2477cb9d656e28d0aaa">显示当前应用程序的“指标”信息。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="d8488a1895d603d6e0c8f968e49504b7"><code>mappings</code></p>











</td>
<td>
<p data-lake-id="057d7e7ecd4fe1c4a4d438efa06aa987">显示所有<code>@RequestMapping</code>路径列表。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="2c40dd0cdc342722b97a2eaf560978c7"><code>scheduledtasks</code></p>











</td>
<td>
<p data-lake-id="d9fcfd04b7a33106b6dac3016b83c9c0">显示应用程序中的计划任务。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="4ff1f26db71134f9552430191398dbbc"><code>sessions</code></p>











</td>
<td>
<p data-lake-id="fdd861953244dba1e13560b7ff0c2831">允许从Spring Session支持的会话存储中检索和删除用户会话。需要使用Spring Session的基于Servlet的Web应用程序。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="3b0e678e540b1da7e768e287445989c3"><code>shutdown</code></p>











</td>
<td>
<p data-lake-id="e6d7db11d2880b025220b612991f24cf">使应用程序正常关闭。默认禁用。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="818b951259d99edc64ea5600215ffff8"><code>startup</code></p>











</td>
<td>
<p data-lake-id="42421bd4aa1ddb42385ca6843d17d239">显示由<code>ApplicationStartup</code>收集的启动步骤数据。需要使用<code>SpringApplication</code>进行配置<code>BufferingApplicationStartup</code>。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="5de0f1c89bf73d74f40b253dec5822f3"><code>threaddump</code></p>











</td>
<td>
<p data-lake-id="0f7fe014cd566e2896c2013b7a0614fe">执行线程转储。</p>











</td>











</tr>











</tbody>











</table>











</div>
<p data-lake-id="9ded45be96a1522206aa43202b27d505">&nbsp;</p>
<p data-lake-id="52bb16188e4528bd9895c3466f622833">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">&nbsp;</p>
<p data-lake-id="bef805ad6d41fbb75301d13c42ff1c7a" data-wording="true">如果您的应用程序是Web应用程序（Spring MVC，Spring WebFlux或Jersey），则可以使用以下附加端点：</p>
<div id="1RAY8" data-card-type="block" data-lake-card="table" data-card-value="data:%7B%22rows%22%3A5%2C%22cols%22%3A2%2C%22html%22%3A%22%3Ctable%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20720px%3B%5C%22%3E%3Ccolgroup%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22244%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22476%5C%22%20%2F%3E%3C%2Fcolgroup%3E%3Cthead%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3EID%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%E6%8F%8F%E8%BF%B0%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22862050e4a58ee933ffc3b7d617a26019%5C%22%3E%3Ccode%3Eheapdump%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22084973bb63cdd6937d4b278f5efa4f01%5C%22%3E%E8%BF%94%E5%9B%9E%3Ccode%3Ehprof%3C%2Fcode%3E%E5%A0%86%E8%BD%AC%E5%82%A8%E6%96%87%E4%BB%B6%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22f704cf4700b977d98b76d17fba8f94ca%5C%22%3E%3Ccode%3Ejolokia%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22250c1b4743c97e365f1e2a3a15260b51%5C%22%3E%E9%80%9A%E8%BF%87HTTP%E6%9A%B4%E9%9C%B2JMX%20bean%EF%BC%88%E9%9C%80%E8%A6%81%E5%BC%95%E5%85%A5Jolokia%EF%BC%8C%E4%B8%8D%E9%80%82%E7%94%A8%E4%BA%8EWebFlux%EF%BC%89%E3%80%82%E9%9C%80%E8%A6%81%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96%3Ccode%3Ejolokia-core%3C%2Fcode%3E%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2284668e8d7b4943d056088861d7ed004c%5C%22%3E%3Ccode%3Elogfile%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22940f6d1ba383e193cf79cb615ee66b80%5C%22%3E%E8%BF%94%E5%9B%9E%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%88%E5%A6%82%E6%9E%9C%E5%B7%B2%E8%AE%BE%E7%BD%AE%3Ccode%3Elogging.file.name%3C%2Fcode%3E%E6%88%96%3Ccode%3Elogging.file.path%3C%2Fcode%3E%E5%B1%9E%E6%80%A7%EF%BC%89%E3%80%82%E6%94%AF%E6%8C%81%E4%BD%BF%E7%94%A8HTTP%3Ccode%3ERange%3C%2Fcode%3E%E6%A0%87%E5%A4%B4%E6%9D%A5%E6%A3%80%E7%B4%A2%E9%83%A8%E5%88%86%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2254f19d440fc7154ad4c09ba35a3f9ff2%5C%22%3E%3Ccode%3Eprometheus%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2291de80c13f96339cbba72955c18d0919%5C%22%3E%E4%BB%A5Prometheus%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%AF%E4%BB%A5%E6%8A%93%E5%8F%96%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%85%AC%E5%BC%80%E6%8C%87%E6%A0%87%E3%80%82%E9%9C%80%E8%A6%81%E4%BE%9D%E8%B5%96%3Ccode%3Emicrometer-registry-prometheus%3C%2Fcode%3E%E3%80%82%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22margin%22%3Afalse%2C%22hideBorder%22%3Afalse%2C%22id%22%3A%221RAY8%22%7D">
<table class="lake-table" align="left"><colgroup><col span="1" width="244"><col span="1" width="476"></colgroup>
<thead>
<tr>
<td>ID</td>
<td>描述</td>











</tr>











</thead>
<tbody>
<tr>
<td>
<p data-lake-id="862050e4a58ee933ffc3b7d617a26019"><code>heapdump</code></p>











</td>
<td>
<p data-lake-id="084973bb63cdd6937d4b278f5efa4f01">返回<code>hprof</code>堆转储文件。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="f704cf4700b977d98b76d17fba8f94ca"><code>jolokia</code></p>











</td>
<td>
<p data-lake-id="250c1b4743c97e365f1e2a3a15260b51">通过HTTP暴露JMX bean（需要引入Jolokia，不适用于WebFlux）。需要引入依赖<code>jolokia-core</code>。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="84668e8d7b4943d056088861d7ed004c"><code>logfile</code></p>











</td>
<td>
<p data-lake-id="940f6d1ba383e193cf79cb615ee66b80">返回日志文件的内容（如果已设置<code>logging.file.name</code>或<code>logging.file.path</code>属性）。支持使用HTTP<code>Range</code>标头来检索部分日志文件的内容。</p>











</td>











</tr>
<tr>
<td>
<p data-lake-id="54f19d440fc7154ad4c09ba35a3f9ff2"><code>prometheus</code></p>











</td>
<td>
<p data-lake-id="91de80c13f96339cbba72955c18d0919">以Prometheus服务器可以抓取的格式公开指标。需要依赖<code>micrometer-registry-prometheus</code>。</p>











</td>











</tr>











</tbody>











</table>











</div>
<p data-lake-id="de2024d3bd161ec4ce9cfc2385a6da86">&nbsp;</p>
<p data-lake-id="1a9cfde5cae5daf2d68ab4cb0898ff8b">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">&nbsp;</p>
<p data-lake-id="45d763db451a720e531d7f9d0d576ddb" data-wording="true">最常用的Endpoint</p>
<ul data-lake-id="fc93cd479c7d6ec4cbd9a27a512decc3">
<li data-lake-id="4647aa2dc6151db24ac49e116faddfdb" data-wording="true"><strong>Health：监控状况</strong></li>
<li data-lake-id="c19f176cdb2189d44efdf52d59f9ded2" data-wording="true"><strong>Metrics：运行时指标</strong></li>
<li data-lake-id="ab3f63eaf5bb50a659a70004888996c8" data-wording="true"><strong>Loggers：日志记录</strong></li>










</ul>
<h4 id="TvpJp" data-lake-id="1bba4b0719b602bca5e2ae5497c8fbf8" data-wording="true">2.2、Health Endpoint</h4>
<p data-lake-id="aa1928da92e6c6f0d89621c0ed6ad6c9" data-wording="true">　　健康检查端点，我们一般用于在云平台，平台会定时的检查应用的健康状况，我们就需要Health Endpoint可以为平台返回当前应用的一系列组件健康状况的集合。</p>
<p data-lake-id="49e2437ad11178825c28f79063d07336" data-wording="true">重要的几点：</p>
<ul data-lake-id="869fae26f2c96327f543c00e8e3f69ad">
<li data-lake-id="58dd8c11edabcbeaf6977ea41bd3a8b3" data-wording="true">health endpoint返回的结果，应该是一系列健康检查后的一个汇总报告</li>
<li data-lake-id="af9e69c88a667f00a25bb45375b60004" data-wording="true">很多的健康检查默认已经自动配置好了，比如：数据库、redis等</li>
<li data-lake-id="b18e890e7ae149eb9dae7dc5913a6046" data-wording="true">可以很容易的添加自定义的健康检查机制</li>











</ul>
<p data-lake-id="1489ee8fe1c0e5158eb8a7db4f1be846" data-wording="true"><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402181102986-992992403.png" alt="" loading="lazy"></p>
<h4 id="i0n94" data-lake-id="f0ae9af615d52cdf957cb34d498d7918" data-wording="true">2.3、Metrics Endpoint</h4>
<p data-lake-id="9f76b0ec3768c64fb5564e450ea1acc6" data-wording="true">提供详细的、层级的、空间指标信息，这些信息可以被pull（主动推送）或者push（被动获取）方式得到；</p>
<ul data-lake-id="08491b0173c407f1b1c692fce617e43b">
<li data-lake-id="10431bec1e2dffd498f10c9e7d5a838d" data-wording="true">通过Metrics对接多种监控系统</li>
<li data-lake-id="27776f07dfcd181d49cdf82254c30464" data-wording="true">简化核心Metrics开发</li>
<li data-lake-id="62d2bb63b27b30a1c426b3963fe6c617" data-wording="true">添加自定义Metrics或者扩展已有Metrics</li>










</ul>
<p data-lake-id="45c9566d67240d216c390a8658f6ace4" data-wording="true"><span class="lake-card-margin-top lake-card-margin-bottom" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606909073222-c6e77ca3-4b1c-4f38-a1c6-8614dec4f7bc.png%22%2C%22originWidth%22%3A346%2C%22originHeight%22%3A645%2C%22name%22%3A%22image.png%22%2C%22size%22%3A28047%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A21.461357%2C%22y%22%3A13.895318%2C%22width%22%3A46.562087999999996%2C%22height%22%3A10.237088%2C%22text%22%3A%22names%3A%22%7D%2C%7B%22x%22%3A97.19389%2C%22y%22%3A35.668594%2C%22width%22%3A172.51321000000002%2C%22height%22%3A13.860806000000004%2C%22text%22%3A%22%5C%22http.server.requests%5C%22%22%7D%2C%7B%22x%22%3A41.9989%2C%22y%22%3A36.79226%2C%22width%22%3A16.312530000000002%2C%22height%22%3A12.789256000000002%2C%22text%22%3A%220%3A%22%7D%2C%7B%22x%22%3A97.03207%2C%22y%22%3A62.440475%2C%22width%22%3A140.85753%2C%22height%22%3A14.673920000000003%2C%22text%22%3A%22%5C%22jvm.buffer.count%5C%22%22%7D%2C%7B%22x%22%3A40.81016%2C%22y%22%3A62.505447%2C%22width%22%3A73.62716499999999%2C%22height%22%3A16.113068000000005%2C%22text%22%3A%221%3A%5C%22%22%7D%2C%7B%22x%22%3A38.70394%2C%22y%22%3A84.07569%2C%22width%22%3A249.34536000000003%2C%22height%22%3A21.696405%2C%22text%22%3A%222%3A%5C%22jvm%2Cbuffer.memory.used%5C%22%22%7D%2C%7B%22x%22%3A38.12375%2C%22y%22%3A110.9498%2C%22width%22%3A272.54037000000005%2C%22height%22%3A19.063550000000006%2C%22text%22%3A%223%3A%5C%22jivm%2Cbuffer.total.capacity%22%7D%2C%7B%22x%22%3A40.048195%2C%22y%22%3A136.03058%2C%22width%22%3A19.128115%2C%22height%22%3A15.378770000000003%2C%22text%22%3A%224%3A%22%7D%2C%7B%22x%22%3A99.13679%2C%22y%22%3A136.15002%2C%22width%22%3A156.96880999999996%2C%22height%22%3A15.345189999999974%2C%22text%22%3A%22%5C%22jivm.classes.1oaded%5C%22%22%7D%2C%7B%22x%22%3A40.551476%2C%22y%22%3A161.63155%2C%22width%22%3A17.453924%2C%22height%22%3A15.00555%2C%22text%22%3A%225%3A%22%7D%2C%7B%22x%22%3A97.60374%2C%22y%22%3A161.71959%2C%22width%22%3A173.17559%2C%22height%22%3A14.997359999999986%2C%22text%22%3A%22%5C%22jivm.classes.un1oaded%5C%22%22%7D%2C%7B%22x%22%3A42.366314%2C%22y%22%3A185.93298%2C%22width%22%3A16.870525999999998%2C%22height%22%3A15.167090000000002%2C%22text%22%3A%226%3A%22%7D%2C%7B%22x%22%3A98.119064%2C%22y%22%3A186.69511%2C%22width%22%3A180.658496%2C%22height%22%3A14.631529999999998%2C%22text%22%3A%22%5C%22jvm.gc.live.data.size%22%7D%2C%7B%22x%22%3A41.36342%2C%22y%22%3A210.71394%2C%22width%22%3A18.889514000000005%2C%22height%22%3A16.337439999999987%2C%22text%22%3A%227%3A%22%7D%2C%7B%22x%22%3A97.78452%2C%22y%22%3A212.63145%2C%22width%22%3A171.17153000000002%2C%22height%22%3A14.824240000000003%2C%22text%22%3A%22%5C%22jivm.gc.max.data.size%22%7D%2C%7B%22x%22%3A40.68118%2C%22y%22%3A236.85783%2C%22width%22%3A19.755122%2C%22height%22%3A15.924569999999989%2C%22text%22%3A%228%3A%22%7D%2C%7B%22x%22%3A95.96364%2C%22y%22%3A235.32672%2C%22width%22%3A199.34626000000003%2C%22height%22%3A17.330630000000014%2C%22text%22%3A%22%5C%22jivm.gc.memory.allocated%5C%22%22%7D%2C%7B%22x%22%3A41.2741%2C%22y%22%3A261.70142%2C%22width%22%3A18.786657000000005%2C%22height%22%3A14.361379999999997%2C%22text%22%3A%229%3A%22%7D%2C%7B%22x%22%3A106.12538%2C%22y%22%3A261.82248%2C%22width%22%3A182.04539999999997%2C%22height%22%3A14.818660000000023%2C%22text%22%3A%22%5C%22jvm.gc.memory.promoted%5C%22%22%7D%2C%7B%22x%22%3A98.70033%2C%22y%22%3A286.94864%2C%22width%22%3A107.53995000000002%2C%22height%22%3A16.080659999999966%2C%22text%22%3A%22%5C%22jvm.gc.pause%5C%22%22%7D%2C%7B%22x%22%3A41.682022%2C%22y%22%3A287.30203%2C%22width%22%3A24.674521999999996%2C%22height%22%3A12.43829999999997%2C%22text%22%3A%2210%3A%22%7D%2C%7B%22x%22%3A97.40542%2C%22y%22%3A309.74634%2C%22width%22%3A173.87664999999998%2C%22height%22%3A16.102760000000046%2C%22text%22%3A%22%5C%22jivm.memory.committed%5C%22%22%7D%2C%7B%22x%22%3A41.580463%2C%22y%22%3A311.54333%2C%22width%22%3A24.892147%2C%22height%22%3A13.238619999999969%2C%22text%22%3A%2211%3A%22%7D%2C%7B%22x%22%3A41.788494%2C%22y%22%3A337.1803%2C%22width%22%3A25.064006000000006%2C%22height%22%3A12.59408000000002%2C%22text%22%3A%2212%3A%22%7D%2C%7B%22x%22%3A100.75128%2C%22y%22%3A338.539%2C%22width%22%3A120.96837000000001%2C%22height%22%3A12.953700000000026%2C%22text%22%3A%22%5C%22jvm.memory.max%3F%22%7D%2C%7B%22x%22%3A99.534134%2C%22y%22%3A361.3467%2C%22width%22%3A130.452426%2C%22height%22%3A14.789800000000014%2C%22text%22%3A%22%5C%22jvm.memory.used%5C%22%22%7D%2C%7B%22x%22%3A41.65386%2C%22y%22%3A362.7384%2C%22width%22%3A24.737239999999993%2C%22height%22%3A12.429699999999968%2C%22text%22%3A%2213%3A%22%7D%2C%7B%22x%22%3A41.696606%2C%22y%22%3A387.02997%2C%22width%22%3A24.552843999999993%2C%22height%22%3A13.703730000000007%2C%22text%22%3A%2214%3A%22%7D%2C%7B%22x%22%3A96.705734%2C%22y%22%3A387.18906%2C%22width%22%3A157.747876%2C%22height%22%3A14.10641000000004%2C%22text%22%3A%22%5C%22jvm.threads.daemon%5C%22%22%7D%2C%7B%22x%22%3A41.673054%2C%22y%22%3A411.75656%2C%22width%22%3A24.763405999999996%2C%22height%22%3A12.802140000000009%2C%22text%22%3A%2215%3A%22%7D%2C%7B%22x%22%3A100.40466%2C%22y%22%3A412.33713%2C%22width%22%3A138.39776999999998%2C%22height%22%3A13.765710000000013%2C%22text%22%3A%22%5C%22jivm.threadsive%22%7D%2C%7B%22x%22%3A41.123158%2C%22y%22%3A436.95273%2C%22width%22%3A25.412222000000007%2C%22height%22%3A12.49212%2C%22text%22%3A%2216%3A%22%7D%2C%7B%22x%22%3A99.52202%2C%22y%22%3A435.8418%2C%22width%22%3A136.73714%2C%22height%22%3A15.511840000000007%2C%22text%22%3A%22%5C%22jvm.threads.peak%5C%22%22%7D%2C%7B%22x%22%3A41.813435%2C%22y%22%3A461.415%2C%22width%22%3A25.218540000000004%2C%22height%22%3A13.68576999999999%2C%22text%22%3A%2217%3A%22%7D%2C%7B%22x%22%3A98.541176%2C%22y%22%3A461.39343%2C%22width%22%3A151.886574%2C%22height%22%3A14.34787%2C%22text%22%3A%22%5C%22jvm.threads.states%22%7D%2C%7B%22x%22%3A102.61737%2C%22y%22%3A486.69217%2C%22width%22%3A117.63448%2C%22height%22%3A13.829380000000015%2C%22text%22%3A%22%5C%221ogback.events%5C%22%22%7D%2C%7B%22x%22%3A43.065796%2C%22y%22%3A487.606%2C%22width%22%3A23.455818%2C%22height%22%3A11.610160000000008%2C%22text%22%3A%2218%3A%22%7D%2C%7B%22x%22%3A42.394176%2C%22y%22%3A512.7775%2C%22width%22%3A24.67376399999999%2C%22height%22%3A12.809660000000008%2C%22text%22%3A%2219%3A%22%7D%2C%7B%22x%22%3A103.27745%2C%22y%22%3A514.232%2C%22width%22%3A141.02863000000002%2C%22height%22%3A10.945860000000039%2C%22text%22%3A%22%5C%22process.Cpu.usage%22%7D%2C%7B%22x%22%3A42.019802%2C%22y%22%3A537.30383%2C%22width%22%3A23.969943999999998%2C%22height%22%3A12.807010000000105%2C%22text%22%3A%2220%3A%22%7D%2C%7B%22x%22%3A102.04301%2C%22y%22%3A536.55133%2C%22width%22%3A152.66132%2C%22height%22%3A14.579669999999965%2C%22text%22%3A%22%5C%22process.start.time%22%7D%2C%7B%22x%22%3A41.852894%2C%22y%22%3A562.1188%2C%22width%22%3A23.016566000000005%2C%22height%22%3A12.19119999999998%2C%22text%22%3A%2221%3A%22%7D%2C%7B%22x%22%3A102.57389%2C%22y%22%3A562.9599%2C%22width%22%3A119.43762999999998%2C%22height%22%3A12.747740000000022%2C%22text%22%3A%22%5C%22process.uptime%5C%22%22%7D%2C%7B%22x%22%3A41.6689%2C%22y%22%3A587.1957%2C%22width%22%3A24.078300000000006%2C%22height%22%3A11.745800000000031%2C%22text%22%3A%2222%3A%22%7D%2C%7B%22x%22%3A101.23732%2C%22y%22%3A586.98145%2C%22width%22%3A135.87216%2C%22height%22%3A13.695150000000012%2C%22text%22%3A%22%5C%22system.cpu.count%5C%22%22%7D%2C%7B%22x%22%3A42.518723%2C%22y%22%3A611.9332%2C%22width%22%3A23.315696999999993%2C%22height%22%3A12.322349999999915%2C%22text%22%3A%2223%3A%22%7D%2C%7B%22x%22%3A98.16156%2C%22y%22%3A610.97174%2C%22width%22%3A136.86467%2C%22height%22%3A15.814560000000029%2C%22text%22%3A%22%5C%22'system.cpu.usage%5C%22%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22names%3A%20%5C%22http.server.requests%5C%22%200%3A%20%5C%22jvm.buffer.count%5C%22%201%3A%5C%22%202%3A%5C%22jvm%2Cbuffer.memory.used%5C%22%203%3A%5C%22jivm%2Cbuffer.total.capacity%204%3A%20%5C%22jivm.classes.1oaded%5C%22%205%3A%20%5C%22jivm.classes.un1oaded%5C%22%206%3A%20%5C%22jvm.gc.live.data.size%207%3A%20%5C%22jivm.gc.max.data.size%208%3A%20%5C%22jivm.gc.memory.allocated%5C%22%209%3A%20%5C%22jvm.gc.memory.promoted%5C%22%20%5C%22jvm.gc.pause%5C%22%2010%3A%20%5C%22jivm.memory.committed%5C%22%2011%3A%2012%3A%20%5C%22jvm.memory.max%3F%20%5C%22jvm.memory.used%5C%22%2013%3A%2014%3A%20%5C%22jvm.threads.daemon%5C%22%2015%3A%20%5C%22jivm.threadsive%2016%3A%20%5C%22jvm.threads.peak%5C%22%2017%3A%20%5C%22jvm.threads.states%20%5C%221ogback.events%5C%22%2018%3A%2019%3A%20%5C%22process.Cpu.usage%2020%3A%20%5C%22process.start.time%2021%3A%20%5C%22process.uptime%5C%22%2022%3A%20%5C%22system.cpu.count%5C%22%2023%3A%20%5C%22'system.cpu.usage%5C%22%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A173%2C%22height%22%3A323%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606909073222-c6e77ca3-4b1c-4f38-a1c6-8614dec4f7bc.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="323px"></span></p>
<h4 id="kgteT" data-lake-id="7a26cb1ba397dfc112537d4472a82c24" data-wording="true">2.4、管理Endpoints</h4>
<p id="sM2QK" data-lake-id="e45820616b04eac7ec6b4de620198bfb" data-wording="true">1、开启与禁用Endpoints</p>
<ul data-lake-id="d8d3bec7cefc900e1393f56636e6287b">
<li data-lake-id="498872579a4b612ddd4749081fc8a566" data-wording="true">默认所有的Endpoint除过shutdown都是开启的。</li>
<li data-lake-id="4697de3f6d08f259cef1e33c504b28cd" data-wording="true">需要开启或者禁用某个Endpoint。配置模式为 &nbsp;<strong>management.endpoint.</strong><strong>&lt;endpointName&gt;</strong><strong>.enabled = true</strong></li>











</ul>
<div id="MsXnV" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22yaml%22%2C%22code%22%3A%22management%3A%5Cn%20%20endpoint%3A%5Cn%20%20%20%20beans%3A%5Cn%20%20%20%20%20%20enabled%3A%20true%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22MsXnV%22%7D" data-language="yaml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">management:
  endpoint:
    beans:
      enabled: true</pre>
</div>
</div>
</div>
</div>
<ul data-lake-id="36381a9f9e485ae9e5e1ae35f51c943e">
<li data-lake-id="ff1483c44680d5344b02069333e81d8a" data-wording="true">或者禁用所有的Endpoint然后手动开启指定的Endpoint</li>
</ul>
<div id="A5k2z" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22yaml%22%2C%22code%22%3A%22management%3A%5Cn%20%20endpoints%3A%5Cn%20%20%20%20enabled-by-default%3A%20false%5Cn%20%20endpoint%3A%5Cn%20%20%20%20beans%3A%5Cn%20%20%20%20%20%20enabled%3A%20true%5Cn%20%20%20%20health%3A%5Cn%20%20%20%20%20%20enabled%3A%20true%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22A5k2z%22%7D" data-language="yaml">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">management:
  endpoints:
    enabled-by-default: false
  endpoint:
    beans:
      enabled: true
    health:
      enabled: true&nbsp;</pre>
</div>
</div>
</div>
</div>
<p id="8Eade" data-lake-id="50afe5b5225f01429bf7540db5fcaffc" data-wording="true">2、暴露Endpoints</p>
<p data-lake-id="9312425d447882dc201158c233a6594d" data-wording="true">支持的暴露方式</p>
<ul data-lake-id="5793ba4a6dbb3c75a88e48ef92ca663d">
<li data-lake-id="c4a9d50342ed4e856636b821140bc8a9" data-wording="true">HTTP：默认只暴露<strong>health</strong>和<strong>info </strong>Endpoint</li>
<li data-lake-id="315270df477ba9a9887eecc879933810" data-wording="true"><strong>JMX</strong>：默认暴露所有Endpoint</li>
<li data-lake-id="3f41149848ad37fd45402e26d4f199c6" data-wording="true">除过health和info，剩下的Endpoint都应该进行保护访问。如果引入SpringSecurity，则会默认配置安全访问规则</li>
</ul>
<div id="PAtkA" data-card-type="block" data-lake-card="table" data-card-value="data:%7B%22rows%22%3A25%2C%22cols%22%3A3%2C%22html%22%3A%22%3Ctable%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20604px%3B%5C%22%3E%3Ccolgroup%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22234%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22184%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22186%5C%22%20%2F%3E%3C%2Fcolgroup%3E%3Cthead%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3EID%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3EJMX%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3EWeb%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2214aabfdcf4f25a2970c96cc0866e4d70%5C%22%3E%3Ccode%3Eauditevents%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22f86dd49c716f29bea458535defac67f7%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%228610da0a4c4cca6464fc5421820bd206%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%228f5abf8aee87302f89e81c3c6ccad565%5C%22%3E%3Ccode%3Ebeans%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2259e51321b05548230ccc552da14e716a%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22abc26de582c81b0d235e6e6e7c9bd2cf%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22a73d9797120f6b020888367986139f0a%5C%22%3E%3Ccode%3Ecaches%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%223d1892fa4ff7e187d76a7c493856e122%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22938cd6511ed4002afae77120fe2af398%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2297600ae4823614281cd65d171ab3ba3e%5C%22%3E%3Ccode%3Econditions%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%227bd274069a7600ce7f24a87e0b65ab1d%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%223f770c7eca5ea63d278a3ec4a8f177ef%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ea4aa50d82f950ae4020b2999f7bd7ed%5C%22%3E%3Ccode%3Econfigprops%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22940b7c286eaed197fdf6c0553f26a590%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%221584394ced7100f855bd7019a3b6cce0%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2213af5bf0bed870a4ed2864bf705cb696%5C%22%3E%3Ccode%3Eenv%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22909f7e92bbb28f64dd5ac40e0c7d3c5b%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d814104151ab0538813bd62a6a10258f%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%224e962a7f2275da87b76aaca4600d9f86%5C%22%3E%3Ccode%3Eflyway%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%227c4ae9bf697c54ceca6ff9f30150c8bb%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22819f9bb978462ab6d80be3bbd24f1aa1%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%220d562c25e63fd2fbbc2ec20b3d81ef2c%5C%22%3E%3Ccode%3Ehealth%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22f06d65923c7bf8ca8b352f4c01ac71fe%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e31fe3fee70d0e66072cf3c53c70e5b2%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d5c4cec788a6ea953f51cfb2e1210a5d%5C%22%3E%3Ccode%3Eheapdump%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d25ecf1a425d9363d19270eaf4928229%5C%22%3EN%2FA%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%227eb4357a573493726f8dcc0436b990a1%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22da757ce1f3beacf88de7405c338d9d2d%5C%22%3E%3Ccode%3Ehttptrace%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%228aa3ed92d88d123a738bd52479a85a25%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2267796c3d148d7ea20dbda53edb6510eb%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22479c38941ed1a00f01e0f68f908a2319%5C%22%3E%3Ccode%3Einfo%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22b549c9febd46431d7aa56b86e0656ce2%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%223ea4e1dbf21cad91b0f924fff1856b89%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22b46b15da584faec2de66a04b0e6be63a%5C%22%3E%3Ccode%3Eintegrationgraph%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22c156d11bb4af082c265cbbba4d0cd342%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2236bf92b7a18e1f13f5d124f01149b2fd%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d9f6e17558e049f7f7c381033adef804%5C%22%3E%3Ccode%3Ejolokia%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d3169e43c677dd40d7e02a8589f77823%5C%22%3EN%2FA%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22584a3e9d562363c0c482d36109bcbcda%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2274f38df0cf4f5fca1e0a84b985b8b27d%5C%22%3E%3Ccode%3Elogfile%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22f85398e444080e0c9297636aef7c04de%5C%22%3EN%2FA%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e3857ce08741d187d6852671917e90d7%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22cd5328f213cfd4210fa4acc11f0cd14c%5C%22%3E%3Ccode%3Eloggers%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%222fcdbceb9845326f6f9695b9d19c5810%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2272dda4e204ab789b849703b004b76442%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2222bcd26ebda5f4126c115611aabe696d%5C%22%3E%3Ccode%3Eliquibase%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22564fa70c8dca35384f1304ce339cf405%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2259dd5a1554d5f3a702c3c626db10adfb%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e528337e4a0f0350ebb70e9e8b80a6e9%5C%22%3E%3Ccode%3Emetrics%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%224369ed7cafaee30ecc061a1e23d11c47%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%224c5666ac091dcf77f0ffc578621cae3b%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d6fcec984eb0c50bf0c1890a528cdfa8%5C%22%3E%3Ccode%3Emappings%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22508c7cf629504c90c83ff9d7804d3c30%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%226b3d5df802c3a63d2271bbf82ac914ae%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22a21d56e998b25f9cb3b0b45d43f0b2ca%5C%22%3E%3Ccode%3Eprometheus%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2284ea1dd6eb7eea5e00da93e6f68774d1%5C%22%3EN%2FA%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22760b66ba7cf638966f665f9b7d210f71%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%224d60ab70f988e592c0f2048d175c1fb5%5C%22%3E%3Ccode%3Escheduledtasks%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d7971399ea4d7df0d4961469120a167c%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d056a516eede92b3ebc332a479abd92a%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22c1f1d9e466d5f64c414c185d2ac9649c%5C%22%3E%3Ccode%3Esessions%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e71f8534780a8694bf708159a0872acc%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22133d59ea2340a50c76cd73d248fe8fa5%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2253ac406947f053cb9874589bc92f5ac0%5C%22%3E%3Ccode%3Eshutdown%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%225d7decaf6f96e8dddbfcb9687978d268%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22e43cef6e2894627c3a36677492bf181d%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22efb9a571c5b60ffe8f1753347c5afa5b%5C%22%3E%3Ccode%3Estartup%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%222fafc2d9130b6a97692d75ae68b491ec%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22c61032c0741ef390dd084b8ec1762893%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%2239861fc9fc5fd37deba2e50747fe8082%5C%22%3E%3Ccode%3Ethreaddump%3C%2Fcode%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22f867a2f2b70fe47b57069fdcb322060d%5C%22%3EYes%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22color%3A%20%23000000%3B%20text-align%3A%20left%3B%20vertical-align%3A%20top%3B%5C%22%3E%3Cp%20data-lake-id%3D%5C%22d51abbd87b7478ce08c235ea90929f76%5C%22%3ENo%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22margin%22%3Afalse%2C%22hideBorder%22%3Afalse%2C%22id%22%3A%22PAtkA%22%7D">
<table class="lake-table" align="left"><colgroup><col span="1" width="234"><col span="1" width="184"><col span="1" width="186"></colgroup>
<thead>
<tr>
<td>ID</td>
<td>JMX</td>
<td>Web</td>
</tr>
</thead>
<tbody>
<tr>
<td>
<p data-lake-id="14aabfdcf4f25a2970c96cc0866e4d70"><code>auditevents</code></p>
</td>
<td>
<p data-lake-id="f86dd49c716f29bea458535defac67f7">Yes</p>
</td>
<td>
<p data-lake-id="8610da0a4c4cca6464fc5421820bd206">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="8f5abf8aee87302f89e81c3c6ccad565"><code>beans</code></p>
</td>
<td>
<p data-lake-id="59e51321b05548230ccc552da14e716a">Yes</p>
</td>
<td>
<p data-lake-id="abc26de582c81b0d235e6e6e7c9bd2cf">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="a73d9797120f6b020888367986139f0a"><code>caches</code></p>
</td>
<td>
<p data-lake-id="3d1892fa4ff7e187d76a7c493856e122">Yes</p>
</td>
<td>
<p data-lake-id="938cd6511ed4002afae77120fe2af398">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="97600ae4823614281cd65d171ab3ba3e"><code>conditions</code></p>
</td>
<td>
<p data-lake-id="7bd274069a7600ce7f24a87e0b65ab1d">Yes</p>
</td>
<td>
<p data-lake-id="3f770c7eca5ea63d278a3ec4a8f177ef">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="ea4aa50d82f950ae4020b2999f7bd7ed"><code>configprops</code></p>
</td>
<td>
<p data-lake-id="940b7c286eaed197fdf6c0553f26a590">Yes</p>
</td>
<td>
<p data-lake-id="1584394ced7100f855bd7019a3b6cce0">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="13af5bf0bed870a4ed2864bf705cb696"><code>env</code></p>
</td>
<td>
<p data-lake-id="909f7e92bbb28f64dd5ac40e0c7d3c5b">Yes</p>
</td>
<td>
<p data-lake-id="d814104151ab0538813bd62a6a10258f">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="4e962a7f2275da87b76aaca4600d9f86"><code>flyway</code></p>
</td>
<td>
<p data-lake-id="7c4ae9bf697c54ceca6ff9f30150c8bb">Yes</p>
</td>
<td>
<p data-lake-id="819f9bb978462ab6d80be3bbd24f1aa1">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="0d562c25e63fd2fbbc2ec20b3d81ef2c"><code>health</code></p>
</td>
<td>
<p data-lake-id="f06d65923c7bf8ca8b352f4c01ac71fe">Yes</p>
</td>
<td>
<p data-lake-id="e31fe3fee70d0e66072cf3c53c70e5b2">Yes</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="d5c4cec788a6ea953f51cfb2e1210a5d"><code>heapdump</code></p>
</td>
<td>
<p data-lake-id="d25ecf1a425d9363d19270eaf4928229">N/A</p>
</td>
<td>
<p data-lake-id="7eb4357a573493726f8dcc0436b990a1">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="da757ce1f3beacf88de7405c338d9d2d"><code>httptrace</code></p>
</td>
<td>
<p data-lake-id="8aa3ed92d88d123a738bd52479a85a25">Yes</p>
</td>
<td>
<p data-lake-id="67796c3d148d7ea20dbda53edb6510eb">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="479c38941ed1a00f01e0f68f908a2319"><code>info</code></p>
</td>
<td>
<p data-lake-id="b549c9febd46431d7aa56b86e0656ce2">Yes</p>
</td>
<td>
<p data-lake-id="3ea4e1dbf21cad91b0f924fff1856b89">Yes</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="b46b15da584faec2de66a04b0e6be63a"><code>integrationgraph</code></p>
</td>
<td>
<p data-lake-id="c156d11bb4af082c265cbbba4d0cd342">Yes</p>
</td>
<td>
<p data-lake-id="36bf92b7a18e1f13f5d124f01149b2fd">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="d9f6e17558e049f7f7c381033adef804"><code>jolokia</code></p>
</td>
<td>
<p data-lake-id="d3169e43c677dd40d7e02a8589f77823">N/A</p>
</td>
<td>
<p data-lake-id="584a3e9d562363c0c482d36109bcbcda">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="74f38df0cf4f5fca1e0a84b985b8b27d"><code>logfile</code></p>
</td>
<td>
<p data-lake-id="f85398e444080e0c9297636aef7c04de">N/A</p>
</td>
<td>
<p data-lake-id="e3857ce08741d187d6852671917e90d7">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="cd5328f213cfd4210fa4acc11f0cd14c"><code>loggers</code></p>
</td>
<td>
<p data-lake-id="2fcdbceb9845326f6f9695b9d19c5810">Yes</p>
</td>
<td>
<p data-lake-id="72dda4e204ab789b849703b004b76442">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="22bcd26ebda5f4126c115611aabe696d"><code>liquibase</code></p>
</td>
<td>
<p data-lake-id="564fa70c8dca35384f1304ce339cf405">Yes</p>
</td>
<td>
<p data-lake-id="59dd5a1554d5f3a702c3c626db10adfb">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="e528337e4a0f0350ebb70e9e8b80a6e9"><code>metrics</code></p>
</td>
<td>
<p data-lake-id="4369ed7cafaee30ecc061a1e23d11c47">Yes</p>
</td>
<td>
<p data-lake-id="4c5666ac091dcf77f0ffc578621cae3b">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="d6fcec984eb0c50bf0c1890a528cdfa8"><code>mappings</code></p>
</td>
<td>
<p data-lake-id="508c7cf629504c90c83ff9d7804d3c30">Yes</p>
</td>
<td>
<p data-lake-id="6b3d5df802c3a63d2271bbf82ac914ae">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="a21d56e998b25f9cb3b0b45d43f0b2ca"><code>prometheus</code></p>
</td>
<td>
<p data-lake-id="84ea1dd6eb7eea5e00da93e6f68774d1">N/A</p>
</td>
<td>
<p data-lake-id="760b66ba7cf638966f665f9b7d210f71">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="4d60ab70f988e592c0f2048d175c1fb5"><code>scheduledtasks</code></p>
</td>
<td>
<p data-lake-id="d7971399ea4d7df0d4961469120a167c">Yes</p>
</td>
<td>
<p data-lake-id="d056a516eede92b3ebc332a479abd92a">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="c1f1d9e466d5f64c414c185d2ac9649c"><code>sessions</code></p>
</td>
<td>
<p data-lake-id="e71f8534780a8694bf708159a0872acc">Yes</p>
</td>
<td>
<p data-lake-id="133d59ea2340a50c76cd73d248fe8fa5">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="53ac406947f053cb9874589bc92f5ac0"><code>shutdown</code></p>
</td>
<td>
<p data-lake-id="5d7decaf6f96e8dddbfcb9687978d268">Yes</p>
</td>
<td>
<p data-lake-id="e43cef6e2894627c3a36677492bf181d">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="efb9a571c5b60ffe8f1753347c5afa5b"><code>startup</code></p>
</td>
<td>
<p data-lake-id="2fafc2d9130b6a97692d75ae68b491ec">Yes</p>
</td>
<td>
<p data-lake-id="c61032c0741ef390dd084b8ec1762893">No</p>
</td>
</tr>
<tr>
<td>
<p data-lake-id="39861fc9fc5fd37deba2e50747fe8082"><code>threaddump</code></p>
</td>
<td>
<p data-lake-id="f867a2f2b70fe47b57069fdcb322060d">Yes</p>
</td>
<td>
<p data-lake-id="d51abbd87b7478ce08c235ea90929f76">No</p>
</td>
</tr>
</tbody>
</table>
</div>
<p data-lake-id="e6898beea76567bac7d1174de294257c">&nbsp;</p>
<p data-lake-id="43a01734b00427889e24d68f901b2b8b">&nbsp;</p>
<p data-lake-id="1290eceb924bb38315b82e4598e99a35">&nbsp;</p>
<p>　　</p>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<h3>3、指标监控(可视化)：Boot Admin Server</h3>
<p>项目地址：<a href="https://github.com/codecentric/spring-boot-admin" rel="noopener noreferrer" target="_blank">https://github.com/codecentric/spring-boot-admin</a></p>
<p>快速开始：<a href="https://codecentric.github.io/spring-boot-admin/2.3.1/#getting-started">https://codecentric.github.io/spring-boot-admin/2.3.1/#getting-started</a></p>
<blockquote>
<p>服务端配置：</p>
</blockquote>
<ul>
<li>1.新建一个监控模块，先导入场景依赖</li>
</ul>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">&lt;!--web启动场景--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!--监控项目的启动场景--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;de.codecentric&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-admin-starter-server&lt;/artifactId&gt;
    &lt;version&gt;2.3.1&lt;/version&gt;
&lt;/dependency&gt;
</pre>
</div>
<ul>
<li>2.开启监控功能+更改监控模块的端口，防止与项目端口冲突</li>
</ul>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402183438290-767736727.png" alt="" loading="lazy"></p>
<p>&nbsp;端口号更改：server.port=8888</p>
<ul>
<li>3.测试访问监控页面、</li>
</ul>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402183604841-1276507662.png" alt="" loading="lazy"></p>
<blockquote>
<p>客户端配置&nbsp;</p>
</blockquote>
<ul>
<li>&nbsp;1.引入客户端场景依赖</li>
</ul>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;"> &lt;!--客户端场景依赖--&gt;
 &lt;dependency&gt;
     &lt;groupId&gt;de.codecentric&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt;
     &lt;version&gt;2.3.1&lt;/version&gt;
 &lt;/dependency&gt;
</pre>
</div>
<ul>
<li>2.设置服务端的URL</li>
</ul>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;"># 服务端地址
spring.boot.admin.client.url=http://localhost:8888
# 以web方式暴露所有端点
management.endpoints.web.exposure.include=*
</pre>
</div>
<ul>
<li>3.启动客户端</li>
</ul>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402184652974-629638707.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402184729617-1178734897.png" alt="" loading="lazy"></p>
<ul>
<li>4.更改实例IP信息&nbsp;</li>
</ul>
<p>　　在刚刚的监控中，可以看到使用的是计算机名称作为域名，这是因为在我的电脑上面有本机规则，但是如果放到了linux环境下，肯定会出错的，所以我们要更改成对应的IP信息进行访问</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;"># 当前实例地址是用host(false)还是server(true)
spring.boot.admin.client.instance.prefer-ip=true
</pre>
</div>
<p>再次重启客户端应用进行监控测试：</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402185346192-1812548152.png" alt="" loading="lazy"></p>
<h2>&nbsp;六、原理解析</h2>
<div>
<div class="yuque-doc-content" data-df="lake">
<div class="lake-engine-view lake-typography-classic">
<h3 id="Y2lxF" data-lake-id="3c4f61efafb655f095ef11d6e3cac5aa" data-wording="true">1、Profile功能</h3>
<p data-lake-id="19ff2cd52b17bb1ad0ebd73c966dd2ad" data-wording="true">　　为了方便多环境适配，springboot简化了profile功能。</p>
<h4 id="Vrwa7" data-lake-id="27064b1d1caf43656dd55f85b4889be0" data-wording="true">1.1、application-profile功能</h4>
<ul data-lake-id="2cde9d6eb21f1807153441f04be6e77b">
<li data-lake-id="51d2e9787a81aa7775f9246f00fe8332" data-wording="true">默认配置文件 &nbsp;application.yaml；任何时候都会加载</li>
<li data-lake-id="3869d0645459c55b611f6b9ad7e7719f" data-wording="true">指定环境配置文件 &nbsp;application-{env}.yaml</li>
<li data-lake-id="ece11ec798a16d8743e7f31e3417a511" data-wording="true">激活指定环境</li>
</ul>
<ul data-lake-id="e6648c195200400a2b41c06445db5620">
<ul data-lake-id="863d5324855344bd89022df19c83f69c">
<li data-lake-id="626024b54f999e6a6f015c3b0be83036" data-wording="true">配置文件激活:spring.profile.active=test</li>
<li data-lake-id="69f8d0cf1530497b41a73d61c36cafb0" data-wording="true">命令行激活：java -jar xxx.jar --<strong>spring.profiles.active=prod &nbsp;--person.name=haha</strong></li>
</ul>
</ul>
<ul data-lake-id="9cff0fedda2e1ed7526dd543722b04f7">
<ul data-lake-id="d013780d455c884b7e60ba2ebd8ec9ea">
<ul data-lake-id="3e6872807088cadf7a860c451e098279">
<li data-lake-id="0f2bca683f299eaadbe9ef9b02e219c7" data-wording="true"><strong>修改配置文件的任意值，命令行优先</strong></li>
</ul>
</ul>
</ul>
<ul data-lake-id="54f22cd6c3275860b410edf242495e69">
<li data-lake-id="3906e029c6e8f0bdfc26824b008e5b1e" data-wording="true">默认配置与环境配置同时生效</li>
<li data-lake-id="697c1a44e25168532c3323685d5f1979" data-wording="true">同名配置项，profile配置优先</li>
</ul>
<h4 id="EYFux" data-lake-id="17c0e92c2b58739cbface80a832b30de" data-wording="true">1.2、@Profile条件装配功能</h4>
<div id="UMbo2" class="lake-card-margin" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22java%22%2C%22code%22%3A%22%40Configuration(proxyBeanMethods%20%3D%20false)%5Cn%40Profile(%5C%22production%5C%22)%5Cnpublic%20class%20ProductionConfiguration%20%7B%5Cn%5Cn%20%20%20%20%2F%2F%20...%5Cn%5Cn%7D%22%2C%22heightLimit%22%3Atrue%2C%22margin%22%3Atrue%2C%22id%22%3A%22UMbo2%22%7D" data-language="java">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">@Configuration(proxyBeanMethods = false)
@Profile("production")
public class ProductionConfiguration {

    // ...

}
</pre>
</div>
<h3>2、外部化配置　　</h3>
</div>
</div>
</div>
</div>
</div>
</div>
<h4 id="aOFOk" data-lake-id="2a53b3e2e105894846b0fc0032123f6e" data-wording="true">2.1、外部配置源</h4>
<p data-lake-id="9a66e37091cb94f25e1b50895afa9986" data-wording="true"><span class="lake-fontsize-12">常用：<strong><span class="lake-fontsize-12">Java属性文件</span></strong><span class="lake-fontsize-12">、<strong><span class="lake-fontsize-12">YAML文件</span></strong><span class="lake-fontsize-12">、<strong><span class="lake-fontsize-12">环境变量</span></strong><span class="lake-fontsize-12">、<strong><span class="lake-fontsize-12">命令行参数</span></strong><span class="lake-fontsize-12">；</span></span></span></span></span></p>
<h4 id="EVV1l" data-lake-id="0d495593034ee6cc136cf014405baaac" data-wording="true">2、配置文件查找位置</h4>
<ul>
<li data-lake-id="e4ba5c97fb362ee7ec427bd74c197716" data-wording="true"><span class="lake-fontsize-12">(1) classpath 根路径</span></li>
</ul>
<p data-lake-id="e4ba5c97fb362ee7ec427bd74c197716" data-wording="true"><span class="lake-fontsize-12"><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402213609939-1079972306.png" alt="" loading="lazy"></span></p>
<ul>
<li data-lake-id="03de5fce2e8640ef8f52f0fd7f2173cc" data-wording="true"><span class="lake-fontsize-12">(2) classpath 根路径下config目录</span></li>
</ul>
<p data-lake-id="03de5fce2e8640ef8f52f0fd7f2173cc" data-wording="true"><span class="lake-fontsize-12"><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402213645277-1996335222.png" alt="" loading="lazy"></span></p>
<ul>
<li data-lake-id="28ff7a981ce551a20a2713c91961c599" data-wording="true"><span class="lake-fontsize-12">(3) jar包当前目录</span></li>
</ul>
<p data-lake-id="28ff7a981ce551a20a2713c91961c599" data-wording="true"><span class="lake-fontsize-12"><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402213701557-92970546.png" alt="" loading="lazy"></span></p>
<p data-lake-id="537f8a48a37fe24bbce40d47874dec4e" data-wording="true"><span class="lake-fontsize-12">(4) jar包当前目录的config目录</span></p>
<p data-lake-id="537f8a48a37fe24bbce40d47874dec4e" data-wording="true"><span class="lake-fontsize-12"><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402213754342-1190235960.png" alt="" loading="lazy"></span></p>
<ul>
<li data-lake-id="e2a3015fb9a0792bfef779b24dd2a354" data-wording="true"><span class="lake-fontsize-12">(5) config子目录的直接子目录</span></li>
</ul>
<p data-lake-id="e2a3015fb9a0792bfef779b24dd2a354" data-wording="true"><span class="lake-fontsize-12"><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402214029223-455984800.png" alt="" loading="lazy"></span></p>
<p data-lake-id="e2a3015fb9a0792bfef779b24dd2a354" data-wording="true"><strong><span class="lake-fontsize-12" style="color: rgba(255, 0, 0, 1)">注意：后面的配置会覆盖前面的配置，并不是优先级的问题（是覆盖问题）</span></strong></p>
<h4 id="VHleJ" data-lake-id="670aa1033f4a06e674b8dbac55048c57" data-wording="true">3、配置文件加载顺序：</h4>
<ol start="1" data-lake-id="68f22646756ec03f5d01c3dbf77590c6">
<li data-lake-id="77a50fae313daadf77fdeecd3ed6344c" data-wording="true"><span class="lake-fontsize-12">　当前jar包内部的application.properties和application.yml</span></li>
<li data-lake-id="7efebc7a45d8a136d90da63b51c3c4de" data-wording="true"><span class="lake-fontsize-12">　当前jar包内部的application-{profile}.properties 和 application-{profile}.yml</span></li>
<li data-lake-id="5e3e73327356e9682d34a2d79d010ffd" data-wording="true"><span class="lake-fontsize-12">　引用的外部jar包的application.properties和application.yml</span></li>
<li data-lake-id="12da252fefc6ab16fdaf2a653599252a" data-wording="true"><span class="lake-fontsize-12">　引用的外部jar包的application-{profile}.properties 和 application-{profile}.yml</span></li>
</ol>
<h4 id="LGVVN" data-lake-id="b12736940ca391bc0a51a5159bde98e4" data-wording="true"><strong><span style="background-color: rgba(255, 255, 0, 1)">4、指定环境优先，外部优先，后面的可以覆盖前面的同名配置项</span></strong></h4>
<h3 id="efPjL" data-lake-id="2826fea7cf5725f220f69f73a8c77b5c" data-wording="true">3、自定义starter(掌握+理解)</h3>
<h4 id="DM2nk" data-lake-id="846c5746c481d5ab3ae52494d235e005" data-wording="true">3.1、starter启动原理</h4>
<ul data-lake-id="0165c1c40e1d4e8fb46f059b4638dd84">
<li data-lake-id="d98f0b0882d988d0e8668c8a6e31758b" data-wording="true">starter-pom引入 autoconfigurer 包</li>
</ul>
<div id="84cqV" class="lake-card-margin" data-card-type="block" data-lake-card="flowchart2" data-card-value="data:%7B%22diagramData%22%3A%22x%C2%9C%C2%A5%C2%93M%C2%93%C3%930%5Cf%C2%86%C3%BF%5Cncf8%C3%85%C3%81%C3%9F%C2%89%C2%B3%C2%A57%5Cu000e%C2%9C9%C2%B2%5Cu001c%5Cu001c%5B%C3%B9%5Cu0018%C2%B2%C3%89%C2%8E%C3%ABn%C2%B7t%C3%BA%C3%9FQ%C3%82%C3%90vgah!%C2%A7X%C2%96%25%C2%BDz%C2%A4%5Cu0003%C3%A9%C3%80%5Cu0005R%5Cu001d%C3%88%5Cu0013%C3%84M%3F%C2%8D%C2%A4%5C%22%5C%22g9%23%5Cu0019I%C3%BBG%C3%80c3L%3B%C3%9F%C2%B9%C2%98%C3%881%23%C3%B5%5Cu0014%C3%B6%C2%A4%C3%BArx%7D%C2%99%C2%91M%C3%A7%5Cu0016%C3%9B%26%C3%A1%C2%99%C3%82%5Cu0018%C3%90%C3%96clbmYp%C3%85%5Cu001a%C3%8Au%C2%A1%C2%A9RZSkDA%C2%9D%C2%AE%C2%996%C2%82%C3%BB%C3%86%C3%8D%C3%B9%C2%9EI%25%C2%B4%C3%8AuF0%C2%85%C3%A0%3C%23%5Dz%5Cu0018%C3%B0%C3%BD*%C3%B4Oo6i%3F%C3%80%C2%87%7B%C2%92%C3%A09Q7%C3%B4%C3%ADXy%5Cu0018%5Cu0013%C3%84%C2%BB%7B%C2%B2%5ERB%5C%5C%C2%BDG%C3%8F5%C2%86%C3%BA%C3%BEi%5Cf%C2%80%C3%B1XFv%7DH%5Cu001d%C2%A9%C2%B8%C3%80%C3%BF%5Cu000e%C3%BA%C2%B6K%C2%A42%C3%AC%C2%98%C2%9D%24%40h%C3%A1%C2%A2z%5Cu0018%C3%AAi7%C2%9F%C2%A7m%C3%B40w%C3%A6%5Cu0016%5Cr~%5Cu001aG%C3%B0%C3%A9g%23%3F%C3%8E%5Cu001d%C3%83%C3%8AZHs%C2%9C%5Cu0007%5Cu0017%C2%BFAD%C2%BB%C2%8BqI%C2%B1%5Cu0004v%5Cu0006%5Cni%5Cu0000%C2%A8-%C2%85%C2%A3%C3%8ApF%C2%9D%5Cr%C2%92Z%C2%A9%C2%B9%5Cu0006%C3%87%C2%8A%C2%A6%5Cu0014s%C2%9C%C3%85Y)'%C2%A1%C2%A9%5Cr%C3%9Ez%C2%ACB2KK_%5Cu0006%5CnN%C2%B2F1%C3%AB4%3A%C2%9F%C3%A5%C2%9F%5B%C3%B8%C3%AEm)%C2%98%C2%BC%23%5Cu0017%C2%BA%C3%BF%C2%86%5Cu000e%C3%9Fk%26%C3%BE%5Ct%C2%87%C3%9B%C2%A6%5Ct%3B%C3%91%C3%B4%C3%AD6%C3%82%C2%AA%C2%8E%C3%AB%5Cu0013%C2%98%C3%AB%25%C3%BF%C2%89%C3%9CY%C2%9D%C2%B8%5Cu0019%C3%A2%C2%95%C2%89_%40%C3%BC%7C%5Cr%C3%84RX%C3%A5%5Cu000b%C3%A9(%5Cu000e%5Cu0007P%C3%A5%5Cr%C3%87%C3%81P%C2%9C%C3%8Ef-Ah%C3%A6%C3%BD%5Ctbh%C2%B87%C3%8Ecn%5Cu0011%5Cu001a%C2%AADS%C3%93%3A%C2%948J%C3%82%5Cu0018%C2%B0%C3%92%5Cu0004dy%5Cu0001Q%C3%BE'DU%5Cu0014%C2%B9e%C3%B8Y%C2%AE%C2%B5(%C2%A4R%5Cu000bQ)nZ%C2%B0%C3%87%C3%98%C2%8F-%C2%AD%C2%A7)%C3%91_%C3%8B%C3%B6%C2%8A%C3%ABU%5D8s56%C3%A7%5Cu0016%C3%B7%C2%8A%C2%9B%C3%92*-%C2%B9%C3%B8%3Df%2C7N%C3%89%25%C2%94%C3%86%C2%8E_%C2%8F%3F%5Cu0000E%2C%5E%C3%81%22%2C%22margin%22%3Atrue%2C%22id%22%3A%2284cqV%22%2C%22viewportSetting%22%3A%7B%22zoom%22%3A1%2C%22tlCanvasPoint%22%3A%5B188.69998168945312%2C175%2C1%5D%2C%22width%22%3A867.6%2C%22height%22%3A232%7D%2C%22height%22%3A214%2C%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F1354552%2F1606995919308-b2c7ccaa-e720-4cc5-9801-2e170b3102e1.png%22%2C%22search%22%3A%22starter%20%E2%80%8B%20autoconfigure%5Cn%20%E2%80%8B%20spring-boot-starter%5Cn%22%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606995919308-b2c7ccaa-e720-4cc5-9801-2e170b3102e1.png" height="214/"></div>
<ul data-lake-id="65ee47e0c4dc49fc83f638dca03bf047">
<li data-lake-id="60a01d341d9c402021b99e31e6922968" data-wording="true">autoconfigure包中配置使用 <span style="color: rgba(255, 0, 0, 1)"><strong>META-INF/spring.factories</strong></span> 中 <strong><span style="color: rgba(255, 0, 0, 1)">EnableAutoConfiguration</span> 的值，使得项目启动加载指定的自动配置类</strong></li>
<li data-lake-id="7e9922410f47498e1a55cc478355ba24" data-wording="true"><strong>编写自动配置类 xxxAutoConfiguration -&gt; xxxxProperties</strong></li>
</ul>
<ul data-lake-id="5731f0e9885dde7b0a3b39337f21e363">
<ul data-lake-id="bedd0abe1562144f3aa02b921ba48744">
<li data-lake-id="baa3587c13a824b5440a49f29dbb95d5" data-wording="true"><strong>@Configuration</strong></li>
<li data-lake-id="ab99d97b029acb16f99b1dfcbe84bee1" data-wording="true"><strong>@Conditional</strong></li>
<li data-lake-id="637ec5957c490479d47a0fe65247d89a" data-wording="true"><strong>@EnableConfigurationProperties</strong></li>
<li data-lake-id="7e50503af47439540f5884909b90a1f5" data-wording="true"><strong>@Bean</strong></li>
<li data-lake-id="9bc5cd058b1e06cbb607fa33cf12e2e4" data-wording="true">......</li>
</ul>
</ul>
<p data-lake-id="74c48818a7200f165bb15d36765c80b6" data-wording="true"><strong>引入starter </strong><strong>--- xxxAutoConfiguration --- 容器中放入组件 ---- 绑定xxxProperties ---- </strong><strong>配置项</strong></p>
<h4 id="B7hoA" data-lake-id="4f230a158cb5c81bdaefb7cd93acf748" data-wording="true">3.2、自定义starter</h4>
<p data-lake-id="bcac6985488292ffd6e9932cf4fa2aee" data-wording="true"><strong>atguigu-hello-spring-boot-starter（启动器）</strong></p>
<p data-lake-id="9066017ee9c1f176c377d65cdf9dd21b" data-wording="true"><strong>atguigu-hello-spring-boot-starter-autoconfigure（自动配置包）</strong></p>
<p><span style="font-size: 16px; color: rgba(255, 0, 0, 1); background-color: rgba(255, 255, 0, 1)"><strong>步骤：</strong></span></p>
<ul>
<li>1.创建场景启动器start</li>
</ul>
<p>　　想让别人来引入我们的场景，先要有一个场景启动器，一个场景启动器只是说明当前场景有多少个依赖，并没有代码　　</p>
<p>拿我们常用的场景启动器：<strong>spring-boot-starter-test</strong>、而对于一个场景的自动配置则是在当中的<strong>spring-boot-test-autoconfigure</strong>中</p>
<p>编写maven工程：&nbsp;<span style="background-color: rgba(255, 255, 0, 1)"><strong>zhixi-hello-spring-boot-starter（启动器）</strong>。</span></p>
<ul>
<li>&nbsp;2.创建自动配置包</li>
</ul>
<p>创建springboot项目:<span style="background-color: rgba(255, 255, 0, 1)"><strong>zhixi-hello-spring-boot-starter-autoconfigure</strong>。</span></p>
<ul>
<li>3.场景启动器中引入自动配置的包信息</li>
</ul>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402222052206-1646553602.png" alt="" loading="lazy"></p>
<ul>
<li>4.自动配置包中：编写业务逻辑业务组件+配置组件+自动配置类</li>
</ul>
<p>业务组件：service/HelloService</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_94da8526-28e1-4933-9550-b39680f59755" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_94da8526-28e1-4933-9550-b39680f59755" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_94da8526-28e1-4933-9550-b39680f59755" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.service;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.beans.HelloProperties;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.beans.factory.annotation.Autowired;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
 * @date 2021/4/2 22:24
 * 默认不要放在组件中
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> HelloService {
    @Autowired
    HelloProperties helloProperties;

    </span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
     * 打招呼的方法
     *
     * </span><span style="color: rgba(128, 128, 128, 1)">@return</span>
     <span style="color: rgba(0, 128, 0, 1)">*/</span>
    <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> String sayHello(String name) {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> helloProperties.getPrefix() + "," + name + "," +<span style="color: rgba(0, 0, 0, 1)"> helloProperties.getSuffix();
    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>配置组件：benas/HelloProperties</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_801b4c89-3909-4327-8b39-f09ec8581c49" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_801b4c89-3909-4327-8b39-f09ec8581c49" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_801b4c89-3909-4327-8b39-f09ec8581c49" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.beans;


</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.context.properties.ConfigurationProperties;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
 * @date 2021/4/2 22:26
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@ConfigurationProperties(</span>"zhixi.hello"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> HelloProperties {
    </span><span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> String prefix;
    </span><span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> String suffix;

    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> String getPrefix() {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> prefix;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> setPrefix(String prefix) {
        </span><span style="color: rgba(0, 0, 255, 1)">this</span>.prefix =<span style="color: rgba(0, 0, 0, 1)"> prefix;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> String getSuffix() {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> suffix;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> setSuffix(String suffix) {
        </span><span style="color: rgba(0, 0, 255, 1)">this</span>.suffix =<span style="color: rgba(0, 0, 0, 1)"> suffix;
    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>自动配置类：auto/HelloServiceAutoConfiguration</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_5a5a440b-0499-482c-b5ef-2c870ee80090" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_5a5a440b-0499-482c-b5ef-2c870ee80090" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_5a5a440b-0499-482c-b5ef-2c870ee80090" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.auto;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.beans.HelloProperties;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.zhixi.service.HelloService;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.boot.context.properties.EnableConfigurationProperties;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.context.annotation.Bean;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.context.annotation.Configuration;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> zhangzhixi
 * @date 2021/4/2 22:33
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@Configuration
</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * 没有配置HelloService，下面配置才生效
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@ConditionalOnMissingBean(HelloService.</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * 开启属性自动绑定,默认会将HelloProperties放在容器当中
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@EnableConfigurationProperties(HelloProperties.</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> HelloServiceAutoConfiguration {

    @Bean
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> HelloService helloService() {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> HelloService();
    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<ul>
<li>5.安装到本地maven仓库中</li>
</ul>
<p>场景启动器依赖自动配置包，所以要将<span style="background-color: rgba(255, 255, 0, 1)">自动配置包安装得到本地仓库</span></p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402224113882-21589400.png" alt="" loading="lazy"></p>
<p>把场景启动器也放到本地仓库中，这样别的项目就可以引入了</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402231422938-1969624324.png" alt="" loading="lazy"></p>
<ul>
<li>6.创建开发场景目录，进行测试</li>
</ul>
<p>&nbsp;引入我们写好的场景启动器&nbsp;<strong>zhixi-hello-spring-boot-starter（启动器）</strong>：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">&lt;dependency&gt;
    &lt;groupId&gt;com.zhixi&lt;/groupId&gt;
    &lt;artifactId&gt;zhixi-hello-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
</pre>
</div>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402224804787-675256955.png" alt="" loading="lazy"></p>
<p>&nbsp;自动配置类不可能默认生效，因为默认生效的规则是：</p>
<ul data-lake-id="65ee47e0c4dc49fc83f638dca03bf047">
<li data-lake-id="60a01d341d9c402021b99e31e6922968" data-wording="true">autoconfigure包中配置使用&nbsp;<span style="color: rgba(255, 0, 0, 1)"><strong>META-INF/spring.factories</strong></span>&nbsp;中&nbsp;<strong><span style="color: rgba(255, 0, 0, 1)">EnableAutoConfiguration</span>&nbsp;的值，使得项目启动加载指定的自动配置类</strong></li>
</ul>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402225310524-1355278814.png" alt="" loading="lazy"></p>
<ul>
<li>7.更改默认配置</li>
</ul>
<p>在自动配置包：zhixi-hello-spring-boot-starter-autoconfigure的resources目录下新建META-INF目录，创建spring.factories配置文件</p>
<p>在配置文件中指定要加载的自动配置类</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402225852970-379629168.png" alt="" loading="lazy"></p>
<ul>
<li>8.继续测试</li>
</ul>
<p>编写controller：controller/MyController</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_41ed314e-f543-4285-8d06-fcac73d2c135" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_41ed314e-f543-4285-8d06-fcac73d2c135" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_41ed314e-f543-4285-8d06-fcac73d2c135" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 0, 1)">@RestController
</span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> MyController {
    @Autowired
    </span><span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> HelloService helloService;
    @GetMapping(</span>"/hello"<span style="color: rgba(0, 0, 0, 1)">)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> String helloController() {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> helloService.sayHello("张志喜"<span style="color: rgba(0, 0, 0, 1)">);
    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>在配置文件中定义前后缀信息：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">zhixi.hello.prefix=你好
zhixi.hello.suffix=666
</pre>
</div>
<p>访问：localhost:8080/hello、成功</p>
<p><img src="https://img2020.cnblogs.com/blog/2126720/202104/2126720-20210402230705834-277859454.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>　　</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>　　</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div>&nbsp;</div>
</div>
</div>
</div>
</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2021-03-27 19:35</span>&nbsp;
<a href="https://www.cnblogs.com/zhangzhixi/">Java小白的搬砖路</a>&nbsp;
阅读(<span id="post_view_count">17</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=14586705" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(14586705);return false;">收藏</a></div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="https://common.cnblogs.com/highlight/10.3.1/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 623991, cb_blogApp = 'zhangzhixi', cb_blogUserGuid = '82f53751-e11c-4971-fa59-08d83ba20c85';
    var cb_entryId = 14586705, cb_entryCreatedDate = '2021-03-27 19:35', cb_postType = 1;
    updatePostStats(
        [cb_entryId],
        function(id, count) { $("#post_view_count").text(count) },
        function(id, count) { $("#post_comment_count").text(count) })
    zoomManager.apply("#cnblogs_post_body img:not(.code_img_closed):not(.code_img_opened)");
</script>
<a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="under-post-card">
        <div id='div-gpt-ad-1592365906576-0' style='width: 300px; height: 250px;'></div>
    </div>
    <div id="under_post_card1"></div>
    <div id="cnblogs_c2" class="under-post-card">
        <div id='div-gpt-ad-1592366332455-0' style='width: 468px; height: 60px;'></div>
    </div>
    <div id="under_post_card2"></div>
    <div id="HistoryToday" class="under-post-card"></div>
    <script type="text/javascript">
       var commentManager = new blogCommentManager();
       commentManager.renderComments(0);
       fixPostBody();
       deliverBigBanner();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);       deliverT2();
       deliverC1C2();
       loadNewsAndKb();
       loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);       LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
       GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
       loadOptUnderPost();
       GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->
	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_c3"></div>
			<div id="blog-calendar" style="display:none"></div><script>loadBlogDefaultCalendar();</script>			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div>
                    <script>loadBlogSideColumn();</script>
			</div>			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright &copy; 2021 Java小白的搬砖路
<br /><span id="poweredby">Powered by .NET 5.0 on Kubernetes</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    <div id="page_end_html">
        <script language="javascript" type="text/javascript">
// 生成目录索引列表
 
function GenerateContentList()
{
    var mainContent = $('#cnblogs_post_body');
    var h2_list = $('#cnblogs_post_body h2');//如果你的章节标题不是h2,只需要将这里的h2换掉即可
 
    if(mainContent.length < 1)
        return;
 
    if(h2_list.length>0)
    {
        var content = '<a name="_labelTop"></a>';
        content += '<div id="navCategory" style="color:#152e97;">';
        content += '<p style="font-size:18px;"><b>阅读目录</b></p>';
        content += '<ul>';
        for(var i=0; i<h2_list.length; i++)
        {
            var go_to_top = '<div style="text-align: right;"><a href="#_labelTop" style="color:#f68a33">回到顶部</a><a name="_label' + i + '"></a></div>';
            $(h2_list[i]).before(go_to_top);
            
            var h3_list = $(h2_list[i]).nextAll("h3");
            var li3_content = '';
            for(var j=0; j<h3_list.length; j++)
            {
                var tmp = $(h3_list[j]).prevAll('h2').first();
                if(!tmp.is(h2_list[i]))
                    break;
                var li3_anchor = '<a name="_label' + i + '_' + j + '"></a>';
                $(h3_list[j]).before(li3_anchor);
                li3_content += '<li><a href="#_label' + i + '_' + j + '">' + $(h3_list[j]).text() + '</a></li>';
            }
            
            var li2_content = '';
            if(li3_content.length > 0)
                li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a><ul>' + li3_content + '</ul></li>';
            else
                li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a></li>';
            content += li2_content;
        }
        content += '</ul>';
        content += '</div><p>&nbsp;</p>';
        content += '<hr style="height:1px;border:none;border-top:1px dashed #0066CC;"/>';
        if($('#cnblogs_post_body').length != 0 )
        {
            $($('#cnblogs_post_body')[0]).prepend(content);
        }
    }   
}
GenerateContentList();
</script>



<!-- ==================================支付赞赏/打赏======================================= -->
<script type="text/javascript" src="//files.cnblogs.com/files/enjoy233/tctip-1.0.3.min.js"></script> <!-- js文件引入 -->
<script>
    new tctip({
        top: '20%',
        button: {
            id: 1,
            type: 'zanzhu',
        },
        list: [
            {
                type: 'alipay',
                qrImg: 'https://images.cnblogs.com/cnblogs_com/zhangzhixi/1910073/t_210102035045%E6%94%AF%E4%BB%98%E5%AE%9D.png' //替换成自己的支付宝付款码
            }, {
                type: 'wechat',
                qrImg: 'https://images.cnblogs.com/cnblogs_com/zhangzhixi/1910073/t_210102035140%E5%BE%AE%E4%BF%A1.png' //替换成自己的微信付款码
            }
        ]
    }).init()
</script>
<!-- ==================================支付赞赏/打赏======================================= -->

    </div>

    <input type="hidden" id="antiforgery_token" value="CfDJ8L-rpLgFVEJMgssCVvNUAjvu3xYPEjk-RHquL27WPNKBj8VuOVfU6ZRdq0QDUuVhE8mZsGB3H-GE8Wbqp5kKEQIAeTwZ6UNtp2Kg1U4sl5iUH-MPwuoIV9pcTsZmIoJjCRqVbQkEg65ycpOrVvxaRZQ" />
</body>
</html>
